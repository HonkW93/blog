<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Interview Exercise</title>
      <link href="/posts/interview-exercise/"/>
      <url>/posts/interview-exercise/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="a1d9eefd6530fb4d9cf52f448627acc2136170d46cf03f658f41963f5998e6a7">ada13e27b0f9ad7517bf465507295077ade11b528ba042de734e18ae54520a275b793c8f37569a288b8c8e4f8c2ea4d0fc132bd681e008435377041513b8babdcb2f4406b9ad783f348b93c5cfecc27ab743b71ba6348b77b9271dfb97a3410fdcc5c60f6ac40d0dfea3f0f65c433d352e84e49dbef76eefbe67ff9402f75b893dd4ebc32c1a858a4bd86e521da8a2d5e00dd4bb7a4892a67222028683112ce18ca195b3322d8c0692ec36c0617b6f46f8d17d3fdda169d2898776a164e7a63a6b192f4286e4286d0c99151bf78ac47c93bbd03f48d2dc8a89833f0fd2297e513c4da86a76be3598dfceb5248f8f55bbf056c44e3639f75f4d251858ee77003e59cc3b3ca68798d1d0af9e36e1b6a9398a107343e52dc9c3db4f552b2610faf2c06f9903c0916cd5d6cef42239671ba2eedc8b2e181947a1408b6a0fa0d784e6135c6c0939fb4e25e22ffabc458dc52928f66604b952eb42e959fbd32a5cb787064bbd6d75b2ab79a4d9893984901314255769147b8b2eb9975e43638397deadaa36419ecc0d48fbaef314b9457abc31523c811eb84feab636ebb5b8e29eac87d41a67e35bca19ac56a6381bcbc0519b2b0ae8a73d7ad075c92ba2e75e043703ded93e2fa3a8b7fbdc5b7980074cdbceed8c43630d9114410814d6d37ad70765b8c3298293d8908383fd0073d66e7318ac87e017068471b21cb502c11f99e8d5cb9cb8dc5a7640d46345148db30f4591604829c6e9a4a99e472165041d0486631f30fa938b90d77fe044edac01897aab05a910c1b3b54851bc0d6a6edfad993a910c83ca98dc909b1b9a09cf6e2dee3ecf216e95650b34e0a2de7cee11a03037b607506a6e511d3ff5e6276918ef074cfa4116d5ab061e02becc081c2006caaff0f3086489c36910174cc2812fae4eaadd8e31f80ce9b9651ea7bea95c72a3b60522c6e94974f9f916743acdc22b72601ae7e9444548703546e370b5fb6db7f28bce22666f3de534fd7fa8087a77c325a62dc120fd282993ed1d33e3bdbcd413f6f55c6568269b9304136b5e9d8e3ce56f8a30a08aa908db077eccec25e1afa6d2ced38fa86c2898a729b757df446a9136beb9bafcbddc29484cda52cb26cdaf6d57ae0331a921a21368db40d0df255a218654902518b4c9665bf682398bc159448b2a4089166efd74d2a97ed6e05f1d85cf940caff4bd2f4d35cedcab9679d33317511ac69ba02c4824f8780eead022d06521de9ddace3423d6105c1ce884d495aa164587f005eac67877af3bcff0c59ff0290d707aaf24cab67fa7ad416cf0db2e1e440572d93641dce47e3fc5d4a79a7493674be770573f14ef1da5da35e03492909781061201a638020d18e6a768bc40f0e136abb16e155a1153fcaa5521814634c0112436cfedebaa64fd3eb26061341627a51e8b49fb84a8f3628c04d74b4673d990f4677baa9f2f51144db41e6a1b79cc6386a68a8d7f7d1b10bee2868c31429384ee11ed58e7b120a4d6d78d7de4b389f0d91bf18e1cfe87cb5f965a93746ea5429f0ed3bbbb0b21a028b727329a8e6be0a513fedaa25dcc7fe5321385747a8c9ab13b522436988b3ac2138aa3d47d579130171810129086bdae3fa7d1e71f48b2f3f05fa46f49275dbd3777470bccc30277a0e62c15de2e0f07d14be2eb8dd1782ddc0d7621107b868ecd281f28495026df9f8496fdcf48ade6e6038e6e3b3fc7563af89d21c2ccdcf933d35b62e5630151dbe08a54660515f65062125f730360af89eb377cede059ea7776c90a108e53b6e1077db9974e97b8ef3eb559d6be8a2ac4d150f02b1678eee3a4ae24626dabafe765a45f7801aac84c9ecab1e302c4384e874ab9fe049ca995a1ca5cdbc70a7825290edd23d1750fef3ad8fd8f0406b955d038fb5d535668468a987ea39abfed6f8a19c71acc2c643ddfc061a980e13af098ef84bd8e671c320bd20f00ac5cbcce53e72a989a5b3e637f418530b8318800db6cf38cfb364e532f9414db39d02601cc99fd343f9374c7d8d494768505ce11c04a9db9028c5ae9baf8e5f92ef99221305fcb06a23b08d4693095ffadfe5c06b1dda168898c58c542c716985667a23b4c3c0c259334d0d96ad8e8a902292f51c6a6f3804cd0a8c892d0719750c73aa967310185415ac43dde07cea443706056881ee1a5126e18e1537eacd96b31af7ed74015a916e8e7676560e054a53c9549218664134ddb84d79ed63815a81c15aa61b4b56e4f3c1b954d6f74053d76f0b7c0cfb7b4b888f388ff75a9733ba46a807b1abd477856bc6215661ea80da2c3e010ff5803b9697aef30ca3a5ab0258c88e78b9a73c79d4855aacba54037143395f84d140691259710db8ed426c7f723fcd07131eea2f6ccbe14</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> ic </category>
          
          <category> interview </category>
          
      </categories>
      
      
        <tags>
            
            <tag> interview </tag>
            
            <tag> exercise </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vimscript-AutoMatic-Verilog</title>
      <link href="/posts/AutoMatic/"/>
      <url>/posts/AutoMatic/</url>
      
        <content type="html"><![CDATA[<div class="tip warning faa-horizontal animated"><p>有问题先看文档，再看评论区，依旧有问题可留言。</p><p></p></div><p>最新脚本地址：<a href="https://github.com/HonkW93/automatic-verilog/">GitHub</a></p><p>使用<a href="https://docsify.js.org/#/?id=docsify">docsify</a>优化文档结构，文档迁移至：<a href="https://automatic-verilog.honk.wang/">automatic-verilog文档</a></p><p>此页面只保留评论区作为问题留言板。</p><p>2022.5.25更新：V1.5无法兼容之前的版本，请各位注意。</p><p>2022.12.6更新：当前最新代码可能与文档有部分不一致，暂时没时间更新文档，有问题留言反馈，谢谢。</p>]]></content>
      
      
      <categories>
          
          <category> ic </category>
          
          <category> editor </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vim </tag>
            
            <tag> vimscript </tag>
            
            <tag> verilog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows必装</title>
      <link href="/posts/Windows-Software/"/>
      <url>/posts/Windows-Software/</url>
      
        <content type="html"><![CDATA[<div align=center style=font-size:24px><font color="#FFA000">那</font><font color="#F0910F">些</font><font color="#E1821E">值</font><font color="#E0732D">得</font><font color="#E0643C">推</font><font color="#E0554B">荐</font><font color="#E0465A">，</font><font color="#E03769">让</font><font color="#E02878">人</font><font color="#E01987">眼</font><font color="#E00A96">前</font><font color="#E000A5">一</font><font color="#E000B4">亮</font><font color="#E000C3">的</font><font color="#E000D2">软</font><font color="#E000E1">件</font><font color="#E000F0">。</font></div><h2 id="font-color-b5d5ff日常font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff日常font"></a> <font color= #b5d5ff>日常</font></h2><ol><li>下载：<a href="https://www.qbittorrent.org/">qBittorrent</a>，<a href="https://www.internetdownloadmanager.com/">IDM</a>，<a href="https://xdown.org/">Xdown</a>，<a href="https://www.neatdownloadmanager.com/index.php/en/">NDM</a>，<s><a href="https://www.pandownload.com/">PanDownload</a></s>（作者被抓，别再用了），<s><a href="https://www.jokerps.com/?p=1735">迅雷极速版</a></s>（吸血雷，别再用了）</li><li>电脑：<a href="http://www.kbtool.cn/">卡硬工具箱</a>（一共包括了 <code>BIOS</code>工具、<code>CPU</code>检测、<code>CPU</code>超频工具、电池检测、性能测试等<strong>12个分类</strong>的工具，共计<strong>70余个</strong>小工具），<a href="https://wpd.app/">WPD</a>（<code>Windows</code>系统优化）</li><li>桌面：（希望桌面软件能有个集合体）<ol><li>桌面文件分类：<a href="https://www.stardock.com/products/fences/">Fences</a></li><li>隐藏状态栏：<a href="https://www.microsoft.com/zh-cn/p/translucenttb/9pf4kz2vn4w9">TranslucentTB </a></li><li>Todo List：<a href="http://www.yynote.cn/">小黄条</a></li><li>壁纸：<a href="https://store.steampowered.com/app/431960/Wallpaper_Engine/">Wallpaper Engine</a></li></ol></li><li>搜索：<a href="https://www.voidtools.com/zh-cn/">Everything</a>，<a href="https://www.listary.com/">Listary</a></li><li>文件：<a href="https://www.xyplorer.com/">XYplorer</a></li><li>卸载：<a href="https://geekuninstaller.com/">Geek Uninstaller</a></li><li>安全：<a href="https://www.huorong.cn/">火绒</a>（推荐弹窗拦截）</li></ol><h2 id="font-color-b5d5ff编辑font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff编辑font"></a> <font color= #b5d5ff>编辑</font></h2><ol><li>编辑：<a href="https://www.vim.org/download.php">Gvim</a>（编辑器之神），<a href="https://www.gnu.org/software/emacs/">Emacs</a>（神之编辑器），<a href="https://typora.io/">Typora</a>（Markdown力荐），<a href="https://neovim.io/">Neovim</a>（<code>Gvim</code>平替），<a href="https://www.sublimetext.com/">Sublime Text</a>，<s><a href="https://notepad-plus-plus.org/downloads/">Notepad++</a></s>（作者反华，自行斟酌）</li><li>对比：<a href="https://www.scootersoftware.com/">Beyond Compare</a></li><li>IDE：<a href="https://code.visualstudio.com/">VSCode</a>（力荐，可配合<code>neovim</code>），<a href="https://www.anaconda.com/">Anaconda</a>（<a href="https://jupyter.org/">Jupyter Notebook</a>超好用）</li><li>思维导图：<a href="https://www.xmind.cn/">XMind</a></li><li>博客：<ol><li>截图：<a href="https://zh.snipaste.com/">Snipaste</a>（截图 + 贴图）</li><li>GIF：<a href="https://www.cockos.com/licecap/">LICEcap</a></li><li>键盘按键：<a href="http://code52.org/carnac/">Carnac</a></li><li>图床：<a href="https://molunerfinn.com/PicGo/">PicGo</a></li></ol></li></ol><h2 id="font-color-b5d5ff娱乐font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff娱乐font"></a> <font color= #b5d5ff>娱乐</font></h2><ol><li><p>聊天软件：<a href="https://tim.qq.com/index.html">TIM</a>（简洁）</p></li><li><p>视频播放：<a href="https://www.potplayer.org/">PotPlayer</a>（全面）</p></li><li><p>浏览器插件（按重要程度排序）：</p><ul><li><p><a href="https://chrome.google.com/webstore/detail/extension-manager/gjldcdngmdknpinoemndlidpcabkggco">Extension Manager</a>（扩展管理器）</p></li><li><p><a href="https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo">Tampermonkey</a>（油猴脚本，相关脚本见后面<code>Greasy Fork</code>部分）</p></li><li><p><a href="http://a.newday.me/">集装箱</a>（一个插件，提供一揽子服务）</p></li><li><p><code>bilibili</code></p><ul><li><a href="https://s.xmcp.ltd/pakkujs/?src=helper">pakku</a>（哔哩哔哩弹幕过滤器 ）</li><li><a href="https://bilibilihelper.com/">哔哩哔哩助手</a>（最好用的B站扩展程序）</li></ul></li><li><p><a href="https://www.monknow.com/zh-CN">MONKNOW</a>（新标签页），<a href="https://adblockplus.org/">Adblock+</a>（广告拦截），<a href="https://withpinbox.com/">Pinbox</a>（跨平台收藏），<a href="https://chrome.google.com/webstore/detail/imageassistant-batch-imag/dbjbempljhcmhlfpfacalomonjpalpko">ImageAssistant</a>（图片助手），<a href="https://chrome.google.com/webstore/detail/github%E5%8A%A0%E9%80%9F/mfnkflidjnladnkldfonnaicljppahpg?hl=zh-CN">GitHub加速</a>，<a href="https://www.baiduyun.wiki/">网盘直链下载助手</a>，<a href="https://chrome.google.com/webstore/detail/decentraleyes/ldpochfccmkkmhdbclfhpagapcfdljkj">Decentraleyes</a>（CDN加速，主要用于StackOverflow）</p></li></ul></li><li><p><a href="https://greasyfork.org/zh-CN">Greasy Fork</a>：<a href="https://greasyfork.org/zh-CN/scripts/373563-bilibili-evolved">Bilibili Evolved</a>，<a href="https://greasyfork.org/zh-CN/scripts/394099-%E7%99%BE%E5%BA%A6%E7%B3%BB%E7%BD%91%E7%AB%99%E5%8E%BB%E5%B9%BF%E5%91%8A">百度系网站去广告</a>，<a href="https://greasyfork.org/zh-CN/scripts/14178-ac-baidu-%E9%87%8D%E5%AE%9A%E5%90%91%E4%BC%98%E5%8C%96%E7%99%BE%E5%BA%A6%E6%90%9C%E7%8B%97%E8%B0%B7%E6%AD%8C%E5%BF%85%E5%BA%94%E6%90%9C%E7%B4%A2-favicon-%E5%8F%8C%E5%88%97">AC-baidu</a>（搜索，重定向优化），<s><a href="https://greasyfork.org/en/scripts/399837-endless-google-and-baidu">Endless Google And Baidu</a></s>，（使用AC-baidu则不需要此脚本），<s><a href="https://greasyfork.org/zh-CN/scripts/398094-%E7%99%BE%E5%BA%A6%E6%96%87%E5%BA%93%E5%8E%9F%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD">百度文库</a></s>（已挂，请主动为文库付费）</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> tools </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
            <tag> software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vim-Adventure</title>
      <link href="/posts/Vim-Adventure/"/>
      <url>/posts/Vim-Adventure/</url>
      
        <content type="html"><![CDATA[<h1 id="font-color-b5d5ff-stylefont-weightbold前言font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold前言font"></a> <font color= #b5d5ff style='font-weight:bold'>前言</font></h1><blockquote><p>Vim作为编辑器来说，学习曲线确实很陡。但入门之后Vim会越用越顺手，根据个人配置的Vim也会越来越好用。vim-adventure提供了一个学习和游戏结合的环境（虽然最后的游戏难度可能会让人望而却步。。），可以用以入门vim的操作</p></blockquote><p>游戏官网入口：<a href="https://vim-adventures.com/">Learn VIM while playing a game - VIM Adventures</a></p><p>参考攻略入口：<a href="https://blog.csdn.net/weixin_45107866/article/details/93711288">最好的Vim学习教程-Vim Adventures 全攻略（附彩蛋）</a></p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cover/vim-adventure.png" alt="vim-adventure" /></p><p>在玩vim-adventure的过程中学习（或复习）了一些Vim的基础知识，在本文记录笔记，作为以后<font color= greden font size = 6 style='font-weight:bold'>万一</font>遗忘了的搜索材料。</p><h1 id="font-color-b5d5ff-stylefont-weightbold关卡font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold关卡font"></a> <font color= #b5d5ff style='font-weight:bold'>关卡</font></h1><h2 id="font-color-b5d5ff-stylefont-weightboldlevel1hjklfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldlevel1hjklfont"></a> <font color= #b5d5ff style='font-weight:bold'>Level1(<code>h</code>,<code>j</code>,<code>k</code>,<code>l</code>)</font></h2><blockquote><p>使用<code>h</code>，<code>j</code>，<code>k</code>，<code>l</code>键使光标单格进行<strong>上下左右</strong>的移动，类似于方向键。</p></blockquote><p>注意如果光标在行末而每一行的长度不同的话，光标会根据长度最长的行自动调整其跳转位置。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/hjkl.gif" alt="hjkl" /></p><h2 id="font-color-b5d5ff-stylefont-weightboldlevel2wbefont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldlevel2wbefont"></a> <font color= #b5d5ff style='font-weight:bold'>Level2(<code>w</code>,<code>b</code>,<code>e</code>)</font></h2><blockquote><p>使用<code>w</code>，<code>b</code>，<code>e</code>键使光标按<code>词</code>进行移动。</p></blockquote><ul><li><p><code>w</code>使光标跳转到<strong>下个词</strong>（word）开头。</p></li><li><p><code>b</code>使光标跳转到当前词开头，如果已经在当前词<strong>开头</strong>（back），则跳转到<strong>前个词</strong>开头。</p></li><li><p><code>e</code>使光标跳转到当前词结尾，如果已经在当前词<strong>结尾</strong>（edge），则跳转到<strong>下个词</strong>结尾。</p></li></ul><p>注意<code>w</code>，<code>b</code>，<code>e</code>会将标点（如引号<code>&quot;</code>，逗号<code>,</code>还有空格<code>&lt;space&gt;</code>等）当成一整个<code>词</code>。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/wbe.gif" alt="wbe" /></p><h2 id="font-color-b5d5ff-stylefont-weightboldlevel3-level-4wbexrfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldlevel3-level-4wbexrfont"></a> <font color= #b5d5ff style='font-weight:bold'>Level3 &amp; Level 4(<code>W</code>,<code>B</code>,<code>E</code>,<code>x</code>,<code>r</code>)</font></h2><blockquote><p>使用<code>W</code>，<code>B</code>，<code>E</code>键使光标按<code>整词</code>进行移动。整体的移动方式类似<code>w</code>，<code>b</code>，<code>e</code></p></blockquote><p>与<code>w</code>，<code>b</code>，<code>e</code>不同的是，<code>W</code>，<code>B</code>，<code>E</code>会<strong>包含标点</strong>在<code>词</code>内，不会将标点单独当成一整个<code>词</code></p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/WBE_upper.gif" alt="WBE_upper" /></p><blockquote><p>使用<code>x</code>键删除单个字符，使用<code>r</code>键替换单个字符</p></blockquote><p><code>x</code>的作用是<strong>删除</strong>（cross）当前光标下的单个字符。等效于输入<code>dl</code>；大写<code>X</code>的作用是<strong>删除</strong>当前光标前一个光标下的单个字符。</p><p><code>r</code>的作用是<strong>替换</strong>（replace），按<code>r</code>后输入正确字符可以替换当前字符。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/rx.gif" alt="rx" /></p><h2 id="font-color-b5d5ff-stylefont-weightboldlevel5dfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldlevel5dfont"></a> <font color= #b5d5ff style='font-weight:bold'>Level5(<code>d</code>)</font></h2><blockquote><p>使用<code>d</code>键配合其他按键进行删除操作</p></blockquote><p><code>d</code>的作用是<strong>删除</strong>（delete）字符/行/段落， <font color= red >但是单独的<code>d</code>只是一个<strong>操作符</strong>（operator），需要根据实际的<strong>动作</strong>(motion)命令来产生效果。</font></p><p>比如之前移动光标的<code>w</code>，<code>b</code>，<code>e</code>就是动作命令。因此</p><ul><li><code>dw</code>删除字符到<strong>下个词</strong>（delete word）开头。</li><li><code>db</code>删除字符到当前词开头，如果已经在当前词<strong>开头</strong>（delete back），则删除字符到<strong>前个词</strong>开头。</li><li><code>de</code>删除字符到当前词结尾，如果已经在当前词<strong>结尾</strong>（delete edge），则删除字符到<strong>下个词</strong>结尾。</li></ul><p>同理，<code>dW</code>，<code>dB</code>，<code>dE</code>删除时会<strong>包含标点</strong>在<code>词</code>内，不会将标点单独当成一整个<code>词</code></p><p>再比如如之前上下左右移动光标的<code>h</code>，<code>j</code>，<code>k</code>，<code>l</code>也是动作命令。因此</p><ul><li><code>dh</code>删除当前光标<strong>左边</strong>的字符，即删除<strong>当前光标之前</strong>的字符（delete h）。</li><li><code>dl</code>删除当前光标<strong>右边</strong>的字符，即删除<strong>当前光标</strong>的字符（delete l），等效于<code>x</code>。</li><li><code>dj</code>删除<strong>当前行及其下一行</strong>的所有字符（delete j）。</li><li><code>dk</code>删除<strong>当前行及其上一行</strong>的所有字符（delete k）。</li></ul><p>另外， <font color= red >重复两次操作符代表对当前行操作</font>，因此</p><ul><li><code>dd</code>删除<strong>当前行</strong>所有字符。</li></ul><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/d-button.gif" alt="d-button" /></p><h2 id="font-color-b5d5ff-stylefont-weightboldlevel6~0dfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldlevel6~0dfont"></a> <font color= #b5d5ff style='font-weight:bold'>Level6(<code>~</code>,<code>$</code>,<code>0</code>,<code>^</code>,<code>D</code>)</font></h2><blockquote><p>使用<code>~</code>键对单个字符进行大小写转换</p><p>使用<code>$</code>键跳转到行尾</p><p>使用<code>0</code>键跳转到行首</p><p>使用<code>^</code>键跳转到行首非空字符</p></blockquote><p><code>~</code>的操作类似于<code>r</code>的替换（replace），只针对单个字符使用，如果字符是大写则转换为小写，反之亦然。</p><p>同样的，<code>$</code>，<code>0</code>，<code>^</code>也是动作命令，也可以结合<code>d</code>来操作。因此</p><ul><li><code>d$</code>删除当前光标<strong>到行尾</strong>的所有字符（delete $）。</li><li><code>d0</code>删除当前光标<strong>到行首</strong>的所有字符（delete 0）。</li><li><code>d^</code>删除当前光标<strong>到行首非空字符</strong>的所有字符（delete ^）。</li></ul><p>值得注意的是，<code>D</code>单键等效于<code>d$</code>的功能，之后还会见到一些类似功能。因此，每当想进行“剪切/删除/复制/添加” “到行尾”操作的时候，都可以先看看是不是可以使用大写字母替代其功能，减少操作次数。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/headtail.gif" alt="headtail" /></p><hr /><h2 id="font-color-b5d5ff-stylefont-weightbold小结1-operator-motion-font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold小结1-operator-motion-font"></a> <font color= #b5d5ff style='font-weight:bold'>小结1 ( operator + motion )</font></h2><p><code>vim</code>的基础操作模式可以分为两种。</p><ol><li>单键操作<ul><li><p>单键操作单个字符：</p><ul><li><code>x</code>删除单个字符</li><li><code>r</code>替代单个字符</li><li><code>~</code>单个字符大小写转换</li></ul></li><li><p>单键操作跳转动作（动作命令）：</p><ul><li><code>h</code>，<code>j</code>，<code>k</code>，<code>l</code>，跳转单个字符</li><li><code>w</code>，<code>b</code>，<code>e</code>，跳转单个词（<code>W</code>，<code>B</code>，<code>E</code>类似）</li><li><code>$</code>，<code>0</code>，<code>^</code>，跳转行首行末</li></ul></li></ul></li><li>操作符+动作命令<ul><li><code>d</code>删除操作符，配合动作命令完成删除</li></ul></li></ol><hr /><h2 id="font-color-b5d5ff-stylefont-weightboldlevel7ftftzggfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldlevel7ftftzggfont"></a> <font color= #b5d5ff style='font-weight:bold'>Level7(<code>f</code>,<code>t</code>,<code>F</code>,<code>T</code>,<code>,</code>,<code>;</code>,<code>z</code>,<code>%</code>,<code>g</code>,<code>G</code>)</font></h2><blockquote><p>使用<code>f</code>键向后跳转到指定字符位置</p><p>使用<code>t</code>键向后跳转到指定字符的位置前</p><p>使用<code>,</code>键和<code>;</code>键重复查找跳转的操作</p></blockquote><p>查找字符跳转操作包括<code>f</code>和<code>t</code></p><ul><li><p><code>f</code>的作用是<strong>向后查找</strong>（find）某个特定的单个字符的位置并跳转。比如按<code>fa</code>后，在查找到下一个字符“a”的位置后光标会跳转到其位置。<code>F</code>的操作与<code>f</code>相同，只是方向是向前查找。</p></li><li><p><code>t</code>的作用是<strong>向后查找直到</strong>（till）某个特定单个字符位置之前的位置并跳转。比如按<code>ta</code>后，在查找到下一个字符“a”的位置后光标会跳转其位置之前的位置。<code>T</code>的操作与<code>t</code>相同，只是方向是向前查找。</p></li></ul><p>在完成一次<code>f</code>或<code>t</code>的单个字符的查找跳转之后，再使用<code>;</code>可以<strong>重复查找操作</strong>，而再使用<code>,</code>可以<strong>反向重复查找操作</strong>。比如按<code>fa</code>之后，光标会跳转到下一个字符&quot;a&quot;的位置；这时按<code>;</code>则等效重复<code>fa</code>的操作，查找到再下一个字符&quot;a&quot;的位置；而按<code>,</code>则等效重复<code>Fa</code>的操作，查找到上一个字符&quot;a&quot;的位置。</p><p>值得注意的是，只要操作过<code>f</code>或者<code>t</code>，操作就会被记录在寄存器中，因此这时可以随时使用<code>;</code>或者<code>,</code>重复这个操作。</p><p>同样的，<code>f</code>，<code>t</code>，<code>F</code>，<code>T</code>也是动作命令，也可以结合<code>d</code>来操作。因此</p><ul><li><code>df</code>+特定字符删除当前光标<strong>到下一个查找到的特定字符</strong>。比如<code>dfa</code>（delete find a），会从当前光标删除字符到下一个字符&quot;a&quot;所在位置。</li><li><code>dt</code>+特定字符删除当前光标<strong>直到下一个查找到的特定字符</strong>之前的位置。比如<code>dta</code>（delete till a），会从当前光标删除字符直到下一个字符&quot;a&quot;所在位置之前的位置。</li><li><code>dT</code>和<code>dF</code>的原理跟上面两个指令相同，只是查找方向相反</li></ul><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/findandtill.gif" alt="findandtill" /></p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/deletefind.gif" alt="deletefind" /></p><blockquote><p>使用<code>z</code>键配合其他按键进行窗口调整操作</p></blockquote><p><code>z</code>的作用是<strong>调整窗口页面视角的位置</strong>（scroll，发音类似zcroll）。类似的，<code>z</code>只是一个<strong>操作符</strong>（operator），会根据实际的<strong>动作</strong>(motion)命令来产生效果。<code>z</code>的用法比较特殊，主要是以下几个</p><ul><li><code>zz</code>调整窗口页面视角使当前行在<strong>居中位置</strong>。（<font color= red >重复两次操作符代表对当前行操作</font>）</li><li><code>zt</code>调整窗口页面视角使当前行在<strong>最顶层</strong>（scroll top）。</li><li><code>zb</code>调整窗口页面视角使当前行在<strong>最底层</strong>（scroll bottom）。</li></ul><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/z-button.gif" alt="z-button" /></p><blockquote><p>使用<code>%</code>键在括号间匹配跳转</p></blockquote><p><code>%</code>的作用是括号<strong>匹配跳转</strong>（match）。<code>%</code>主要用于在编程中方便地在<strong>匹配</strong>的括号（包括<code>&#123;&#125;</code>，<code>()</code>）或是<strong>成对</strong>的标签之间跳转。比如在字符<code>&#123;</code>处按<code>%</code>，则会跳转到<strong>与之对应</strong>的<code>&#125;</code>处。</p><p>在不同的编程语言中，匹配的方式是不同的。在vim中可以通过配置文件自行添加标签匹配，比如在<code>verilog</code>中，<code>begin</code>和<code>end</code>就是一对匹配的标签，添加后即可匹配跳转。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/mathpattern.gif" alt="mathpattern" /></p><blockquote><p>使用<code>g</code>键进行全文跳转</p></blockquote><p><code>g</code>的作用是<strong>全文跳转</strong>（go）。类似的，单独的<code>g</code>只是一个<strong>操作符</strong>（operator），会根据实际的<strong>动作</strong>(motion)命令来产生效果。<code>g</code>的用法同样比较特殊，主要是以下几个</p><ul><li><p><code>gg</code>使光标跳转到<strong>全文的开头</strong>。</p></li><li><p><code>G</code>使光标跳转到<strong>全文的结尾</strong>。</p></li></ul><p>其实<code>G</code>可以配合数字使用跳转到指定行，不过当前这关还没有引入数字。比如<code>5G</code>可以跳转到第5行。</p><p>同样的，<code>g</code>，<code>G</code>也是动作命令，也可以结合<code>d</code>来操作。因此</p><ul><li><p><code>dgg</code>删除当前光标到<strong>全文的开头</strong>的所有字符。（delete gg）</p></li><li><p><code>dG</code>删除当前光标到<strong>全文的结尾</strong>的所有字符。 （delete G）</p></li></ul><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/gotoline.gif" alt="gotoline" /></p><h2 id="font-color-b5d5ff-stylefont-weightboldlevel8nnfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldlevel8nnfont"></a> <font color= #b5d5ff style='font-weight:bold'>Level8(<code>*</code>,<code>#</code>,<code>n</code>,<code>N</code>)</font></h2><blockquote><p>使用<code>*</code>键搜索距离光标最近的词，同时跳转过去（正向）。</p><p>使用<code>#</code>键搜索距离光标最近的词，同时跳转过去（反向）。</p><p>使用<code>n</code>键和<code>N</code>键重复搜索跳转的操作</p></blockquote><p>整词搜索跳转操作包括<code>*</code>和<code>#</code></p><ul><li><code>*</code>的作用是<strong>向后查找</strong>某个特定的<code>词</code>的位置并跳转。</li><li><code>#</code>的操作与<code>*</code>相同，只是方向是<strong>向前查找</strong>。</li></ul><p>在完成一次<code>*</code>或<code>#</code>的整<code>词</code>搜索跳转之后，再使用<code>n</code>（next）可以<strong>重复搜索操作</strong>，而再使用<code>N</code>可以<strong>反向重复查找操作</strong>。比如按<code>*</code>之后，光标会跳转到下一个距离最近<code>词</code>的位置；这时按<code>n</code>则等效重复<code>*</code>的操作，查找到再下一个<code>词</code>的位置；而按<code>N</code>则等效重复<code>#</code>的操作，查找到上一个<code>词</code>的位置。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/serachjump.gif" alt="serachjump" /></p><h2 id="font-color-b5d5ff-stylefont-weightboldlevel9-number-font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldlevel9-number-font"></a> <font color= #b5d5ff style='font-weight:bold'>Level9( number )</font></h2><blockquote><p>数字操作</p></blockquote><p>数字操作是一个强大的重复功能，几乎之前所有的动作命令都可以<strong>通过数字进行重复</strong>，而通过操作符+动作命令的操作同样可以通过数字进行多次重复操作。以之前每个level的一些命令为例</p><ul><li><code>j</code>使光标进行<strong>向下</strong>的移动，而<code>2j</code>则使光标进行<strong>向下</strong>的移动<strong>2次</strong></li><li><code>w</code>使光标跳转到<strong>下个单词</strong>（word）开头，而<code>3w</code>则使光标跳转到<strong>往下第3个单词</strong>（3 word）的开头</li><li><code>x</code>的作用是<strong>删除</strong>（cross）当前光标下的单个字符，而<code>5x</code>则是<strong>删除</strong>（cross）当前光标往后的<strong>5个</strong>字符</li><li><code>r</code>的作用是<strong>替换</strong>（replace），而<code>5r</code>则是<strong>替换</strong>（replace）当前光标往后的<strong>5个</strong>字符为同一个字符</li><li><code>dw</code>删除字符到<strong>下个单词</strong>（delete word）开头，而<code>5dw</code>或<code>d5w</code>则是删除字符到<strong>下5个词</strong>（5 delete word / delete 5 word）开头，简单来说就是删除5个词</li><li><code>dj</code>删除<strong>当前行及其下一行</strong>的所有字符（delete j），而<code>6dj</code>或<code>d6j</code>则是删除<strong>当前行及其下6行</strong>的所有字符（6 delete j/ delete 6 j），简单来说就是加上当前行删7行</li><li><code>dd</code>删除<strong>当前行</strong>所有字符，而<code>6dd</code>或<code>d6d</code>则是删除<strong>当前6行</strong>的所有字符，简单来说就是加上当前行删6行</li><li><code>$</code>使光标<strong>跳转到行尾</strong>，而<code>7$</code>则是使光标<strong>跳转到往下第7个行尾</strong></li><li><code>fa</code>（find a）在<strong>查找到下一个字符“a”的位置</strong>后光标会跳转到其位置，而<code>3fa</code>或<code>f3a</code>会<strong>查找到往后第3个字符“a”</strong>（3 find a / find 3 a）并跳转到其位置</li><li><code>dtb</code>（delete till b）会从当前光标删除字符直到下一个字符&quot;b&quot;所在位置之前的位置，而<code>d2tb</code>（delete 2 till b）会从当前光标删除字符直到**下2个字符&quot;b&quot;**所在位置之前的位置。</li><li><code>5G</code>可以<strong>跳转到第5行</strong>。</li><li>在完成一次<code>*</code>或<code>#</code>的整<code>词</code>搜索跳转之后，再使用<code>n</code>（next）可以<strong>重复搜索操作</strong>，而如果在这时使用<code>5n</code>，则会<strong>执行5次重复搜索</strong>操作。</li></ul><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/numberoperation.gif" alt="numberoperation" /></p><p><strong><font color= red >加入数字的操作极大的减少了键盘的操作次数，可以通过数字进行大量的重复操作。</font></strong></p><hr /><h2 id="font-color-b5d5ff-stylefont-weightbold小结2-operator-number-motionfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold小结2-operator-number-motionfont"></a> <font color= #b5d5ff style='font-weight:bold'>小结2( operator + number + motion)</font></h2><p><code>vim</code>的基础操作模式可以分为几种。</p><ol><li><p>单字符操作</p><ul><li><code>x</code>删除单个字符</li><li><code>r</code>替代单个字符</li><li><code>~</code>单个字符大小写转换</li></ul></li><li><p>特殊操作</p><ul><li><code>z</code>组合操作窗口调整（<code>zz</code>，<code>zt</code>，<code>zb</code>）</li><li><code>g</code>操作全文跳转（<code>gg</code>，<code>G</code>）</li><li><code>%</code>匹配跳转</li></ul></li><li><p>跳转动作（动作命令）：</p><ul><li><code>h</code>，<code>j</code>，<code>k</code>，<code>l</code>，跳转单个字符</li><li><code>w</code>，<code>b</code>，<code>e</code>，跳转单个词（<code>W</code>，<code>B</code>，<code>E</code>类似）</li><li><code>$</code>，<code>0</code>，<code>^</code>，跳转行首行末</li><li><code>f</code>，<code>t</code>，查找字符跳转；<code>;</code>，<code>,</code>，重复查找</li><li><code>gg</code>，<code>G</code>，全文跳转</li><li><code>*</code>，<code>#</code>，搜索词跳转；<code>n</code>，<code>N</code>，重复搜索</li></ul></li><li><p>数字+操作符+动作命令 或 操作符+数字+动作命令</p><ul><li><code>d</code>删除<strong>操作符</strong>，配合<strong>动作命令</strong>（3中的任何动作）以及<strong>数字</strong>完成多次删除</li></ul></li></ol><hr /><h2 id="font-color-b5d5ff-stylefont-weightboldlevel10ppyreg1-9a-zfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldlevel10ppyreg1-9a-zfont"></a> <font color= #b5d5ff style='font-weight:bold'>Level10(<code>p</code>,<code>P</code>,<code>y</code>,<code>:reg</code>,<code>&quot;1-9</code>,<code>&quot;&quot;</code>,<code>&quot;a-z</code>)</font></h2><blockquote><p>使用<code>p</code>键进行粘贴操作</p></blockquote><p>在文本编辑器中被删除的内容一般可以通过撤销来恢复，因此被删除的内容其实是被存在了寄存器（register）中；在<code>vim</code>中也类似，只是可以通过操作访问各个寄存器并实现特定的复制（剪切）及粘贴操作。</p><p>寄存器包括无名寄存器（unnamed，最常用的寄存器），小删除寄存器（small delete），数字寄存器（numbered，1-9），具名寄存器（named，a-z），黑洞寄存器（black hole）等。 这些都不需要记忆，当使用的时候自然就会明白这些寄存器是拿来做什么的。</p><p><code>p</code>的作用是<strong>粘贴</strong>（paste）。粘贴的可以是删除（即剪切，针对<code>d</code>和<code>x</code>）掉的内容，也可以是复制（针对<code>y</code>）的内容，根据最新一次的操作决定。</p><ul><li><code>p</code>的粘贴操作在<strong>当前光标之后</strong>。</li><li><code>P</code>的粘贴操作在<strong>当前光标之前</strong>。</li></ul><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/paste-button.gif" alt="paste-button" /></p><blockquote><p><code>&quot;</code> 指定剪切/复制所使用的寄存器</p><p><code>:reg</code>查看当前寄存器</p><p><code>&quot;1</code>，<code>&quot;2</code>…<code>&quot;9</code>数字寄存器（numbered）</p></blockquote><p><code>&quot;</code>的作用是<strong>指定寄存器</strong>，而<code>:reg</code>的作用是<strong>查看寄存器</strong>。以数字寄存器（numbered）为例</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/number-reg.gif" alt="number-reg" /></p><p>由上面的图可见，在这里通过<code>dd</code>指令删除了4行，而4行内容被依次记录在了数字寄存器1~4中，<strong>越新的内容记录的位置越前</strong>，即1号寄存器记录最新删除的内容。因此，数字寄存器的作用是<strong>记录历史</strong>删除（即剪切，针对<code>d</code>和<code>x</code>）或复制（针对<code>y</code>）的内容。</p><p>假如删除了4行然后想粘贴第1行内容到当前位置怎么办呢？现在已知第1行的内容已经在4号寄存器，因此只要使用<code>&quot;4p</code>（number 4 register paste）就可以了。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/pastefirstline.gif" alt="pastefirstline" /></p><blockquote><p>使用<code>y</code>键配合其他按键进行复制操作</p></blockquote><p><code>y</code>的作用是<strong>复制</strong>（yank）字符/行/段落，类似于<code>d</code>，单独的<code>y</code>只是一个<strong>操作符</strong>（operator），需要根据实际的<strong>动作</strong>(motion)命令来产生效果。因此所有对<code>d</code>有效果的动作命令对<code>y</code>依然有效，只是动作从删除变为了复制。例如</p><ul><li><code>yw</code>复制字符到<strong>下个词</strong>（yank word）开头。</li><li><code>yj</code>复制<strong>当前行及其下一行</strong>的所有字符（yank j）。</li><li><code>yy</code>复制<strong>当前行</strong>所有字符。</li><li><code>yG</code>复制当前光标到<strong>全文的结尾</strong>的所有字符。 （yank G）</li></ul><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/yank.gif" alt="yank" /></p><p>类似的，使用数字重复操作也同样适用于<code>y</code>。同时复制的内容也会存入数字寄存器。同样的，通过<code>p</code>或者<code>P</code>进行复制内容的粘贴操作。</p><ul><li><code>yw</code>复制字符到<strong>下个单词</strong>（yank word）开头，而<code>5yw</code>或<code>y5w</code>则是复制字符到<strong>下5个词</strong>（5 yank word / yank 5 word）开头，简单来说就是复制5个词</li><li><code>yj</code>复制<strong>当前行及其下一行</strong>的所有字符（yank j），而<code>6yj</code>或<code>y6j</code>则是复制<strong>当前行及其下6行</strong>的所有字符（6 yank j/ yank 6 j），简单来说就是加上当前行复制7行</li><li><code>yy</code>复制<strong>当前行</strong>所有字符，而<code>6yy</code>或<code>y6y</code>则是复制<strong>当前6行</strong>的所有字符，简单来说就是加上当前行复制6行</li></ul><p>值得注意的是，类似于<code>D</code>单键等效于<code>d$</code>的功能，<s><code>Y</code>单键等效于<code>y$</code>的功能。因此，可通过<code>Y</code>键进行<strong>从当前光标复制到行尾</strong>的操作，减少操作次数</s><code>Y</code>单键等效于<code>yy</code>的功能。因此，可通过<code>Y</code>键进行复制<strong>当前行</strong>所有字符的操作，减少操作次数。</p><p>简而言之，所有<code>y</code>相关操作均可参考<code>d</code>。</p><blockquote><p><code>&quot;&quot;</code>无名寄存器（unnamed）</p></blockquote><p>最近一次删除（即剪切，针对<code>d</code>和<code>x</code>）或复制（针对<code>y</code>）的内容会保存在无名寄存器（unnamed），按<code>p</code>或<code>P</code>的时候调用的就是无名寄存器存储的值。</p><blockquote><p><code>&quot;a</code>，<code>&quot;b</code>…<code>&quot;z</code>具名寄存器（named）</p></blockquote><p>删除（即剪切，针对<code>d</code>和<code>x</code>）或复制（针对<code>y</code>）的内容可以指定存在<code>&quot;a</code>-<code>&quot;z</code>的具名寄存器中，通过<code>p</code>或<code>P</code>粘贴时也可以指定具名寄存器粘贴。当某个具名寄存器已有内容时，<code>&quot;a</code>-<code>&quot;z</code>会<strong>替换</strong>寄存器内的内容，而<code>&quot;A</code>-<code>&quot;Z</code>则会在对应寄存器后进行<strong>追加</strong>。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/named-reg.gif" alt="named-reg" /></p><p>例如上图的操作中，通过<code>&quot;ayw</code>复制词<code>Through&lt;space&gt;</code><strong>替换</strong>a寄存器（register a yank word），通过<code>&quot;Ayw</code>复制词<code>God!</code><strong>追加</strong>到a寄存器尾部，再次通过<code>&quot;Ayw&quot;</code>复制词<code>all</code>到a寄存器尾部，从而实现了从多个地方复制。在最后通过<code>&quot;ap</code>进行粘贴操作（register a paste）。</p><h2 id="font-color-b5d5ff-stylefont-weightboldlevel11ccsiiaaoofont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldlevel11ccsiiaaoofont"></a> <font color= #b5d5ff style='font-weight:bold'>Level11(<code>c</code>,<code>C</code>,<code>s</code>,<code>i</code>,<code>I</code>,<code>a</code>,<code>A</code>,<code>o</code>,<code>O</code>)</font></h2><blockquote><p>插入模式</p></blockquote><p>之前的操作均是在<strong>普通模式</strong>下进行的，即所有操作是对已经写好的文本进行剪切、复制、粘贴、转换等操作，并不进行新文本的插入。而要进行新文本的插入，则需要进入<strong>插入模式</strong>。使用一些按键（比如<code>i</code>，<code>a</code>，<code>c</code>）进入插入模式，通过<code>&lt;Esc&gt;</code>或者<code>&lt;C-[&gt;</code>回到普通模式。</p><blockquote><p>使用<code>c</code>键配合其他按键进行删除然后进入插入模式的操作</p></blockquote><p><code>c</code>的作用是<strong>改变</strong>（change）字符/行/段落，类似于<code>d</code>，单独的<code>c</code>只是一个<strong>操作符</strong>（operator），需要根据实际的<strong>动作</strong>(motion)命令来产生效果。因此所有对<code>d</code>有效果的动作命令对<code>c</code>依然有效，只是动作从删除变为了改变（即删除然后进入插入模式）。例如</p><ul><li><code>cw</code>删除字符到<strong>下个词</strong>（change word）开头，并进入插入模式。</li><li><code>cj</code>删除<strong>当前行及其下一行</strong>的所有字符（change j）。</li><li><code>cc</code>删除<strong>当前行</strong>所有字符，并进入插入模式。</li><li><code>cG</code>删除当前光标到<strong>全文的结尾</strong>的所有字符，并进入插入模式（change G）。</li></ul><p>同时，类似于<code>d</code>的是，通过<code>c</code>删除的内容也会存储在数字寄存器内。</p><p>值得注意的是，类似于<code>D</code>单键等效于<code>d$</code>的功能，<code>C</code>单键等效于<code>c$</code>的功能。因此，可通过<code>C</code>键进行<strong>从当前光标删除到行尾，并进入插入模式</strong>的操作，减少操作次数。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/change-button.gif" alt="change-button" /></p><blockquote><p>使用<code>s</code>键删除单个字符并进入插入模式</p></blockquote><p>如果说<code>c</code>对应<code>d</code>+<code>进入插入模式</code>的话，<code>s</code>应该就是对应<code>x</code>+<code>进入插入模式</code>了。前者要进入插入模式插入文字，后者依旧保持普通模式，不进行文字插入。因此</p><ul><li><code>dl</code>删除当前光标<strong>右边</strong>的字符，即删除<strong>当前光标</strong>的字符（delete l），等效于<code>x</code>。</li><li><code>cl</code>删除当前光标<strong>右边</strong>的字符并进入插入模式，即改变<strong>当前光标</strong>的字符（change l），等效于<code>s</code>。</li></ul><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/s-button.gif" alt="s-button" /></p><blockquote><p>使用<code>i</code> 键在当前字符前进入插入模式。</p><p>使用<code>a</code> 键在当前字符后进入插入模式。</p></blockquote><p><code>i</code>和<code>a</code>是最常用的进入插入模式插入文本的方法，注意<code>i</code>和<code>a</code>并不是操作符，因此并不能搭配动作指令，它们的指令效果是立刻生效的。</p><p>值得注意的是，类似于<code>D</code>单键等效于<code>d$</code>的功能，<code>A</code>单键等效于<code>$a</code>（注意<code>a</code>不是操作符，因此不能使用<code>a$</code>）的功能。因此，可通过<code>A</code>键进行<strong>从当前光标跳转到行尾，并在行尾后进入插入模式</strong>的操作，减少操作次数。</p><p>类似的，<code>I</code>单键等效于<code>^i</code>（注意<code>i</code>不是操作符，因此不能使用<code>i^</code>）的功能。因此，可通过<code>I</code>键进行<strong>从当前光标跳转到行首（非空格），并在行首前进入插入模式</strong>的操作，减少操作次数。</p><p>简而言之，通过<code>i</code>和<code>a</code>进行当前光标<strong>字符前插入和字符后插入</strong>，通过<code>I</code>和<code>A</code>进行<strong>行首插入和行末插入</strong>。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/ianda.gif" alt="ianda" /></p><blockquote><p>使用<code>o</code> 键新建空白行并进入插入模式。</p></blockquote><p><code>o</code>的作用是<strong>在当前光标下新建空白行并进入插入模式</strong>。<code>O</code>则是在上一行插入。</p><ul><li><code>o</code>的新建一行操作在<strong>当前光标之下</strong>。</li><li><code>O</code>的新建一行操作在<strong>当前光标之上</strong>。</li></ul><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/o-button.gif" alt="o-button" /></p><blockquote><p>数字操作</p></blockquote><p>普通模式的命令进入插入模式时仍可以<strong>通过数字进行重复</strong>。以之前的一些命令为例</p><ul><li><code>cw</code>删除字符到<strong>下个词</strong>（change word）开头，并进入插入模式；而<code>c2w</code>会删除到<strong>下2个词</strong>（change 2 word）开头，并进入插入模式。</li><li><code>a</code> 在当前字符后进入插入模式。 而<code>2a</code>会进入插入模式，并在退回普通模式时插入2次内容。</li><li><code>o</code>的新建一行操作在<strong>当前光标之下</strong>。而<code>3o</code>会进入插入模式，并在退回普通模式时候插入3行内容。</li></ul><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/numberandinsert.gif" alt="numberandinsert" /></p><h2 id="font-color-b5d5ff-stylefont-weightbold小结3-uppercase-font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold小结3-uppercase-font"></a> <font color= #b5d5ff style='font-weight:bold'>小结3( uppercase )</font></h2><p><code>vim</code>的模式有普通模式和插入模式。基础操作模式可以分为几种。</p><ol><li><p>特殊操作</p><ul><li><code>z</code>组合操作窗口调整（<code>zz</code>，<code>zt</code>，<code>zb</code>）</li><li><code>%</code>匹配跳转</li></ul></li><li><p>跳转动作（动作命令）+数字（可不加）：</p><ul><li><code>h</code>，<code>j</code>，<code>k</code>，<code>l</code>，跳转单个字符</li><li><code>w</code>，<code>b</code>，<code>e</code>，跳转单个词（<code>W</code>，<code>B</code>，<code>E</code>类似）</li><li><code>$</code>，<code>0</code>，<code>^</code>，跳转行首行末</li><li><code>f</code>，<code>t</code>，查找字符跳转；<code>;</code>，<code>,</code>，重复查找</li><li><code>gg</code>，<code>G</code>，全文跳转</li><li><code>*</code>，<code>#</code>，搜索词跳转；<code>n</code>，<code>N</code>，重复搜索</li></ul></li><li><p>单字符+数字（可不加）操作</p><ul><li><code>x</code>删除单个字符，<code>r</code>替代单个字符，<code>s</code>删除单个字符并进入插入模式</li><li><code>~</code>单个字符大小写转换</li><li><code>i</code>和<code>a</code>进入插入模式（字符前/后）</li></ul></li><li><p>数字+操作符+动作命令 或 操作符+数字+动作命令</p><ul><li><code>d</code>删除<strong>操作符</strong>，配合<strong>动作命令</strong>（2中的任何动作）以及<strong>数字</strong>完成多次删除</li><li><code>y</code>复制<strong>操作符</strong>，配合<strong>动作命令</strong>（2中的任何动作）以及<strong>数字</strong>完成多次复制</li><li><code>c</code>改变<strong>操作符</strong>，配合<strong>动作命令</strong>（2中的任何动作）以及<strong>数字</strong>完成多次改变（即删除+进入插入模式）</li></ul></li></ol><p>大写按键需要注意的是，有些大写按键等效于<strong>操作符+首尾动作命令</strong>的操作，有些则是<strong>反向操作</strong>：</p><table><thead><tr><th style="text-align:center">小写按键</th><th style="text-align:center">意义</th><th style="text-align:center">大写按键</th><th>意义</th></tr></thead><tbody><tr><td style="text-align:center"><code>w</code> <code>b</code> <code>e</code></td><td style="text-align:center">字跳转</td><td style="text-align:center"><code>W</code> <code>B</code> <code>E</code></td><td>字跳转（带标点、空格）</td></tr><tr><td style="text-align:center"><code>x</code></td><td style="text-align:center">向后删除单字符</td><td style="text-align:center"><code>X</code></td><td>向前删除单字符</td></tr><tr><td style="text-align:center"><code>r</code></td><td style="text-align:center">替换单字符</td><td style="text-align:center"><code>R</code></td><td>替换多个字符</td></tr><tr><td style="text-align:center"><code>f</code> <code>t</code></td><td style="text-align:center">查找跳转</td><td style="text-align:center"><code>F</code> <code>T</code></td><td>反向查找跳转</td></tr><tr><td style="text-align:center"><code>p</code></td><td style="text-align:center">粘贴在光标后</td><td style="text-align:center"><code>P</code></td><td>粘贴在光标前</td></tr><tr><td style="text-align:center"><code>i</code> <code>a</code></td><td style="text-align:center">进入插入模式</td><td style="text-align:center"><code>I</code> <code>A</code></td><td>行首/行尾进入插入模式</td></tr><tr><td style="text-align:center"><code>o</code></td><td style="text-align:center">下方新建行</td><td style="text-align:center"><code>O</code></td><td>上方新建行</td></tr><tr><td style="text-align:center"><code>d</code></td><td style="text-align:center">删除操作符</td><td style="text-align:center"><code>D</code></td><td>等效<code>d$</code>，删除到行尾</td></tr><tr><td style="text-align:center"><code>y</code></td><td style="text-align:center">复制操作符</td><td style="text-align:center"><code>Y</code></td><td><s>等效<code>y$</code>，复制到行尾</s> 等效<code>yy</code>，复制当前行</td></tr><tr><td style="text-align:center"><code>c</code></td><td style="text-align:center">改变操作符</td><td style="text-align:center"><code>C</code></td><td>等效<code>c$</code>，改变到行尾</td></tr></tbody></table><p>上表也不需要记忆，在实际使用的时候会自然形成习惯，即用了小写的按键，自然会考虑大写按键的类似操作。</p><h2 id="font-color-b5d5ff-stylefont-weightboldlevel12objectfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldlevel12objectfont"></a> <font color= #b5d5ff style='font-weight:bold'>Level12（<code>(</code>,<code>)</code>,<code>&#123;</code>,<code>&#125;</code>,<code>[</code>,<code>]</code>,<code>object</code>,<code>.</code>）</font></h2><blockquote><p>使用<code>(</code>和<code>)</code>进行句子跳转的操作</p></blockquote><p>句子跳转操作包括<code>(</code>和<code>)</code>。句子按照标点句号<code>.</code>，问号<code>?</code>以及感叹号<code>!</code>作为结尾标识。</p><ul><li><p><code>(</code>的作用是<strong>向前跳转到上一句</strong>(首个非空字符)。</p></li><li><p><code>)</code>的作用是<strong>向后跳转到下一句</strong>(首个非空字符)。</p></li></ul><p>同样的，<code>(</code>，<code>)</code>也是动作命令，也可以结合<code>d</code>、<code>y</code>、<code>c</code>等操作符来操作。同样的，此操作仍可以通过数字进行重复。因此</p><ul><li><code>d3)</code><strong>向后删除3句话</strong>（delete 3 sentence forward）。</li><li><code>y2(</code> <strong>向前复制2句话</strong>（yank 2 sentence backward）。</li></ul><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/sentence.gif" alt="sentence" /></p><blockquote><p>使用<code>&#123;</code>和<code>&#125;</code>进行段落跳转的操作</p></blockquote><p>段落跳转操作包括<code>&#123;</code>和<code>&#125;</code>。段落按照空行作为分隔标识。</p><ul><li><code>&#123;</code>的作用是<strong>向前跳转到上一段落</strong>。</li><li><code>&#125;</code>的作用是<strong>向后跳转到下一段落</strong>。</li></ul><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/paragraph.gif" alt="paragraph" /></p><p><code>&#123;</code>，<code>&#125;</code>也是动作命令，也可以结合<code>d</code>、<code>y</code>、<code>c</code>等操作符来操作。同样的，此操作仍可以通过数字进行重复。与前述按句子操作类似，在此不赘述。</p><blockquote><p>使用<code>[]</code>配合其他括号，包括<code>[&#123;</code>,<code>&#125;]</code>，<code>[(</code>，<code>)]</code>，<code>[[</code>，<code>]]</code>，进行查找未闭合括号跳转的操作</p></blockquote><p>每一对括号在代码中应该是匹配的，通过<code>[]</code>搜索未闭合括号的的操作可以方便查询代码结构。</p><ul><li><p><code>[</code>的作用是<strong>向前匹配到上一个未闭合括号（括号为<code>&#123;</code>，<code>(</code>，<code>[</code>）</strong>。</p></li><li><p><code>]</code>的作用是<strong>向后跳转到下一个未闭合括号（括号为<code>&#125;</code>，<code>)</code>，<code>]</code>）</strong>。</p></li></ul><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/closedbracket.gif" alt="closedbracket" /></p><blockquote><p>object对象操作。<code>i</code>，inner object，<code>a</code>，an object 对象，需配合操作符使用</p></blockquote><p>普通的操作符+动作命令的<strong>操作对象</strong>均是由按键决定的，比如<strong>词</strong>（<code>w</code>,<code>b</code>,<code>e</code>），<strong>首尾</strong>（<code>0</code>，<code>^</code>，<code>$</code>），<strong>搜索位置</strong>（<code>f</code>,<code>t</code>）等，但有时实际的操作对象可能要求要<strong>更精确一些</strong>。</p><p>在小结3中总结过通过<strong>操作符</strong>（<code>d</code>，<code>y</code>，<code>c</code>）配合<strong>动作命令和数字</strong>进行批量修改，但有时动作命令可能无法满足操作复杂度的要求。因此<code>vim</code>引入了<strong>对象（object）<strong>的概念。以<code>w</code>为例，<code>w</code>本身是动作命令，会使光标跳转到</strong>下个词</strong>（word）开头。 而配合动作命令则可以得到<code>dw</code>删除字符到<strong>下个词</strong>（delete word）开头。 假设现在的操作光标在词的中间位置，则<code>dw</code>无法进行完整的删除，如下图所示。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/deleteword.gif" alt="deleteword" /></p><p>这时若将整个词（word）作为对象（object）进行处理，采用<code>daw</code>（delete an object word），则可以直接删除掉整个词。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/deleteaword.gif" alt="deleteaword" /></p><blockquote><p>常见的对象（object）包括括号（<code>&#123;&#125;</code>,<code>()</code>,<code>[]</code>），引号（<code>''</code>，<code>&quot;&quot;</code>），word（<code>w</code>），sentence(<code>s</code>)，paragraph（<code>p</code>）等。</p></blockquote><p><code>a</code>和<code>i</code>的区别在于是否<strong>包括对象本身</strong>（边缘）。下面部分演示使用未提及的<strong>可视模式</strong>（Visual Mode）来展示<strong>对象（object）选择</strong>功能。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/iaobject.gif" alt="iaobject" /></p><blockquote><p><code>.</code>重复</p></blockquote><p><code>.</code>的作用是<strong>重复</strong>（repeat）最近一次进行的修改。修改内容可以是删除(<code>d</code>)，也可以是改变(<code>c</code>)，小结3中的<strong>操作符+数字+动作命令</strong>均可通过<code>.</code>进行重复。<code>.</code>操作与配合数字操作不同的是，<code>.</code>的操作效果更直观，且数量控制更精确，通常<code>.</code>操作会配合<code>u</code>（undo）撤销操作一起，即<strong>重复多了就撤销，不需要在意具体的重复次数</strong>。下面演示几个简单功能来说明<code>.</code>操作。</p><ol><li><p>重复删除行，重复粘贴</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/delandpastere.gif" alt="delandpastere" /></p></li><li><p>重复改变词</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/rechangeword.gif" alt="rechangeword" /></p></li><li><p>重复行尾添加分号<code>;</code></p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/addatendofs.gif" alt="addatendofs" /></p></li></ol><h2 id="font-color-b5d5ff-stylefont-weightboldlevel13nullfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldlevel13nullfont"></a> <font color= #b5d5ff style='font-weight:bold'>Level13（null）</font></h2><p>13在国外不吉利，没有这关</p><h2 id="font-color-b5d5ff-stylefont-weightboldlevel14uc-rhlmcountmfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldlevel14uc-rhlmcountmfont"></a> <font color= #b5d5ff style='font-weight:bold'>Level14（<code>u</code>,<code>&lt;C-r&gt;</code>,<code>H</code>,<code>L</code>,<code>M</code>,<code>|</code>,<code>:count</code>,<code>/</code>,<code>?</code>,<code>m</code>,<code>`</code>,<code>'</code>）</font></h2><blockquote><p><code>u</code>撤销</p><p><code>&lt;C-r&gt;</code>取消撤销</p></blockquote><p><code>u</code>的作用是<strong>撤销</strong>（undo）最近一次进行的修改。而<code>&lt;C-r&gt;</code>的作用是<strong>重做</strong>（redo）撤销的操作。类似Windows中的通用命令<code>&lt;C-z&gt;</code>撤销和<code>&lt;C-y&gt;</code>重做。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/undoandredo.gif" alt="undoandredo" /></p><blockquote><p>使用<code>H</code> <code>L</code> <code>M</code>移动光标</p><p>使用<code>:&lt;count&gt;&lt;CR&gt;</code>进行行跳转</p><p>使用<code>&lt;count&gt;|</code>进行列跳转</p></blockquote><p>以上几个命令除了<code>:&lt;count&gt;&lt;CR&gt;</code>平时使用较少，适合于进行某些需要<strong>精确行列号</strong>跳转的场景。</p><p><code>H</code>的作用是在<strong>不滚动屏幕</strong>的状态下，将光标移动至<strong>当前屏幕显示的首行</strong>（High）。</p><p><code>L</code>的作用是在<strong>不滚动屏幕</strong>的状态下，将光标移动至<strong>当前屏幕显示的尾行</strong>（Low）。</p><p><code>M</code>的作用是在<strong>不滚动屏幕</strong>的状态下，将光标移动至<strong>当前屏幕显示的中间行</strong>（Middle）。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/hlmwindow.gif" alt="hlmwindow" /></p><p><code>:&lt;count&gt;&lt;CR&gt;</code>的<code>count</code>输入任意数字可以<strong>跳转到对应行</strong>，其功能类似于<code>&lt;count&gt;G</code>。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/linejump.gif" alt="linejump" /></p><p><code>&lt;count&gt;|</code>的<code>count</code>输入任意数字可以<strong>跳转到对应列</strong>。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/rowjump.gif" alt="rowjump" /></p><blockquote><p>使用<code>/&lt;word&gt;&lt;CR&gt;</code> 键全文搜索名称为<code>&lt;word&gt;</code>的词并跳转至第一个词（正向），同时高亮所有匹配的词。</p><p>使用<code>?&lt;word&gt;&lt;CR&gt;</code> 键全文搜索名称为<code>&lt;word&gt;</code>的词并跳转至第一个词（反向），同时高亮所有匹配的词。</p></blockquote><p><code>/</code>和<code>?</code>的搜索方式与<code>*</code>和<code>#</code>类似，因此依然可以使用<code>n</code>和<code>N</code>重复搜索跳转的操作。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/searchwithword.gif" alt="searchwithword" /></p><blockquote><p>使用<code>m</code>键在指定的位置设置标记。</p><p>使用<code>`</code>跳转到制定的标记位置。</p><p>使用<code>'</code>跳转到指定的标记位置的第一个非空字符。</p></blockquote><p><code>m</code>的作用是标记位置（mark），例如命令 <code>ma</code> (mark a)表示用 <code>a</code> 标记当前的光标位置。可以通过输入<code>:mark&lt;CR&gt;</code>来查看当前的使用的所有mark标记。</p><p>标记包括每个缓冲区的局部标记和全局标记。局部标记可使用<code>a</code>-<code>z</code>的所有小写字母标记，而全局标记可使用<code>A</code>-<code>Z</code>的所有-大写字母标记。简单来说，局部标记可在当前文件前后跳转，全局标记可在文件间跳转。标记完成后可通过<code>`</code>跳转到制定的标记位置，或通过<code>'</code>跳转到指定的标记位置的第一个非空字符。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/markjump.gif" alt="markjump" /></p><h2 id="font-color-b5d5ff-stylefont-weightbold补可视模式演示font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold补可视模式演示font"></a> <font color= #b5d5ff style='font-weight:bold'>补：可视模式演示</font></h2><p>本游戏vim-adventure缺少了一个重要部分，即可视模式(Visual Mode)。</p><blockquote><p><code>v</code> 普通可视模式</p><p><code>V</code>行可视模式</p><p><code>&lt;C-v&gt;</code>(Linux or MAC)或<code>&lt;C-q&gt;</code>（Windows专用）列可视模式</p></blockquote><p>可视模式的操作逻辑类似鼠标点选后修改，不过具体到<code>vim</code>上与其他编辑器略有不同（比如列操作时不会对所有行进行同时显示，只有退出可视模式后才会统一弹出）。这里只演示功能，不进行具体功能介绍，。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/visualmodedemo.gif" alt="visualmodedemo" /></p><h1 id="font-color-b5d5ff-stylefont-weightbold结语font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold结语font"></a> <font color= #b5d5ff style='font-weight:bold'>结语</font></h1><p>本教程仅供入门，关于<code>vim</code>使用相关知识最全面的首推<a href="http://drewneil.com/">Drew Neil</a>的<a href="https://book.douban.com/subject/10599776/">Practical Vim</a>一书，针对普通模式、插入模式、可视模式及命令行模式等多种模式、多种操作方式均有详细的技巧教程。当然因为书本身只针对<code>vim</code>的技术点，因此关于<code>vim</code>配置<code>vimrc</code>的相关知识就相对少一些，不过相信读完全书后每位读者都会有自己的认知和配置要求，就能自己动手开始定制自己的<code>vim</code>了。</p><hr /><p><font color= greden style='font-weight:bold' font size= 24>完结撒花~2020/7/7</font></p>]]></content>
      
      
      <categories>
          
          <category> ic </category>
          
          <category> editor </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vim </tag>
            
            <tag> gvim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客搭建</title>
      <link href="/posts/Hexo-Blog-Construction/"/>
      <url>/posts/Hexo-Blog-Construction/</url>
      
        <content type="html"><![CDATA[<blockquote><p>本文旨在列举博客搭建的所有参考资料来源。</p><p>PS：本人不会网页前端，所有来源均参考各位博客大佬及网络资源。</p></blockquote><h1 id="font-color-b5d5ff-stylefont-weightbold框架font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold框架font"></a> <font color= #b5d5ff style='font-weight:bold'>框架</font></h1><h2 id="font-color-b5d5ff-stylefont-weightbold入门font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold入门font"></a> <font color= #b5d5ff style='font-weight:bold'>入门</font></h2><p>博主之前刚开始接触hexo时用的yilia主题，小歪的教程。</p><blockquote><ul><li><a href="https://zhangslob.github.io/2017/02/28/%E6%95%99%E4%BD%A0%E5%85%8D%E8%B4%B9%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%8CHexo-Github/">教你免费搭建个人博客，Hexo&amp;Github | 小歪的博客</a></li><li><a href="https://hexo.io/zh-cn/docs/">文档 | Hexo</a></li></ul></blockquote><h2 id="font-color-b5d5ff-stylefont-weightbold主题font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold主题font"></a> <font color= #b5d5ff style='font-weight:bold'>主题</font></h2><div class="tabs" id="theme"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#theme-1">butterfly🦋</button></li><li class="tab"><button type="button" data-href="#theme-2"><i class="fas fa-stop-circle"></i>yilia</button></li><li class="tab"><button type="button" data-href="#theme-3"><i class="fab fa-github"></i>replica</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="theme-1"><p>本站使用的主题butterfly，作者JerryC，基于<a href="https://github.com/Molunerfinn/hexo-theme-melody">hexo-theme-melod</a>升级。</p><blockquote><ul><li><a href="https://demo.jerryc.me/">Butterfly - A Simple and Card UI Design theme for Hexo</a></li><li><a href="https://github.com/jerryc127/hexo-theme-butterfl">jerryc127/hexo-theme-butterfly: 🦋 A Hexo Theme: Butterfly</a></li><li><a href="https://jerryc.me/">JerryC - 今日事,今日畢</a></li></ul></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="theme-2"><p>小歪教程使用的主题yilia，作者已停更多年。</p><blockquote><ul><li><a href="https://github.com/litten/hexo-theme-yilia">litten/hexo-theme-yilia: 一个简洁优雅的hexo主题 A simple and elegant theme for hexo</a></li><li><a href="http://litten.me/">Litten的博客</a></li></ul></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="theme-3"><p>GitHub风格的博客主题。</p><blockquote><ul><li><a href="https://github.com/sabrinaluo/hexo-theme-replica">sabrinaluo/hexo-theme-replica: Github style replication for hexo theme</a></li><li><a href="https://sabrinaluo.github.io/tech/">小白妹妹写代码</a></li></ul></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="font-color-b5d5ff-stylefont-weightbold优化font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold优化font"></a> <font color= #b5d5ff style='font-weight:bold'>优化</font></h2><div class="tabs" id="optimization"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#optimization-1">美化</button></li><li class="tab"><button type="button" data-href="#optimization-2">全优化</button></li><li class="tab"><button type="button" data-href="#optimization-3">双部署</button></li><li class="tab"><button type="button" data-href="#optimization-4">SSL</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="optimization-1"><p>首推超逸的博客，详细且很照顾新手，本人也很有意思。</p><blockquote><ul><li><a href="https://yangchaoyi.vip/posts/520520/">【源码开放】Hexo+Github 博客butterfly 和 matery 主题 搭建完全教程【整理】 | 超逸の博客</a></li></ul></blockquote><p>HCLonely大佬的一揽子美化教程也很好，包括访客地图、文章日历、投票系统、加载动画（新版butterfly已自带）、页脚跳动的❤、页脚显示网站运行时间、双评论系统、随机文章跳转、文章统计图等。</p><blockquote><ul><li><a href="https://blog.hclonely.com/posts/57bd67ce/#butterfly%E4%B8%BB%E9%A2%98">Hexo博客美化 | HCLonely Blog</a></li></ul></blockquote><p>小康的方法主要通过inject css和js进行美化，不用修改模板，很方便。另外可以辅以乐特的文章，自行修改。</p><blockquote><ul><li><a href="https://www.antmoe.com/posts/a811d614/index.html">Hexo博客之butterfly主题优雅魔改系列（持续更新） | 小康博客</a></li><li><a href="https://blog.lete114.top/article/eef7397d.html">Butterfly(蝴蝶)主题美化、优化、无修改源码 (持续更新中…) | Lete乐特 's Blog</a></li></ul></blockquote><p>其他优化参考：</p><blockquote><ul><li><a href="https://blog.imzjw.cn/posts/b74f504f/">关于我 Butterfly 主题的所有美化 | 小嘉的部落格</a></li><li><a href="https://lovelijunyi.gitee.io/posts/c898.html">小弋の生活馆全样式预览 | 小弋の生活馆</a></li><li><a href="https://ethant.top/articles/hexo541u/#%E6%88%91%E7%9A%84%E8%A1%A8%E6%83%85%E6%95%B0%E6%8D%AE%E5%8C%85">Hexo+Butterfly主题美化 | 唐先森の博客</a></li></ul></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="optimization-2"><p>各种一揽子优化教程，包括图片加载、代码压缩、全站CDN加速、SEO、URL永久链接以及其他一些小技巧，不一一细说，自行查阅。</p><blockquote><ul><li><a href="https://blog.sky03.cn/posts/42790.html#toc-heading-15">Hexo进阶之各种优化 | Sky03’s Blog</a></li><li><a href="https://yafine-blog.cn/posts/ee35.html#CDN%E5%8A%A0%E9%80%9F">使用Jsdelivr/CDN加速博客访问速度 | 过客~励む</a></li></ul></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="optimization-3"><p>GitHub+Coding双线部署。主要是注意域名解析出问题的时候证书生成会有问题，暂停解析一下就好。（最新已改为部署至Vercel）</p><blockquote><ul><li><a href="https://snow.js.org/hexo-vercel/">Hexo：将你的博客部署到 Vercel | Serok’s Blog</a></li><li><a href="https://www.cnblogs.com/aoguai/p/11405829.html">2019hexo博客部署到coding该绕的坑-奥怪的小栈 - 奥怪 - 博客园</a></li><li><a href="https://www.jianshu.com/p/25587e049d54">hexo干货系列：（四）将hexo博客同时托管到github和coding - 简书</a></li><li><a href="https://blog.csdn.net/qq_36759224/article/details/100890801">Coding Pages 申请 SSL 证书错误：urn:acme:error:unauthorized: Invalid response from http://xxxxx/_网络_TRHX’S BLOG-CSDN博客</a></li></ul></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="optimization-4"><p>升级https。</p><blockquote><ul><li><a href="https://blog.csdn.net/qq_37683287/article/details/91559605">为自定义域名的Hexo博客升级到Https网站_网络_qq_37683287的博客-CSDN博客</a></li><li><a href="https://cloud.tencent.com/document/product/400/6813">SSL 证书 腾讯云实现全站 HTTPS 方案 - 产品简介 - 文档中心 - 腾讯云</a></li></ul></blockquote><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="font-color-b5d5ff-stylefont-weightbold功能font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold功能font"></a> <font color= #b5d5ff style='font-weight:bold'>功能</font></h2><p>以下的是一些其他的附加功能，可按需添加。</p><div class="tabs" id="function"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#function-1"><i class="fas fa-wrench"></i>hexo插件</button></li><li class="tab"><button type="button" data-href="#function-2"><i class="fas fa-hammer"></i>小功能</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="function-1"><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>卡通-Live2D</span></div>    <div class="hide-content"><p>向你的Hexo里放上一只萌萌哒二次元看板娘!</p><blockquote><ul><li><a href="https://github.com/EYHN/hexo-helper-live2d">EYHN/hexo-helper-live2d: Add the Sseexxyyy live2d to your hexo!</a></li><li><a href="https://www.jianshu.com/p/c2f7e68e9c33">Hexo博客yilia主题首页添加helper-live2d模型插件 - 简书</a></li></ul></blockquote></div></div><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>统计-hexo-chart</span></div>    <div class="hide-content"><p>懒人大佬将<a href="https://github.com/blinkfox/hexo-theme-matery">matery主题</a>中的<code>文章发布统计图</code>、<code>标签统计图</code>、<code>文章分类统计图</code>做成了插件。</p><blockquote><ul><li><a href="https://github.com/HCLonely/hexo-charts">HCLonely/hexo-charts: Render hexo posts, categories, and tags into charts.</a></li><li><a href="https://demo.hclonely.com/posts/e8bb6eed/">hexo-charts插件Demo | HCLonely Blog [Demo]</a></li></ul></blockquote></div></div><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>音乐-hexo-tag-aplayer</span></div>    <div class="hide-content"><p>主题自带js和css，但仍需安装插件</p><blockquote><ul><li><a href="https://github.com/MoePlayer/hexo-tag-aplayer">MoePlayer/hexo-tag-aplayer: Embed aplayer in Hexo posts/pages</a></li></ul></blockquote></div></div><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>链接-hexo-abbrlink</span></div>    <div class="hide-content"><p>hexo的页面地址转换为永久链接，有效简化地址长度。</p><blockquote><ul><li><a href="https://github.com/rozbo/hexo-abbrlink">rozbo/hexo-abbrlink: create one and only link for every post for hexo</a></li><li><a href="https://www.yansheng.xyz/article/faa5d14.html">hexo+yilia添加URL持久化 | 荷塘月色的博客</a></li></ul></blockquote></div></div><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>加密-hexo-blog-encrypt</span></div>    <div class="hide-content"><p>你可能需要写一些私密的博客，通过密码验证的方式让人不能随意浏览。</p><blockquote><ul><li><a href="https://github.com/MikeCoder/hexo-blog-encrypt/blob/master/ReadMe.zh.md">hexo-blog-encrypt/ReadMe.zh.md at master · MikeCoder/hexo-blog-encrypt</a></li></ul></blockquote></div></div> <div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>备份-hexo-git-backup</span></div>    <div class="hide-content"><p>备份hexo博客源文件，建议private。</p><blockquote><ul><li><a href="https://plushine.cn/54808.html">Hexo 常用插件 | XJHui’s Blog</a></li><li><a href="https://github.com/coneycode/hexo-git-backup">coneycode/hexo-git-backup: you can use it to backup your blog into git.</a></li></ul></blockquote></div></div> <div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>置顶-hexo-generator-index-pin-top</span></div>    <div class="hide-content"><p>文章置顶，主题自带支持，安装插件即可。</p><blockquote><ul><li><a href="https://github.com/netcan/hexo-generator-index-pin-top">netcan/hexo-generator-index-pin-top: Index generator plugin for Hexo. Pin top version</a></li><li><a href="https://demo.jerryc.me/posts/4aa8abbe/#%E6%96%87%E7%AB%A0%E7%BD%AE%E9%A0%82">Butterfly 安裝文檔(三) 主題配置-1 | Butterfly</a></li></ul></blockquote></div></div> <div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>外链-hexo-filter-nofollow</span></div>    <div class="hide-content"><p>自动为 Hexo 博客中的外链添加<code>rel=&quot;external nofollow noreferrer&quot;</code> 的插件,从而<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Link_types">改善你的网站的安全性和 SEO</a>。</p><blockquote><ul><li><a href="https://blog.skk.moe/post/hexo-filter-nofollow-joined-hexo-official-plugin/">hexo-filter-nofollow - Hexo 官方的 nofollow 插件 | Sukka’s Blog</a></li><li><a href="https://github.com/hexojs/hexo-filter-nofollow">hexojs/hexo-filter-nofollow: Add nofollow attribute to all external links automatically.</a></li></ul></blockquote></div></div> <div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>贡献-hexo-githubcalendar</span></div>    <div class="hide-content"><p>自动为 Hexo 博客添加github贡献日历。</p><blockquote><ul><li><a href="https://zfe.space/post/hexo-githubcalendar.html">教程：hexo-githubcalendar 插件 1.0 | 小冰博客 (zfe.space)</a></li><li><a href="https://github.com/Zfour/hexo-github-calendar">Zfour/hexo-github-calendar: 基于hexo的github calendar贡献插件</a></li></ul></blockquote></div></div> <div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>双栏-hexo-butterfly-article-double-row</span></div>    <div class="hide-content"><p>butterfly主题文章双栏布局插件。</p><blockquote><ul><li><a href="https://zfe.space/post/hexo-butterfly-article-double-row.html">教程：butterfly主题文章双栏布局插件 | 小冰博客 (zfe.space)</a></li><li><a href="https://github.com/Zfour/hexo-butterfly-article-double-row">Zfour/hexo-butterfly-article-double-row: Change the layout of the hexo-theme-butterfly article to double columns (github.com)</a></li></ul></blockquote></div></div> <div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>分类-hexo-magnet</span></div>    <div class="hide-content"><p>自动为 Hexo 博客主页添加分类磁贴。</p><blockquote><ul><li><a href="https://zfe.space/post/hexo-magnet.html">教程：hexo-magnet 插件 1.0 | 小冰博客 (zfe.space)</a></li><li><a href="https://github.com/Zfour/hexo-magnet">Zfour/hexo-magnet: 基于hexo的magnet插件 (github.com)</a></li></ul></blockquote></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="function-2"><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>访客地图-Clustrmaps</span></div>    <div class="hide-content"><p>访客地图用于统计访客来源。</p><blockquote><ul><li><a href="https://blog.csdn.net/cungudafa/article/details/105925710?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-5.nonecase&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-5.nonecase">hexo(butterfly)加入clustrmaps访问者地图_定位,html,javascript_cungudafa的博客-CSDN博客</a></li><li><a href="https://clustrmaps.com/">Free Website Counter Showing Visitor Location on Map</a></li></ul></blockquote></div></div><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>评论系统-Valine</span></div>    <div class="hide-content"><p>注意各位大佬的Valine-Admin的模板不一样，配置的环境变量也不同。只能选择一个部署，自行选择。</p><blockquote><ul><li><a href="https://xiabor.com/2019/12/28/valine-admin/#valine%E7%9A%84%E9%82%AE%E4%BB%B6%E6%8F%90%E9%86%92">Valine Admin 邮件回复提醒 | Xuexi’s Blog</a></li><li><a href="https://blog.hclonely.com/posts/409d3090/">Valine添加博主标签及评论微信、QQ通知 | HCLonely Blog</a></li><li><a href="https://www.antmoe.com/posts/2380732b/index.html">Valine评论之Valine-admin配置攻略 | 小康博客</a></li><li><a href="https://www.antmoe.com/posts/284f2e1c/index.html">Valine添加自定义表情 | 小康博客</a></li><li><a href="https://www.antmoe.com/posts/ff6aef7b/index.html">优雅解决LeanCloud流控问题 | 小康博客</a></li><li><a href="https://valine.js.org/">Valine 一款快速、简洁且高效的无后端评论系统。</a></li><li><a href="https://www.leancloud.cn/">LeanCloud</a></li></ul></blockquote></div></div><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>评论系统-Twikoo</span></div>    <div class="hide-content"><p>切换为twikoo主要是国内使用方便，全部都搭建在腾讯云上。另外可以通过企业微信直接推送微信，没有次数限制。</p><blockquote><ul><li><a href="https://twikoo.js.org/">Twikoo 中文文档</a></li><li><a href="https://guole.fun/posts/626/">搭建微信通知API实现Twikoo新消息提醒 | guole’s Blog</a></li><li><a href="https://blog.zhheo.com/p/1e9f35bc.html">微信菌：利用企业微信搭建微信消息提醒API | 张洪Heo</a></li></ul></blockquote></div></div><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>说说-Artitalk</span></div>    <div class="hide-content"><p>说说界面，发布心情、吐槽。</p><blockquote><ul><li><a href="https://artitalk.js.org/doc.html">Artitalk.js</a></li></ul></blockquote></div></div><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>时间线-Timeline</span></div>    <div class="hide-content"><p>发布建站历史的时间轴。</p><blockquote><ul><li><a href="https://codyhouse.co/demo/vertical-timeline/index.html">Responsive Vertical Timeline | CodyHouse</a></li></ul></blockquote></div></div><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>版本徽章-Badges</span></div>    <div class="hide-content"><p>项目版本的徽章标志。已从shields.io换为badgen。</p><blockquote><ul><li><a href="https://lpd-ios.github.io/2017/05/03/GitHub-Badge-Introduction/">GitHub 项目徽章的添加和设置 - LPD-iOS</a></li><li><a href="https://shields.io/">Shields.io: Quality metadata badges for open source projects</a></li><li><a href="https://badgen.net/">Badgen - Fast badge generating service</a></li></ul></blockquote></div></div><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>名言生成-诗词&一言</span></div>    <div class="hide-content"><p>自动生成一句话的API接口，可以在butterfly中配置副标题source为下面的接口，也可以放在网站或文章任意位置。</p><blockquote><ul><li><a href="https://cungudafa.top/post/3af9.html#%E4%B8%80%E3%80%81%E4%BB%8A%E6%97%A5%E8%AF%97%E8%AF%8D">为你的博客引入——今日诗词、每日一言（js插件分享） | cungudafa</a></li><li><a href="https://hitokoto.cn/">Hitokoto - 一言</a></li><li><a href="https://www.jinrishici.com/#">今日诗词 - 一言API - 诗词实时智能推荐 - 今日诗词开放接口 - 今日诗词 API</a></li></ul></blockquote></div></div><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>图床-PicGo+CDN</span></div>    <div class="hide-content"><p>方案很多，用腾讯/阿里云自己搭、白嫖jsDelivr等，自行选择。</p><blockquote><ul><li><a href="https://www.jianshu.com/p/33eeacac3344">github做Markdown图床 - 简书</a></li><li><a href="https://www.shuzhiduo.com/A/QV5ZPwpbzy/">Hexo 博客图片添加至图床—腾讯云COS图床使用。</a></li><li><a href="https://yafine-blog.cn/posts/eb3a.html">使用PicGo+Github搭建免费图床 | 过客~励む</a></li><li><a href="https://cungudafa.top/post/2103.html">Github+PicGo+cdn配置私人图床（丝滑操作撰写md文章） | cungudafa</a></li></ul></blockquote></div></div><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>简历-nimo-markdown-cv</span></div>    <div class="hide-content"><p>使用wodeni的模板生成一个html文件即可。</p><blockquote><ul><li><a href="https://github.com/wodeni/nimo-markdown-cv">wodeni/nimo-markdown-cv: Maintain your CV in Markdown</a></li><li><a href="https://blog.csdn.net/qq_40922859/article/details/100877777">Hexo博客添加自定义HTML页面_javascript_本该如此-CSDN博客</a></li></ul></blockquote></div></div><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>导航-WebstackPage</span></div>    <div class="hide-content"><p>需要后台，使用WordPress、Laravel或者Typecho等均可。</p><blockquote><ul><li><a href="https://github.com/WebStackPage/WebStackPage.github.io">WebStackPage/WebStackPage.github.io: ❤️静态响应式网址导航网站 - webstack.cc</a></li><li><a href="https://www.iowen.cn/wordpress-version-webstack/">WordPress 版 WebStack 导航主题使用说明，更新于20200115 | 一为忆</a></li><li><a href="https://www.shtion.com/6341.html">Windows 系统本地安装 WordPress 博客的方法 - SHTION｜时讯联科</a></li><li><a href="https://github.com/hui-ho/WebStack-Laravel">hui-ho/WebStack-Laravel: 一个开源的网址导航网站项目，您可以拿来制作自己的网址导航。</a></li><li><a href="https://blog.devyi.com/archives/511/">typecho使用WebStack搭建网址导航 - 游轶的小站</a></li></ul></blockquote></div></div><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>设计-Canva&Logosc</span></div>    <div class="hide-content"><p>进行Banner和Logo等图标设计。</p><blockquote><ul><li><a href="https://www.canva.cn/login">Canva在线平面设计软件_免费设计模板素材和海量正版图片 - Canva中文官网</a></li><li><a href="https://www.logosc.cn/">LOGO设计神器！人工智能为您在线设计LOGO，设计名片，打造完整企业VI</a></li></ul></blockquote></div></div><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>手机-Termux</span></div>    <div class="hide-content"><p>使用移动设备进行hexo博客的编写</p><blockquote><ul><li><a href="https://blog.anotia.top/posts/deploy-on-mobile/">如何在移动设备上进行 Hexo 博客编辑和部署 | 艾迪的小栈</a></li></ul></blockquote></div></div><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>加密-PageCrypt</span></div>    <div class="hide-content"><p>HTML的单页面加密。</p><p><a href="https://www.maxlaumeister.com/pagecrypt/">PageCrypt - Password Protect HTML</a></p></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="font-color-b5d5ff-stylefont-weightbold致谢font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold致谢font"></a> <font color= #b5d5ff style='font-weight:bold'>致谢</font></h1><p>搭博客的过程就是参考一个大佬，然后发现另一个大佬的大佬，然后发现更多的大佬。</p><p>首先感谢主题butterfly的原作者<a href="https://jerryc.me/">JerryC</a>，做了一个非常适合新手的hexo主题。</p><p>其余各位大佬的链接均在<a href="/link/">友链</a>界面，在此一并感谢，帮助了本人很多。</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gvim-Verilog-Final</title>
      <link href="/posts/Gvim-Verilog-Final/"/>
      <url>/posts/Gvim-Verilog-Final/</url>
      
        <content type="html"><![CDATA[<div class="tip important"><p>此篇为终篇，介绍所有安装好的定制功能。</p><p></p></div><p>开始之前先看个有趣的。据说各编辑器的学习难度是这样的。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/editorLearningCurve.jpg" alt="editorLearningCurve" /></p><p>本文延续上两篇的内容。</p><p><a href="/posts/Gvim-Verilog-env/">初篇|环境配置</a>（几乎所有参考的插件和脚本在此篇）</p><p><a href="/posts/Gvim-Verilog-HB/">中篇|使用手册</a>（部分功能的使用说明）</p><p>与之前篇的不同？</p><ol><li>将verilog相关的内容从vimrc配置文件全部移动到了automatic.vim文件中</li><li>添加emacs verilog-mode的调用快捷键</li><li>根据自己习惯调整了菜单栏和工具栏的一些结构，重新定义了快捷键方便自己操作（比如<code>header</code>和<code>al</code>改为了<code>;header</code>和<code>;al</code>）</li><li>新增ASCII画部分功能</li></ol><p>下面演示部分<code>Gvim</code>写<code>Verilog</code>功能。</p><div class="tip error"><p>PS：快捷键单独配置，只针对博主自用版的Gvim有效。</p><p></p></div><h1 id="font-color-b5d5ff-stylefont-weightboldwavefont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldwavefont"></a> <font color= #b5d5ff style='font-weight:bold'>Wave</font></h1><blockquote><p>Gvim中添加&amp;调整时序波形</p></blockquote><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/adjustwave.gif" alt="调整波形图" /></p><p>参考<a href="/posts/Gvim-Verilog-HB/">中篇|使用手册</a>。波形的起始位置、时钟间隔空格长度、时钟偏移及上升沿或下降沿触发等均可在脚本中自行配置。</p><blockquote><p>快捷键：</p><p><code>&lt;C-F8&gt;</code>翻转波形</p></blockquote><h1 id="font-color-b5d5ff-stylefont-weightboldcodefont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldcodefont"></a> <font color= #b5d5ff style='font-weight:bold'>Code</font></h1><h2 id="font-color-b5d5ff-stylefont-weightboldgeneratefont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldgeneratefont"></a> <font color= #b5d5ff style='font-weight:bold'>Generate</font></h2><blockquote><p>代码段快速生成，包括头部信息，always块，单行多行注释，状态机，当前时间等，可以通过快捷键或者直接点击的方式生成代码。</p></blockquote><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/addcode.gif" alt="addcode" /></p><p>鼠标点击的方式参考<a href="/posts/Gvim-Verilog-HB/">中篇|使用手册</a>。</p><blockquote><p>快捷键：</p><p><code>header</code>和<code>al</code>快捷键已经改为带Leader的<code>;header</code>和<code>;al</code>，主要为了不影响<code>h</code>和<code>a</code>键的操作速度。头部的作者、芯片、网站等信息在<code>_vimrc</code>中配置</p><p>状态机的<code>fsm</code>快捷键暂时删除，现在有更新的自动生成方法</p><p><code>&lt;F2&gt;</code>添加单行注释，<code>&lt;F3&gt;</code>选中区域添加多行注释，<code>&lt;F4&gt;</code>行末添加注释</p><p><code>插入模式</code>下使用<code>&lt;F2&gt;</code>插入当前时间</p></blockquote><h2 id="font-color-b5d5ff-stylefont-weightboldload-templatefont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldload-templatefont"></a> <font color= #b5d5ff style='font-weight:bold'>Load Template</font></h2><blockquote><p>每次在代码里添加新模板太麻烦了，可以直接导入整个写好的.v文件作为模板</p></blockquote><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/load-template.gif" alt="load-template" /></p><blockquote><p>快捷键：</p><p>输入<code>:LoadTemplate</code>后输入数字选择<code>.v</code>文件的模板即可，模板可自行编写</p></blockquote><h2 id="font-color-b5d5ff-stylefont-weightboldnew-font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldnew-font"></a> <font color= #b5d5ff style='font-weight:bold'>New </font></h2><blockquote><p>新建.v文件自动套用模板</p></blockquote><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/autotemplate.gif" alt="autotemplate" /></p><h2 id="font-color-b5d5ff-stylefont-weightboldauto-updatefont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldauto-updatefont"></a> <font color= #b5d5ff style='font-weight:bold'>Auto Update</font></h2><blockquote><p>写入文件时修改时间自动更新</p></blockquote><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/lastmodified.gif" alt="lastmodified" /></p><h2 id="font-color-b5d5ff-stylefont-weightboldmulti-channelfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldmulti-channelfont"></a> <font color= #b5d5ff style='font-weight:bold'>Multi Channel</font></h2><blockquote><p>多通道批量命名</p></blockquote><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/increasing.gif" alt="递增序列" /></p><p>参考<a href="/posts/Gvim-Verilog-HB/">中篇|使用手册</a>，功能源自<code>vim</code>插件<code>VisIncr</code>。</p><blockquote><p>快捷键：</p><p><code>列可视模式</code>选定后输入<code>:I&lt;CR&gt;</code>（递增）或<code>:I -1&lt;CR&gt;</code>（递减）</p></blockquote><h1 id="font-color-b5d5ff-stylefont-weightbolddeclarationfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbolddeclarationfont"></a> <font color= #b5d5ff style='font-weight:bold'>Declaration</font></h1><blockquote><p>进行端口和寄存器等的声明并自动对齐</p></blockquote><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/declarationsig.gif" alt="declarationsig" /></p><p>参考<a href="/posts/Gvim-Verilog-HB/">中篇|使用手册</a>和<a href="/posts/Gvim-Verilog-env/">初篇|环境配置</a>，功能源自快捷键的对齐操作。</p><blockquote><p>快捷键：</p><p><code>;di</code>产生input信号声明，<code>;dow</code>产生output wire 信号声明，<code>;dor</code>产生output reg信号声明（注意声明时不能带位宽，不然会被截位。）</p><p><code>F7</code>对齐输入输出端口的格式；<code>F8</code>对齐reg/wire的格式；通过快捷键<code>F6</code>调整例化模块的端口对齐</p></blockquote><h1 id="font-color-b5d5ff-stylefont-weightboldalignfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldalignfont"></a> <font color= #b5d5ff style='font-weight:bold'>Align</font></h1><blockquote><p>一键自动对齐所有格式（包括输入输出端口、注释位置、always块、assign块等）。</p></blockquote><p>特殊原因，暂缓。</p><h1 id="font-color-b5d5ff-stylefont-weightboldautofont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldautofont"></a> <font color= #b5d5ff style='font-weight:bold'>Auto</font></h1><blockquote><p>automaic.vim插件本身包含的自动化功能包含自动例化(Autoinst)，自动例化端口更新（AutoinstUpdate），自动例化端口顺序更新（AutoinstUpdateOrder），自动例化模块信号对齐(AutoPortReAlign)，自动例化端口添加输入or输出的注释(AutoinstPortDirectionToInst)，自动定义wire和reg(AutoDef)，自动定义端口连接线(AutoArg)</p><p>Emacs的verilog-mode插件的自动化功能包括自动例化(AutoInst)，自动wire(AautoWire)，自动reg(AutoReg)，自动例化参数(AutoParam)</p></blockquote><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/automatic.gif" alt="automatic" /></p><p>只展示自动例化和自动添加参数。</p><p>有关automatic.vim参考<a href="http://bbs.eetop.cn/thread-335755-1-1.html">vim auto script for verilog &amp; RtlTree - (like Emacs, Verdi) - FPGA/ASIC资料共享 - EETOP 创芯网论坛 -</a>。</p><p>有关Emacs的verilog-mode 参考<a href="http://exasic.com/article/index.php?md=linux-09">ExASIC: RTL顶层自动连线的秘武器：Emacs verilog-mode介绍</a>以及<a href="https://www.bilibili.com/video/BV18z411z7TL">如何高效的编写Verilog—终极版 Gvim自动化插件分享_哔哩哔哩 (゜-゜)つロ 干杯~-bilibili</a></p><blockquote><p>快捷键：</p><p>自动例化：插入<code>/*autoinst*/</code>后使用<code>&lt;S-F3&gt;</code></p><p>自动生成所有wire/reg：插入<code>/*autodef*/</code>后使用<code>&lt;S-F2&gt;</code></p><p>自动例化parameter：插入<code>/*autoinstparam*/</code>后使用<code>:EmacsAuto&lt;CR&gt;</code>调用Emacs的<code>verilog-mode</code>即可</p><p>其余不常用，自行菜单栏调用</p></blockquote><h1 id="font-color-b5d5ff-stylefont-weightboldjumpfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldjumpfont"></a> <font color= #b5d5ff style='font-weight:bold'>Jump</font></h1><blockquote><p>Rtl树，搜索module/instance，进/出子模块，搜索驱动信号</p></blockquote><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/searchandjump.gif" alt="searchandjump" /></p><p>类似Verdi的跳转功能，Rtl树生成参考<a href="/posts/Gvim-Verilog-HB/">中篇|使用手册</a>，功能仍然参考<a href="http://bbs.eetop.cn/thread-335755-1-1.html">vim auto script for verilog &amp; RtlTree - (like Emacs, Verdi)</a>。</p><h1 id="font-color-b5d5ff-stylefont-weightboldsyntaxfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldsyntaxfont"></a> <font color= #b5d5ff style='font-weight:bold'>Syntax</font></h1><blockquote><p>语法检查，快速跳转错误位置</p></blockquote><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/syntasticcheck.gif" alt="syntasticcheck" /></p><p>参考<a href="/posts/Gvim-Verilog-HB/">中篇|使用手册</a>，功能源自vim插件SyntasticCheck，另需要外置iverilog作为Linter。</p><blockquote><p>快捷键：</p><p><code>:SyntasticCheck&lt;CR&gt;</code></p></blockquote><h1 id="font-color-b5d5ff-stylefont-weightboldasciifont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldasciifont"></a> <font color= #b5d5ff style='font-weight:bold'>Ascii</font></h1><p>（2020/8/16更新）最近发现了ASCII画，稍微研究了一下。主要有表格、图像和字符画这几个。</p><h2 id="font-color-b5d5ff-stylefont-weightboldtablefont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldtablefont"></a> <font color= #b5d5ff style='font-weight:bold'>Table</font></h2><blockquote><p>快速生成ASCII表格，快捷调整表头、表格位置。</p></blockquote><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/tablify.gif" alt="tablify" /></p><p>参考<a href="https://github.com/stormherz/tablify">stormherz/tablify</a>。功能源自<code>vim</code>插件<code>tablify</code>。</p><blockquote><p>快捷键：</p><p><code>可视模式下</code>选中编辑好的文本后<code>\tl</code> or <code>\tt</code>  生成表格（左对齐），<code>\tc</code> 生成表格（居中对齐），<code>\tr</code> 生成表格（右对齐）</p><p><code>\tu</code>还原已转换的表格</p><p><code>\tS</code>已转换的表格按当前列排序（数字或字母顺序）</p><p><code>\tRL</code>重新右对齐当前行，<code>\tRR</code>重新左对齐当前行，<code>\tRC</code>重新居中对齐当前行</p><p><code>\tK</code>当前行上移<code>\tJ</code>当前行下移 <code>\tL</code>当前列左移 <code>\tH</code> 当前列右移</p></blockquote><h2 id="font-color-b5d5ff-stylefont-weightbolddrawitfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbolddrawitfont"></a> <font color= #b5d5ff style='font-weight:bold'>DrawIt</font></h2><blockquote><p>画带箭头的ASCII结构图</p></blockquote><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/darwit.gif" alt="darwit" /></p><p>参考<a href="https://github.com/vim-scripts/DrawIt">vim-scripts/DrawIt</a>以及<a href="https://www.thegeekstuff.com/2009/12/how-to-create-ascii-drawings-in-vim-editor-draw-boxes-lines-ellipses-arrows-inside-text-file/">How To Create ASCII Drawings in Vim Editor</a>。功能源自<code>vim</code>插件<code>DrawIt</code>。</p><blockquote><p><code>\di</code>开启<code>DrawIt</code>，<code>\ds</code>关闭<code>DraIt</code>。开启后直接移动方向键<code>&lt;Up&gt;</code>，<code>&lt;Down&gt;</code>，<code>&lt;Right&gt;</code>，<code>&lt;Left&gt;</code>即可画线</p><p>通过<code>&gt;</code>，<code>&lt;</code>，<code>v</code>，<code>^</code>画箭头，通过<code>\&gt;</code>，<code>\&lt;</code>，<code>\V</code>，<code>\^</code>画大箭头。<code>\b</code>绘制长方形盒，<code>\e</code>绘制椭圆</p><p>其余快捷键过多，见参考链接</p></blockquote><h2 id="font-color-b5d5ff-stylefont-weightboldtext2asciifont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldtext2asciifont"></a> <font color= #b5d5ff style='font-weight:bold'>Text2ASCII</font></h2><p>通过<a href="http://patorjk.com/software/taag/">Text to ASCII Art Generator (TAAG)</a>直接生成即可。</p><p>比如我的名字HonkW：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//    _    _             _  __          __</span><br><span class="line">//   | |  | |           | | \ \        / /</span><br><span class="line">//   | |__| | ___  _ __ | | _\ \  /\  / / </span><br><span class="line">//   |  __  |/ _ \| &#x27;_ \| |/ /\ \/  \/ /  </span><br><span class="line">//   | |  | | (_) | | | |   &lt;  \  /\  /   </span><br><span class="line">//   |_|  |_|\___/|_| |_|_|\_\  \/  \/    </span><br></pre></td></tr></table></figure><h1 id="font-color-b5d5ff-stylefont-weightboldsummaryfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldsummaryfont"></a> <font color= #b5d5ff style='font-weight:bold'>Summary</font></h1><p>Gvim的折腾到此为止，基本整合完之前看到的所有内容。</p><p>如果有推荐或新发现的插件或脚本，会在这篇文章中额外添加。感谢阅读。</p>]]></content>
      
      
      <categories>
          
          <category> ic </category>
          
          <category> editor </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vim </tag>
            
            <tag> verilog </tag>
            
            <tag> gvim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cordic Algorithm</title>
      <link href="/posts/Cordic-Algorithm/"/>
      <url>/posts/Cordic-Algorithm/</url>
      
        <content type="html"><![CDATA[<div class="tip error faa-horizontal animated"><p>公式渲染引擎由Mathjax换为Katex,文章可能存在渲染问题，如有发现问题请留言。</p><p></p></div><h1 id="font-color-b5d5ff-stylefont-weightbold前世今生font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold前世今生font"></a> <font color= #b5d5ff style='font-weight:bold'>前世今生</font></h1><blockquote><p>以下源自参考资料<sup>[6]</sup>：CORDIC技术并不是什么新鲜的东西。事实上它可以追溯到1957年由J.Volder发表的一篇文章。在上个世纪五十年代，在大型实际的计算机中的实行移位相加受到了当时技术上的限制，所以使用CORDIC变得非常必要。到了七十年代，Hewlett Packard和其他公司出产了手持计算器,许多计算器使用一个内部CORDIC单元来计算所有的三角函数(了解这件事的人们一定还记得，那时求一个角度的正切值需要延迟大约1秒中)。二十世纪八十年代，随着高速度乘法器与带有大存储量的通用处理器的出现，CORDIC算法变得无关紧要了。然而在二十一世纪的今天，对于FPGA来说，CORDIC一定是在DSP应用中(诸如多输入多输出（MIMO）,波束形成以及其他自适应系统)计算三角函数的备选技术。</p></blockquote><p>本文将详细介绍<code>CORDIC</code>算法，所有参考资料见文章尾部。</p><h1 id="font-color-b5d5ff-stylefont-weightboldcordic详解font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldcordic详解font"></a> <font color= #b5d5ff style='font-weight:bold'>Cordic详解</font></h1><h2 id="font-color-b5d5ff-stylefont-weightbold圆周坐标系font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold圆周坐标系font"></a> <font color= #b5d5ff style='font-weight:bold'>圆周坐标系</font></h2><h3 id="font-color-b5d5ff-stylefont-weightbold从坐标旋转开始font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold从坐标旋转开始font"></a> <font color= #b5d5ff style='font-weight:bold'>从坐标旋转开始</font></h3><p>如下图，一个直角坐标点<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_1,y_1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>逆时针旋转<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">θ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>角度到点<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_2,y_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，<font color= #green  >如何计算<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_2,y_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>呢？</font></p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cordic1.png" alt="cordic1" /></p><p>公式如下：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mn>2</mn></msub><mo>=</mo><msub><mi>x</mi><mn>1</mn></msub><mi>c</mi><mi>o</mi><mi>s</mi><mi>θ</mi><mo>−</mo><msub><mi>y</mi><mn>1</mn></msub><mi>c</mi><mi>o</mi><mi>s</mi><mi>θ</mi><mspace linebreak="newline"></mspace><msub><mi>y</mi><mn>2</mn></msub><mo>=</mo><msub><mi>x</mi><mn>1</mn></msub><mi>s</mi><mi>i</mi><mi>n</mi><mi>θ</mi><mo>+</mo><msub><mi>y</mi><mn>1</mn></msub><mi>c</mi><mi>o</mi><mi>s</mi><mi>θ</mi></mrow><annotation encoding="application/x-tex">x_2 = x_1cosθ-y_1cosθ   \\y_2 = x_1sinθ+y_1cosθ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span></span></p><p>其实只需要一点高中的知识就能推导这个公式了。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cordic2.png" alt="cordic2" /></p><p>假设底角为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">α</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span>，旋转半径为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>，则</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mn>2</mn></msub><mo>=</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>α</mi><mo>+</mo><mi>θ</mi><mo stretchy="false">)</mo><mo>=</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>α</mi><mo stretchy="false">)</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo><mo>−</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>α</mi><mo stretchy="false">)</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>x</mi><mn>1</mn></msub><mi>c</mi><mi>o</mi><mi>s</mi><mi>θ</mi><mo>−</mo><msub><mi>y</mi><mn>1</mn></msub><mi>c</mi><mi>o</mi><mi>s</mi><mi>θ</mi><mspace linebreak="newline"></mspace><msub><mi>y</mi><mn>2</mn></msub><mo>=</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>α</mi><mo>+</mo><mi>θ</mi><mo stretchy="false">)</mo><mo>=</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>α</mi><mo stretchy="false">)</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo><mo>+</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>α</mi><mo stretchy="false">)</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>x</mi><mn>1</mn></msub><mi>s</mi><mi>i</mi><mi>n</mi><mi>θ</mi><mo>+</mo><msub><mi>y</mi><mn>1</mn></msub><mi>c</mi><mi>o</mi><mi>s</mi><mi>θ</mi></mrow><annotation encoding="application/x-tex">x_2=cos(α+θ) = cos(α)cos(θ) - sin(α)sin(θ) =x_1cosθ-y_1cosθ \\y_2=sin(α+θ) = sin(α)cos(θ) + cos(α)sin(θ) =x_1sinθ+y_1cosθ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mclose">)</span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mclose">)</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mclose">)</span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mclose">)</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span></span></p><p>上面的公式也可以写成矩阵的形式，即</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mn>2</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mn>2</mn></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mi>θ</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>s</mi><mi>i</mi><mi>n</mi><mi>θ</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mi>θ</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mi>θ</mi></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mn>1</mn></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\left[\begin{matrix}   x_2\\   y_2  \end{matrix}\right]=\left[\begin{matrix}   cosθ&amp;-sinθ\\   sinθ&amp;cosθ  \end{matrix}\right]\left[\begin{matrix}   x_1\\   y_1  \end{matrix}\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p><p>以上公式对应逆时针旋转。若是顺时针旋转，则公式应为</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mn>1</mn></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mi>θ</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mi>θ</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>s</mi><mi>i</mi><mi>n</mi><mi>θ</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mi>θ</mi></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mn>2</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mn>2</mn></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\left[\begin{matrix}   x_1\\   y_1  \end{matrix}\right]=\left[\begin{matrix}   cosθ&amp;sinθ\\   -sinθ&amp;cosθ  \end{matrix}\right]\left[\begin{matrix}   x_2\\   y_2  \end{matrix}\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p><p>那么<font color= #green >已知旋转角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">θ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>，如何通过FPGA来计算<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>y</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">y_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>呢？</font>答案就是<b><font color= red>反复迭代</font></b>。</p><h3 id="font-color-b5d5ff-stylefont-weightbold二分角度旋转font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold二分角度旋转font"></a> <font color= #b5d5ff style='font-weight:bold'>二分角度旋转</font></h3><blockquote><p>假设<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mn>100</mn><mo separator="true">,</mo><mn>200</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_1,y_1)=(100,200)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mord">0</span><span class="mord">0</span><span class="mclose">)</span></span></span></span>，要求其极坐标系下的坐标<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>ρ</mi><mo separator="true">,</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(ρ,θ)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">ρ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span></span>。当然，求<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">θ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>的过程也就是求<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi>r</mi><mi>c</mi><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mi>y</mi><mi mathvariant="normal">/</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">arctan(y/x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord">/</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>的过程。首先通过计算器得到结果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>ρ</mi><mo separator="true">,</mo><mi>θ</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mn>223.61</mn><mo separator="true">,</mo><mn>63.435</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(ρ,θ) = (223.61,63.435)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">ρ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord">2</span><span class="mord">3</span><span class="mord">.</span><span class="mord">6</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">6</span><span class="mord">3</span><span class="mord">.</span><span class="mord">4</span><span class="mord">3</span><span class="mord">5</span><span class="mclose">)</span></span></span></span>。下面计算先只关注<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">θ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>的旋转变化，不关注<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">ρ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ρ</span></span></span></span>的长度变化。这时最直观简单的想法就是先旋转一个角度进行一次尝试。</p></blockquote><p>已知角度在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>0</mn><mi mathvariant="normal">°</mi><mo separator="true">,</mo><mn>90</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(0°,90°)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mord">°</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">9</span><span class="mord">0</span><span class="mord">°</span><span class="mclose">)</span></span></span></span>这个范围内，借鉴二分法的思想，先顺时针旋转<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>45</mn><mi mathvariant="normal">°</mi></mrow><annotation encoding="application/x-tex">45°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">5</span><span class="mord">°</span></span></span></span>进行尝试。根据之前推导的公式可知</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>y</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mn>45</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mn>45</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mn>45</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mn>45</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>100</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>200</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>212.13</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>70.711</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\left[\begin{matrix}   x\\   y  \end{matrix}\right]=\left[\begin{matrix}   cos(45°)&amp;sin(45°)\\   -sin(45°)&amp;cos(45°)  \end{matrix}\right]\left[\begin{matrix}   100\\   200  \end{matrix}\right]=\left[  \begin{matrix}   212.13\\   70.711  \end{matrix}\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord">4</span><span class="mord">5</span><span class="mord">°</span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">4</span><span class="mord">5</span><span class="mord">°</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">4</span><span class="mord">5</span><span class="mord">°</span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord">4</span><span class="mord">5</span><span class="mord">°</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">0</span><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">1</span><span class="mord">2</span><span class="mord">.</span><span class="mord">1</span><span class="mord">3</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">7</span><span class="mord">0</span><span class="mord">.</span><span class="mord">7</span><span class="mord">1</span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p><p>发现纵坐标<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">y&gt;0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>，则旋转的角度不够，则在此基础上继续顺时针旋转<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>45</mn><mi mathvariant="normal">/</mi><mn>2</mn><mo>=</mo><mn>22.5</mn><mi mathvariant="normal">°</mi></mrow><annotation encoding="application/x-tex">45/2=22.5°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">4</span><span class="mord">5</span><span class="mord">/</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">.</span><span class="mord">5</span><span class="mord">°</span></span></span></span>，此时角度为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>45</mn><mo>+</mo><mn>22.5</mn><mo>=</mo><mn>67.5</mn><mi mathvariant="normal">°</mi></mrow><annotation encoding="application/x-tex">45+22.5=67.5°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">.</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mord">7</span><span class="mord">.</span><span class="mord">5</span><span class="mord">°</span></span></span></span>。根据推导的公式可知</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>y</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mn>22.5</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mn>22.5</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mn>22.5</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mn>22.5</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>212.13</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>70.711</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>223.04</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>15.85</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\left[\begin{matrix}   x\\   y  \end{matrix}\right]=\left[\begin{matrix}   cos(22.5°)&amp;sin(22.5°)\\   -sin(22.5°)&amp;cos(22.5°)  \end{matrix}\right]\left[\begin{matrix}   212.13\\   70.711  \end{matrix}\right]=\left[  \begin{matrix}   223.04\\   -15.85  \end{matrix}\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord">2</span><span class="mord">2</span><span class="mord">.</span><span class="mord">5</span><span class="mord">°</span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">2</span><span class="mord">2</span><span class="mord">.</span><span class="mord">5</span><span class="mord">°</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">2</span><span class="mord">2</span><span class="mord">.</span><span class="mord">5</span><span class="mord">°</span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord">2</span><span class="mord">2</span><span class="mord">.</span><span class="mord">5</span><span class="mord">°</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">1</span><span class="mord">2</span><span class="mord">.</span><span class="mord">1</span><span class="mord">3</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">7</span><span class="mord">0</span><span class="mord">.</span><span class="mord">7</span><span class="mord">1</span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">2</span><span class="mord">3</span><span class="mord">.</span><span class="mord">0</span><span class="mord">4</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span><span class="mord">5</span><span class="mord">.</span><span class="mord">8</span><span class="mord">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p><p>发现纵坐标<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>&lt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">y&lt;0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>，则旋转角度超过了范围，则在此基础上逆时针回转<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>22.5</mn><mi mathvariant="normal">/</mi><mn>2</mn><mo>=</mo><mn>11.25</mn><mi mathvariant="normal">°</mi></mrow><annotation encoding="application/x-tex">22.5/2=11.25°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">.</span><span class="mord">5</span><span class="mord">/</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mord">5</span><span class="mord">°</span></span></span></span>，此时角度为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>45</mn><mo>+</mo><mn>22.5</mn><mo>−</mo><mn>11.25</mn><mo>=</mo><mn>56.25</mn><mi mathvariant="normal">°</mi></mrow><annotation encoding="application/x-tex">45+22.5-11.25=56.25°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">.</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">6</span><span class="mord">.</span><span class="mord">2</span><span class="mord">5</span><span class="mord">°</span></span></span></span>。根据推导的公式可知</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>y</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mn>11.25</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mn>11.25</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mn>11.25</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mn>11.25</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>223.04</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>15.85</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>221.85</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>27.967</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\left[\begin{matrix}   x\\   y  \end{matrix}\right]=\left[\begin{matrix}   cos(11.25°)&amp;-sin(11.25°)\\   sin(11.25°)&amp;cos(11.25°)  \end{matrix}\right]\left[\begin{matrix}   223.04\\   -15.85  \end{matrix}\right]=\left[  \begin{matrix}   221.85\\   27.967  \end{matrix}\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord">1</span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mord">5</span><span class="mord">°</span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">1</span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mord">5</span><span class="mord">°</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">1</span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mord">5</span><span class="mord">°</span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord">1</span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mord">5</span><span class="mord">°</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">2</span><span class="mord">3</span><span class="mord">.</span><span class="mord">0</span><span class="mord">4</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span><span class="mord">5</span><span class="mord">.</span><span class="mord">8</span><span class="mord">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">2</span><span class="mord">1</span><span class="mord">.</span><span class="mord">8</span><span class="mord">5</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">7</span><span class="mord">.</span><span class="mord">9</span><span class="mord">6</span><span class="mord">7</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p><p>发现纵坐标<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">y&gt;0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>，则旋转的角度又不够，则此基础上继续顺时针旋转<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>11.25</mn><mi mathvariant="normal">/</mi><mn>2</mn><mo>=</mo><mn>5.625</mn><mi mathvariant="normal">°</mi></mrow><annotation encoding="application/x-tex">11.25/2=5.625°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mord">5</span><span class="mord">/</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">.</span><span class="mord">6</span><span class="mord">2</span><span class="mord">5</span><span class="mord">°</span></span></span></span>，此时角度为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>45</mn><mo>+</mo><mn>22.5</mn><mo>−</mo><mn>11.25</mn><mo>+</mo><mn>5.625</mn><mo>=</mo><mn>61.875</mn><mi mathvariant="normal">°</mi></mrow><annotation encoding="application/x-tex">45+22.5-11.25+5.625=61.875°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">.</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">.</span><span class="mord">6</span><span class="mord">2</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mord">1</span><span class="mord">.</span><span class="mord">8</span><span class="mord">7</span><span class="mord">5</span><span class="mord">°</span></span></span></span>。根据推导的公式可知</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>y</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mn>5.625</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mn>5.625</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mn>5.625</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mn>5.625</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>221.85</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>27.967</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>223.52</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6.0874</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\left[\begin{matrix}   x\\   y  \end{matrix}\right]=\left[\begin{matrix}   cos(5.625°)&amp;sin(5.625°)\\   -sin(5.625°)&amp;cos(5.625°)  \end{matrix}\right]\left[\begin{matrix}   221.85\\   27.967  \end{matrix}\right]=\left[  \begin{matrix}   223.52\\   6.0874  \end{matrix}\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord">5</span><span class="mord">.</span><span class="mord">6</span><span class="mord">2</span><span class="mord">5</span><span class="mord">°</span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">5</span><span class="mord">.</span><span class="mord">6</span><span class="mord">2</span><span class="mord">5</span><span class="mord">°</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">5</span><span class="mord">.</span><span class="mord">6</span><span class="mord">2</span><span class="mord">5</span><span class="mord">°</span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord">5</span><span class="mord">.</span><span class="mord">6</span><span class="mord">2</span><span class="mord">5</span><span class="mord">°</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">2</span><span class="mord">1</span><span class="mord">.</span><span class="mord">8</span><span class="mord">5</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">7</span><span class="mord">.</span><span class="mord">9</span><span class="mord">6</span><span class="mord">7</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">2</span><span class="mord">3</span><span class="mord">.</span><span class="mord">5</span><span class="mord">2</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">.</span><span class="mord">0</span><span class="mord">8</span><span class="mord">7</span><span class="mord">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p><p>这时纵坐标已经比较接近<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>了。按照这个模式继续算下去，可以不断逼近真实的结果。比如现在的结果范围为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>ρ</mi><mo separator="true">,</mo><mi>θ</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mn>223.52</mn><mo separator="true">,</mo><mn>61.875</mn><mo>±</mo><mn>5.625</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(ρ,θ)=(223.52,61.875±5.625)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">ρ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord">2</span><span class="mord">3</span><span class="mord">.</span><span class="mord">5</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">6</span><span class="mord">1</span><span class="mord">.</span><span class="mord">8</span><span class="mord">7</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">±</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">5</span><span class="mord">.</span><span class="mord">6</span><span class="mord">2</span><span class="mord">5</span><span class="mclose">)</span></span></span></span>，已经接近实际结果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>ρ</mi><mo separator="true">,</mo><mi>θ</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mn>223.61</mn><mo separator="true">,</mo><mn>63.435</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(ρ,θ)=(223.61,63.435)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">ρ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord">2</span><span class="mord">3</span><span class="mord">.</span><span class="mord">6</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">6</span><span class="mord">3</span><span class="mord">.</span><span class="mord">4</span><span class="mord">3</span><span class="mord">5</span><span class="mclose">)</span></span></span></span>了。旋转过程演示图如下。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/rotate.png" alt="rotate" /></p><p>因此通过多次迭代，可以逐渐逼近结果。但是<font color= #green>如何计算上面的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mn>45</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mn>45</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mn>22.5</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mn>22.5</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mn>11.25</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mn>11.25</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">cos(45),sin(45),cos(22.5),sin(22.5),cos(11.25),sin(11.25)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord">4</span><span class="mord">5</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">4</span><span class="mord">5</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord">2</span><span class="mord">2</span><span class="mord">.</span><span class="mord">5</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">2</span><span class="mord">2</span><span class="mord">.</span><span class="mord">5</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord">1</span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mord">5</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">1</span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mord">5</span><span class="mclose">)</span></span></span></span>等值？</font>其实如果仔细观察，这些点都是固定的，因此他们的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">cos()</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mclose">)</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">sin()</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mclose">)</span></span></span></span>也是固定的，<b><font color= red >所以只需要把要用的点的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">sin()</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mclose">)</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">cos()</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mclose">)</span></span></span></span>提前计算好存起来，用时查表即可。</font></b>Python实现如下。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">ITERATION_TIMES = <span class="number">64</span></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line">d = <span class="number">45</span></span><br><span class="line">cos = [<span class="number">0</span>] * ITERATION_TIMES</span><br><span class="line">sin = [<span class="number">0</span>] * ITERATION_TIMES</span><br><span class="line">degree = [<span class="number">0</span>] * ITERATION_TIMES</span><br><span class="line"></span><br><span class="line">x = <span class="number">100</span></span><br><span class="line">y = <span class="number">200</span></span><br><span class="line">x_n = <span class="number">0</span></span><br><span class="line">y_n = <span class="number">0</span></span><br><span class="line">z = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查找表</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(ITERATION_TIMES):</span><br><span class="line">    cos[i] = np.cos(d*np.pi/<span class="number">180</span>)</span><br><span class="line">    sin[i] = np.sin(d*np.pi/<span class="number">180</span>)</span><br><span class="line">    degree[i]   = d;</span><br><span class="line">    d = d/<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#迭代计算</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(ITERATION_TIMES):</span><br><span class="line">    <span class="keyword">if</span>(y&gt;<span class="number">0</span>):</span><br><span class="line">        x_n = x * cos[i] + y * sin[i]</span><br><span class="line">        y_n = y * cos[i] - x * sin[i]</span><br><span class="line">        z = z + degree[i]</span><br><span class="line">        x = x_n</span><br><span class="line">        y = y_n</span><br><span class="line">        <span class="comment">#print(&quot;rotate_angle=&quot;,degree[i],&quot;y=&quot;,y_n,&quot;z=&quot;,z)</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        x_n = x * cos[i] - y * sin[i]</span><br><span class="line">        y_n = y * cos[i] + x * sin[i]</span><br><span class="line">        z = z - degree[i]</span><br><span class="line">        x = x_n</span><br><span class="line">        y = y_n</span><br><span class="line">        <span class="comment">#print(&quot;rotate_angle=&quot;,degree[i],&quot;y=&quot;,y_n,&quot;z=&quot;,z)</span></span><br><span class="line"><span class="built_in">print</span>(z)</span><br></pre></td></tr></table></figure><p>经过不同迭代次数，得到不同的结果。迭代次数越高，精度自然就越高。</p><table><thead><tr><th style="text-align:center">迭代次数</th><th style="text-align:center">计算角度（实际结果63.43494882292201）</th></tr></thead><tbody><tr><td style="text-align:center">16</td><td style="text-align:center">63.433685302734375</td></tr><tr><td style="text-align:center">32</td><td style="text-align:center">63.43494881177321</td></tr><tr><td style="text-align:center">64</td><td style="text-align:center">63.43494882292201</td></tr></tbody></table><h3 id="font-color-b5d5ff-stylefont-weightbold长度缩放旋转font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold长度缩放旋转font"></a> <font color= #b5d5ff style='font-weight:bold'>长度缩放旋转</font></h3><blockquote><p>二分角度旋转的计算存在一个问题：<b><font color= red >计算量巨大。</font></b>可以发现每一次旋转变换都需要进行4次浮点乘法运算，对于FPGA来说这个运算量过大。改进的方法就是通过变换坐标旋转的公式。</p></blockquote><p>每次的旋转公式可以总结为</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>d</mi><mi>i</mi></msub><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><msub><mi>d</mi><mi>i</mi></msub><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mi>i</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>d</mi><mi>i</mi></msub><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><msub><mi>d</mi><mi>i</mi></msub><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mi>i</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mspace linebreak="newline"></mspace><msub><mi>z</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>z</mi><mi>i</mi></msub><mo>+</mo><msub><mi>θ</mi><mi>i</mi></msub><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>z</mi><mi>i</mi></msub><mo>−</mo><msub><mi>θ</mi><mi>i</mi></msub><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow><mspace linebreak="newline"></mspace><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mtext> </mtext><msub><mi>d</mi><mi>i</mi></msub><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow><mtext> </mtext><mo separator="true">,</mo><msub><mi>θ</mi><mi>i</mi></msub><mo>=</mo><mfrac><mrow><mn>45</mn><mi mathvariant="normal">°</mi></mrow><msup><mn>2</mn><mi>i</mi></msup></mfrac></mrow><annotation encoding="application/x-tex">\left[\begin{matrix}   x_{i+1}\\   y_{i+1}  \end{matrix}\right]=\left[\begin{matrix}   cos(θ_i)&amp;d_isin(θ_i)\\   -d_isin(θ_i)&amp;cos(θ_i)  \end{matrix}\right]\left[\begin{matrix}   x_i\\   y_i  \end{matrix}\right]=cos(θ_i)\left[\begin{matrix}   1&amp;d_itan(θ_i)\\   -d_itan(θ_i)&amp;1  \end{matrix}\right]\left[\begin{matrix}   x_i\\   y_i  \end{matrix}\right]\\z_{i+1} = \begin{cases}z_i + θ_i,  &amp; \text{if $y_i$&gt;0} \\z_i - θ_i, &amp; \text{if $y_i$≤0}\end{cases}\\where\ d_i =\begin{cases}+1,  &amp; \text{if $y_i$&gt;0} \\-1, &amp; \text{if $y_i$≤0}\end{cases}\ ,θ_i=\frac{45°}{2^i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace"> </span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace"> </span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.05744em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.750664em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span><span class="mord">5</span><span class="mord">°</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>这样进行转换后可以<b><font color= red >将<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">cos(θ)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span></span>从矩阵运算中提取出来并省略掉。</font></b><font color= #green>为什么可以将<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">cos(θ)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span></span>省略掉呢？</font> 因为现在的计算只求<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">θ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>的值，即旋转角度变化，不关心<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">ρ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ρ</span></span></span></span>长度的变化，省略掉的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">cos(θ)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span></span>只是在长度上进行了放缩，并不影响其旋转的角度。因此转换公式变为</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>d</mi><mi>i</mi></msub><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><msub><mi>d</mi><mi>i</mi></msub><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mi>i</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mspace linebreak="newline"></mspace><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mtext> </mtext><msub><mi>d</mi><mi>i</mi></msub><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\left[\begin{matrix}   x_{i+1}\\   y_{i+1}  \end{matrix}\right]=\left[\begin{matrix}   1&amp;d_itan(θ_i)\\   -d_itan(θ_i)&amp;1  \end{matrix}\right]\left[\begin{matrix}   x_i\\   y_i  \end{matrix}\right]\\where\ d_i =\begin{cases}+1,  &amp; \text{if $y_i$&gt;0} \\-1, &amp; \text{if $y_i$≤0}\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace"> </span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>这种旋转方式被称为<b><font color= red >伪旋转(Pseudo-Rotation)。</font></b>这样乘法的个数就从每一次旋转变换的4次变为了两次，存查找表的值也只需要<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mn>45</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mn>22.5</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">tan(45),tan(22.5)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">4</span><span class="mord">5</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">2</span><span class="mord">2</span><span class="mord">.</span><span class="mord">5</span><span class="mclose">)</span></span></span></span>…这样的值，减少了一半。过程演示图如下。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/rotate2.png" alt="rotate" /></p><p>由上方过程演示图对比可以看出，旋转向量的长度在增长，但其旋转角度变化保持与之前一致。Python实现如下。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">ITERATION_TIMES = <span class="number">64</span></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line">d = <span class="number">45</span></span><br><span class="line">tan = [<span class="number">0</span>] * ITERATION_TIMES</span><br><span class="line">degree = [<span class="number">0</span>] * ITERATION_TIMES</span><br><span class="line"></span><br><span class="line">x = <span class="number">100</span></span><br><span class="line">y = <span class="number">200</span></span><br><span class="line">x_n = <span class="number">0</span></span><br><span class="line">y_n = <span class="number">0</span></span><br><span class="line">z = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查找表</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(ITERATION_TIMES):</span><br><span class="line">    tan[i] = np.tan(d*np.pi/<span class="number">180</span>)</span><br><span class="line">    degree[i]   = d;</span><br><span class="line">    d = d/<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#迭代计算</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(ITERATION_TIMES):</span><br><span class="line">    <span class="keyword">if</span>(y&gt;<span class="number">0</span>):</span><br><span class="line">        x_n = x + y * tan[i]</span><br><span class="line">        y_n = y - x * tan[i]</span><br><span class="line">        z = z + degree[i]</span><br><span class="line">        x = x_n</span><br><span class="line">        y = y_n</span><br><span class="line">        <span class="comment">#print(&quot;rotate_angle=&quot;,degree[i],&quot;y=&quot;,y_n,&quot;z=&quot;,z)</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        x_n = x  - y * tan[i]</span><br><span class="line">        y_n = y  + x * tan[i]</span><br><span class="line">        z = z - degree[i]</span><br><span class="line">        x = x_n</span><br><span class="line">        y = y_n</span><br><span class="line">        <span class="comment">#print(&quot;rotate_angle=&quot;,degree[i],&quot;y=&quot;,y_n,&quot;z=&quot;,z)</span></span><br><span class="line"><span class="built_in">print</span>(z)</span><br></pre></td></tr></table></figure><p>结果与之前的二分角度旋转一致。</p><h3 id="font-color-b5d5ff-stylefont-weightboldcordic旋转font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldcordic旋转font"></a> <font color= #b5d5ff style='font-weight:bold'>cordic旋转</font></h3><blockquote><p>经过了长度缩放的变换，算法成功将乘法运算减少了一半。<font color= #green>那还能不能继续减少运算量呢？</font>其实依旧可以从之前的长度缩放变换的转换公式入手。</p></blockquote><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>d</mi><mi>i</mi></msub><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><msub><mi>d</mi><mi>i</mi></msub><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mi>i</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mtext> </mtext><msub><mi>d</mi><mi>i</mi></msub><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\left[\begin{matrix}   x_{i+1}\\   y_{i+1}  \end{matrix}\right]=\left[\begin{matrix}   1&amp;d_itan(θ_i)\\   -d_itan(θ_i)&amp;1  \end{matrix}\right]\left[\begin{matrix}   x_i\\   y_i  \end{matrix}\right]where\ d_i=\begin{cases}+1, &amp; \text{if $y_i$&gt;0} \\-1, &amp; \text{if $y_i$≤0}\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace"> </span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>第一次旋转45°时，转换公式为</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mn>45</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mn>45</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mi>i</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mi>i</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\left[\begin{matrix}   x_{i+1}\\   y_{i+1}  \end{matrix}\right]=\left[\begin{matrix}   1&amp;tan(45)\\   -tan(45)&amp;1  \end{matrix}\right]\left[\begin{matrix}   x_i\\   y_i  \end{matrix}\right]=\left[\begin{matrix}   1&amp;1\\   -1&amp;1  \end{matrix}\right]\left[\begin{matrix}   x_i\\   y_i  \end{matrix}\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">4</span><span class="mord">5</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">4</span><span class="mord">5</span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p><p>可见此次转换其实不需要进行乘法运算，可以直接进行加减运算就可以得到结果。然而第二次旋转<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>22.5</mn><mi mathvariant="normal">°</mi></mrow><annotation encoding="application/x-tex">22.5°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">.</span><span class="mord">5</span><span class="mord">°</span></span></span></span>的时候，由于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mn>22.5</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0.4142135623731</mn></mrow><annotation encoding="application/x-tex">tan(22.5°)=0.4142135623731</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">2</span><span class="mord">2</span><span class="mord">.</span><span class="mord">5</span><span class="mord">°</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">4</span><span class="mord">1</span><span class="mord">4</span><span class="mord">2</span><span class="mord">1</span><span class="mord">3</span><span class="mord">5</span><span class="mord">6</span><span class="mord">2</span><span class="mord">3</span><span class="mord">7</span><span class="mord">3</span><span class="mord">1</span></span></span></span>，这是一个<b><font color= red >不整的小数。</font></b>因此需要复杂的乘法运算才能得到结果。</p><p><font color= #green>那有没有办法规避这种复杂乘法？</font>当然是有的。注意一开始的二分法是通过对<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>45</mn><mi mathvariant="normal">°</mi></mrow><annotation encoding="application/x-tex">45°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">5</span><span class="mord">°</span></span></span></span>角进行二分得到了<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>22.5</mn><mi mathvariant="normal">°</mi></mrow><annotation encoding="application/x-tex">22.5°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">.</span><span class="mord">5</span><span class="mord">°</span></span></span></span>，但其实迭代旋转角度可以不选择<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>22.5</mn><mi mathvariant="normal">°</mi></mrow><annotation encoding="application/x-tex">22.5°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">.</span><span class="mord">5</span><span class="mord">°</span></span></span></span>，只要比<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>45</mn><mi mathvariant="normal">°</mi></mrow><annotation encoding="application/x-tex">45°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">5</span><span class="mord">°</span></span></span></span>角小就可以。假设选择<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">tan(θ)=\frac{1}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">θ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>角（<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi><mo>=</mo><mn>26.565051177078</mn><mi mathvariant="normal">°</mi></mrow><annotation encoding="application/x-tex">θ=26.565051177078°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">6</span><span class="mord">.</span><span class="mord">5</span><span class="mord">6</span><span class="mord">5</span><span class="mord">0</span><span class="mord">5</span><span class="mord">1</span><span class="mord">1</span><span class="mord">7</span><span class="mord">7</span><span class="mord">0</span><span class="mord">7</span><span class="mord">8</span><span class="mord">°</span></span></span></span>），则第二次旋转的公式变换为</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mn>26.565051177078</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mn>26.565051177078</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mi>i</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mfrac><mn>1</mn><mn>2</mn></mfrac></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mi>i</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\left[\begin{matrix}   x_{i+1}\\   y_{i+1}  \end{matrix}\right]=\left[\begin{matrix}   1&amp;tan(26.565051177078°)\\   -tan(26.565051177078°)&amp;1  \end{matrix}\right]\left[\begin{matrix}   x_i\\   y_i  \end{matrix}\right]=\left[\begin{matrix}   1&amp;\frac{1}{2}\\   -\frac{1}{2}&amp;1  \end{matrix}\right]\left[\begin{matrix}   x_i\\   y_i  \end{matrix}\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">2</span><span class="mord">6</span><span class="mord">.</span><span class="mord">5</span><span class="mord">6</span><span class="mord">5</span><span class="mord">0</span><span class="mord">5</span><span class="mord">1</span><span class="mord">1</span><span class="mord">7</span><span class="mord">7</span><span class="mord">0</span><span class="mord">7</span><span class="mord">8</span><span class="mord">°</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">2</span><span class="mord">6</span><span class="mord">.</span><span class="mord">5</span><span class="mord">6</span><span class="mord">5</span><span class="mord">0</span><span class="mord">5</span><span class="mord">1</span><span class="mord">1</span><span class="mord">7</span><span class="mord">7</span><span class="mord">0</span><span class="mord">7</span><span class="mord">8</span><span class="mord">°</span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.410216em;vertical-align:-0.9551080000000003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4551079999999998em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.404892em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9551080000000003em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4551079999999998em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.404892em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9551080000000003em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p><p>同样的，每次选择<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo separator="true">,</mo><mfrac><mn>1</mn><mn>4</mn></mfrac></mrow><annotation encoding="application/x-tex">tan(θ)=1,\frac{1}{2},\frac{1}{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>…依次类推，这样计算就<b><font color= red >在定点运算层面简化了。</font></b>因为乘<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>的操作等于将数右移一位，乘<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mn>1</mn><mn>4</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>等于将数右移两位，以此类推。这样，<b><font color= red >复杂的乘法运算转化为了简单的移位和加减运算</font></b>。通项转换公式变换为</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>d</mi><mi>i</mi></msub><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><msub><mi>d</mi><mi>i</mi></msub><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mi>i</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mfrac><msub><mi>d</mi><mi>i</mi></msub><msup><mn>2</mn><mi>i</mi></msup></mfrac></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mfrac><msub><mi>d</mi><mi>i</mi></msub><msup><mn>2</mn><mi>i</mi></msup></mfrac></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mi>i</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mspace linebreak="newline"></mspace><msub><mi>z</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>z</mi><mi>i</mi></msub><mo>+</mo><msub><mi>θ</mi><mi>i</mi></msub><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>z</mi><mi>i</mi></msub><mo>−</mo><msub><mi>θ</mi><mi>i</mi></msub><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow><mspace linebreak="newline"></mspace><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mtext> </mtext><msub><mi>d</mi><mi>i</mi></msub><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow><mtext> </mtext><mo separator="true">,</mo><msub><mi>θ</mi><mi>i</mi></msub><mo>=</mo><mi>a</mi><mi>r</mi><mi>c</mi><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mfrac><mn>1</mn><msup><mn>2</mn><mi>i</mi></msup></mfrac><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\left[\begin{matrix}   x_{i+1}\\   y_{i+1}  \end{matrix}\right]=\left[\begin{matrix}   1&amp;d_itan(θ_i)\\   -d_itan(θ_i)&amp;1  \end{matrix}\right]\left[\begin{matrix}   x_i\\   y_i  \end{matrix}\right]=\left[\begin{matrix}   1&amp;\frac{d_i}{2^i}\\   -\frac{d_i}{2^i}&amp;1  \end{matrix}\right]\left[\begin{matrix}   x_i\\   y_i  \end{matrix}\right]\\z_{i+1} = \begin{cases}z_i + θ_i,  &amp; \text{if $y_i$&gt;0} \\z_i - θ_i, &amp; \text{if $y_i$≤0}\end{cases}\\where\ d_i =\begin{cases}+1,  &amp; \text{if $y_i$&gt;0} \\-1, &amp; \text{if $y_i$≤0}\end{cases}\ ,θ_i=arctan(\frac{1}{2^i})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.512416em;vertical-align:-1.0062080000000002em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5062079999999998em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.353792em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8962079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7570857142857143em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.0062080000000002em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5062079999999998em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8962079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7570857142857143em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.353792em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.0062080000000002em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace"> </span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace"> </span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.750664em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></span></p><p>同样的，<b><font color= red >可以将<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi><mo>=</mo><mi>a</mi><mi>r</mi><mi>c</mi><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mfrac><mn>1</mn><msup><mn>2</mn><mi>i</mi></msup></mfrac><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">θ=arctan(\frac{1}{2^i})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7570857142857143em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span>的值预先计算出来存起来，用时查表就可以。</font></b></p><table><thead><tr><th style="text-align:center">tan(θ)</th><th style="text-align:center">θ</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">45.0°</td></tr><tr><td style="text-align:center">0.5</td><td style="text-align:center">26.56505117707799°</td></tr><tr><td style="text-align:center">0.25</td><td style="text-align:center">14.036243467926477°</td></tr><tr><td style="text-align:center">0.125</td><td style="text-align:center">7.125016348901798°</td></tr><tr><td style="text-align:center">0.0625</td><td style="text-align:center">3.5763343749973515°</td></tr><tr><td style="text-align:center">‭0.03125‬</td><td style="text-align:center">1.7899106082460694°</td></tr><tr><td style="text-align:center">‭0.015625‬</td><td style="text-align:center">0.8951737102110744°</td></tr><tr><td style="text-align:center">…</td><td style="text-align:center">…</td></tr></tbody></table><p>过程演示图如下。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/rotate3.png" alt="rotate" /></p><p>由上方过程演示图对比可以看出，<code>cordic</code>变换向量的长度与长度缩放旋转的变化类似，而其旋转角度发生了根本性变化，使得横纵坐标的变化的<b><font color= red >小数更整。</font></b>Python实现如下。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">ITERATION_TIMES = <span class="number">64</span></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line">d = <span class="number">1</span></span><br><span class="line">degree = [<span class="number">0</span>] * ITERATION_TIMES</span><br><span class="line"></span><br><span class="line">x = <span class="number">100</span></span><br><span class="line">y = <span class="number">200</span></span><br><span class="line">x_n = <span class="number">0</span></span><br><span class="line">y_n = <span class="number">0</span></span><br><span class="line">z = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查找表</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(ITERATION_TIMES):</span><br><span class="line">    degree[i] = math.atan(d)</span><br><span class="line">    d = d/<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#迭代计算</span></span><br><span class="line">d = <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(ITERATION_TIMES):</span><br><span class="line">    <span class="keyword">if</span>(y&gt;<span class="number">0</span>):</span><br><span class="line">        x_n = x + (y &gt;&gt; d)</span><br><span class="line">        y_n = y - (x &gt;&gt; d)</span><br><span class="line">        z = z + degree[i]</span><br><span class="line">        x = x_n</span><br><span class="line">        y = y_n</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        x_n = x  - (y &gt;&gt; d)</span><br><span class="line">        y_n = y  + (x &gt;&gt; d)</span><br><span class="line">        z = z - degree[i]</span><br><span class="line">        x = x_n</span><br><span class="line">        y = y_n</span><br><span class="line">    d = d &gt;&gt; <span class="number">1</span></span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(z*<span class="number">180</span>/np.pi)</span><br></pre></td></tr></table></figure><p>至此基本讲清了<code>cordic</code>算法的本质原理（在圆周坐标下）。接下来<b><font color= red >补充</font></b>一些其他<code>cordic</code>算法的相关内容。</p><h2 id="font-color-b5d5ff-stylefont-weightbold参数-模式与坐标系font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold参数-模式与坐标系font"></a> <font color= #b5d5ff style='font-weight:bold'>参数、模式与坐标系</font></h2><h3 id="font-color-b5d5ff-stylefont-weightbold伸缩因子ksubnsubfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold伸缩因子ksubnsubfont"></a> <font color= #b5d5ff style='font-weight:bold'>伸缩因子K<sub>n</sub></font></h3><p>上一节中只关注了角度<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">θ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>的求解，并没有关注到长度<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">ρ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ρ</span></span></span></span>的求解。实际上，如果考虑长度变化的话，那么<code>cordic</code>旋转公式应还原为（也就是将省略掉的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">cos(θ)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span></span></span></span>补回来）：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>d</mi><mi>i</mi></msub><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><msub><mi>d</mi><mi>i</mi></msub><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mi>i</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>d</mi><mi>i</mi></msub><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><msub><mi>d</mi><mi>i</mi></msub><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mi>i</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mfrac><msub><mi>d</mi><mi>i</mi></msub><msup><mn>2</mn><mi>i</mi></msup></mfrac></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mfrac><msub><mi>d</mi><mi>i</mi></msub><msup><mn>2</mn><mi>i</mi></msup></mfrac></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mi>i</mi></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mspace linebreak="newline"></mspace><msub><mi>z</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>z</mi><mi>i</mi></msub><mo>+</mo><msub><mi>d</mi><mi>i</mi></msub><msub><mi>θ</mi><mi>i</mi></msub><mspace linebreak="newline"></mspace><mspace linebreak="newline"></mspace><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mtext> </mtext><msub><mi>d</mi><mi>i</mi></msub><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow><mo separator="true">,</mo><mtext> </mtext><msub><mi>θ</mi><mi>i</mi></msub><mo>=</mo><mi>a</mi><mi>r</mi><mi>c</mi><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mfrac><mn>1</mn><msup><mn>2</mn><mi>i</mi></msup></mfrac><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\left[\begin{matrix}   x_{i+1}\\   y_{i+1}  \end{matrix}\right]=\left[\begin{matrix}   cos(θ_i)&amp;d_isin(θ_i)\\   -d_isin(θ_i)&amp;cos(θ_i)  \end{matrix}\right]\left[\begin{matrix}   x_i\\   y_i  \end{matrix}\right]=cos(θ_i)\left[\begin{matrix}   1&amp;d_itan(θ_i)\\   -d_itan(θ_i)&amp;1  \end{matrix}\right]\left[\begin{matrix}   x_i\\   y_i  \end{matrix}\right]=cos(θ_i)\left[\begin{matrix}   1&amp;\frac{d_i}{2^i}\\   -\frac{d_i}{2^i}&amp;1  \end{matrix}\right]\left[\begin{matrix}   x_i\\   y_i  \end{matrix}\right]\\z_{i+1} = z_i + d_iθ_i\\\\where\ d_i = \begin{cases}+1,  &amp; \text{if $y_i$&gt;0} \\-1, &amp; \text{if $y_i$≤0}\end{cases},\ θ_i = arctan(\frac{1}{2^i})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">s</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.512416em;vertical-align:-1.0062080000000002em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5062079999999998em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.353792em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8962079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7570857142857143em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.0062080000000002em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5062079999999998em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8962079999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7570857142857143em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.353792em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.0062080000000002em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace"> </span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace"> </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.750664em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></span></p><p>还原为方程组的形式：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>+</mo><msub><mi>d</mi><mi>i</mi></msub><msub><mi>y</mi><mi>i</mi></msub><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>+</mo><msub><mi>d</mi><mi>i</mi></msub><mfrac><msub><mi>y</mi><mi>i</mi></msub><msup><mn>2</mn><mi>i</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><msub><mi>y</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><msub><mi>d</mi><mi>i</mi></msub><msub><mi>x</mi><mi>i</mi></msub><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><msub><mi>d</mi><mi>i</mi></msub><mfrac><msub><mi>x</mi><mi>i</mi></msub><msup><mn>2</mn><mi>i</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><msub><mi>z</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>z</mi><mi>i</mi></msub><mo>+</mo><msub><mi>d</mi><mi>i</mi></msub><msub><mi>θ</mi><mi>i</mi></msub><mspace linebreak="newline"></mspace><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mtext> </mtext><msub><mi>d</mi><mi>i</mi></msub><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow><mo separator="true">,</mo><mtext> </mtext><msub><mi>θ</mi><mi>i</mi></msub><mo>=</mo><mi>a</mi><mi>r</mi><mi>c</mi><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mfrac><mn>1</mn><msup><mn>2</mn><mi>i</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace></mrow><annotation encoding="application/x-tex">x_{i+1} = cos(θ_i)(x_i+d_iy_itan(θ_i)=cos(θ_i)(x_i+d_i\frac{y_i}{2^i})\\y_{i+1} = cos(θ_i)(y_i-d_ix_itan(θ_i)=cos(θ_i)(y_i-d_i\frac{x_i}{2^i})\\z_{i+1} = z_i + d_iθ_i\\where\ d_i = \begin{cases}+1,  &amp; \text{if $y_i$&gt;0} \\-1, &amp; \text{if $y_i$≤0}\end{cases}, \ θ_i = arctan(\frac{1}{2^i})\\</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.7935599999999998em;vertical-align:-0.686em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1075599999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.750664em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.7935599999999998em;vertical-align:-0.686em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1075599999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.750664em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace"> </span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace"> </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.750664em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="mspace newline"></span></span></span></span></p><p>假设进行64次迭代，则结果计算为</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mn>64</mn></msub><mo>=</mo><munderover><mo>∏</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mn>63</mn></munderover><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mi>n</mi></msub><mo>+</mo><mi>d</mi><mfrac><msub><mi>y</mi><mi>n</mi></msub><msup><mn>2</mn><mi>n</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><msub><mi>y</mi><mn>64</mn></msub><mo>=</mo><munderover><mo>∏</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mn>63</mn></munderover><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo>−</mo><mi>d</mi><mfrac><msub><mi>x</mi><mi>n</mi></msub><msup><mn>2</mn><mi>n</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><msub><mi>z</mi><mn>64</mn></msub><mo>=</mo><msub><mi>z</mi><mn>0</mn></msub><mo>+</mo><munderover><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mn>63</mn></munderover><mi>d</mi><msub><mi>θ</mi><mi>n</mi></msub><mspace linebreak="newline"></mspace><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mo>=</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>n</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mo>=</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>n</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow><mo separator="true">,</mo><mtext> </mtext><msub><mi>θ</mi><mi>n</mi></msub><mo>=</mo><mi>a</mi><mi>r</mi><mi>c</mi><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mfrac><mn>1</mn><msup><mn>2</mn><mi>n</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace></mrow><annotation encoding="application/x-tex">x_{64} = \prod_{n=0}^{63}cos(θ_n)(x_n+d\frac{y_n}{2^n})\\y_{64} = \prod_{n=0}^{63}cos(θ_n)(y_n-d\frac{x_n}{2^n})\\z_{64} = z_0 + \sum_{n=0}^{63}dθ_n \\where\begin{cases}d = +1,  &amp; \text{if $y_n$&gt;0} \\d = -1, &amp; \text{if $y_n$≤0}\end{cases},\ θ_n = arctan(\frac{1}{2^n})\\</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">4</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.068226em;vertical-align:-1.267113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011130000000004em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.7935599999999998em;vertical-align:-0.686em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1075599999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">4</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.068226em;vertical-align:-1.267113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011130000000004em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.7935599999999998em;vertical-align:-0.686em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1075599999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">4</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:3.068226em;vertical-align:-1.267113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011130000000004em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace"> </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="mspace newline"></span></span></span></span></p><p>可以发现其实迭代过程的计算分为两部分，一部分是<code>cordic</code>的旋转变换，一部分是<code>cordic</code>的长度伸缩变换。</p><p>cordic长度伸缩变换：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><munderover><mo>∏</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mn>63</mn></munderover><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\prod_{n=0}^{63}cos(θ_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.068226em;vertical-align:-1.267113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011130000000004em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>cordic旋转变换：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><munderover><mo>∏</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mn>63</mn></munderover><mo stretchy="false">(</mo><msub><mi>x</mi><mi>n</mi></msub><mo>+</mo><mi>d</mi><mfrac><msub><mi>y</mi><mi>n</mi></msub><msup><mn>2</mn><mi>n</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><munderover><mo>∏</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mn>63</mn></munderover><mo stretchy="false">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo>−</mo><mi>d</mi><mfrac><msub><mi>x</mi><mi>n</mi></msub><msup><mn>2</mn><mi>n</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mo>=</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>n</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mo>=</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>n</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\prod_{n=0}^{63}(x_n+d\frac{y_n}{2^n})\\\prod_{n=0}^{63}(y_n-d\frac{x_n}{2^n})\\where\begin{cases}d = +1,  &amp; \text{if $y_n$&gt;0} \\d = -1, &amp; \text{if $y_n$≤0}\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.068226em;vertical-align:-1.267113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011130000000004em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.7935599999999998em;vertical-align:-0.686em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1075599999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:3.068226em;vertical-align:-1.267113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011130000000004em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.7935599999999998em;vertical-align:-0.686em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1075599999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>由于在<code>cordic</code>旋转变换中，已知<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>θ</mi><mi>n</mi></msub><mo>=</mo><mi>a</mi><mi>r</mi><mi>c</mi><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mfrac><mn>1</mn><msup><mn>2</mn><mi>n</mi></msup></mfrac><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">θ_n=arctan(\frac{1}{2^n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5935428571428571em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span>，因此长度伸缩变换可以变化为：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><munderover><mo>∏</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mn>63</mn></munderover><mo stretchy="false">(</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>=</mo><munderover><mo>∏</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mn>63</mn></munderover><mo stretchy="false">(</mo><msqrt><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><mi>t</mi><mi>a</mi><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">(</mo><msub><mi>θ</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow></mfrac></msqrt><mo stretchy="false">)</mo><mo>=</mo><munderover><mo>∏</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mn>63</mn></munderover><mo stretchy="false">(</mo><msqrt><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><mo stretchy="false">(</mo><mfrac><mn>1</mn><msup><mn>2</mn><mi>n</mi></msup></mfrac><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></mfrac></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\prod_{n=0}^{63}(cos(θ_n))=\prod_{n=0}^{63}(\sqrt{\frac{1}{1+tan^2(θ_n)}})=\prod_{n=0}^{63}(\sqrt{\frac{1}{1+(\frac{1}{2^n})^2}})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.068226em;vertical-align:-1.267113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011130000000004em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.0937080000000003em;vertical-align:-1.267113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011130000000004em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8265950000000002em;"><span class="svg-align" style="top:-5em;"><span class="pstrut" style="height:5em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.786595em;"><span class="pstrut" style="height:5em;"></span><span class="hide-tail" style="min-width:1.02em;height:3.08em;"><svg width='400em' height='3.08em' viewBox='0 0 400000 3240' preserveAspectRatio='xMinYMin slice'><path d='M473,2793c339.3,-1799.3,509.3,-2700,510,-2702c3.3,-7.3,9.3,-11,18,-11H400000v40H1017.7s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,606zM1001 80H400000v40H1017z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2134049999999998em;"><span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.0865720000000008em;vertical-align:-1.2854590000000004em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011130000000004em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7545409999999997em;"><span class="svg-align" style="top:-5em;"><span class="pstrut" style="height:5em;"></span><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.2648919999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5935428571428571em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.080108em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.7145409999999996em;"><span class="pstrut" style="height:5em;"></span><span class="hide-tail" style="min-width:1.02em;height:3.08em;"><svg width='400em' height='3.08em' viewBox='0 0 400000 3240' preserveAspectRatio='xMinYMin slice'><path d='M473,2793c339.3,-1799.3,509.3,-2700,510,-2702c3.3,-7.3,9.3,-11,18,-11H400000v40H1017.7s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,606zM1001 80H400000v40H1017z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2854590000000004em;"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>当<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>→</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">n\to∞</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">∞</span></span></span></span>，上面的式子是收敛的，当结束变换时，应当<b><font color= red >乘以收敛值的倒数以恢复</font></b>长度变换带来的影响。恢复长度变换影响而乘的这个数就叫做<b><font color= red >伸缩因子<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>K</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">K_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></font></b>，是一个固定常数。</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>K</mi><mi>n</mi></msub><mo>=</mo><munder><mo><mi>lim</mi><mo>⁡</mo></mo><mrow><mi>n</mi><mo>→</mo><mi mathvariant="normal">∞</mi></mrow></munder><mo stretchy="false">(</mo><munderover><mo>∏</mo><mn>0</mn><mi>n</mi></munderover><mo stretchy="false">(</mo><msqrt><mrow><mn>1</mn><mo>+</mo><mo stretchy="false">(</mo><mfrac><mn>1</mn><msup><mn>2</mn><mi>n</mi></msup></mfrac><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></msqrt><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>≈</mo><mn>1.64676</mn><mspace linebreak="newline"></mspace><mfrac><mn>1</mn><msub><mi>K</mi><mi>n</mi></msub></mfrac><mo>≈</mo><mn>0.6073</mn></mrow><annotation encoding="application/x-tex">K_n=\lim_{n\to∞}(\prod_{0}^{n}(\sqrt{1+(\frac{1}{2^n})^2}))≈1.64676 \\\frac{1}{K_n}≈ 0.6073</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.9187079999999996em;vertical-align:-1.267113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-2.1em;margin-left:0em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">→</span><span class="mord mtight">∞</span></span></span></span><span style="top:-2.7em;"><span class="pstrut" style="height:2.7em;"></span><span><span class="mop">lim</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.651595em;"><span class="svg-align" style="top:-4.4em;"><span class="pstrut" style="height:4.4em;"></span><span class="mord" style="padding-left:1em;"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.6115950000000003em;"><span class="pstrut" style="height:4.4em;"></span><span class="hide-tail" style="min-width:1.02em;height:2.48em;"><svg width='400em' height='2.48em' viewBox='0 0 400000 2592' preserveAspectRatio='xMinYMin slice'><path d='M424,2478c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081c4,-6.7,10,-10,18,-10H400000v40H1014.6s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185c-2,6,-10,9,-24,9c-8,0,-12,-0.7,-12,-2z M1001 80H400000v40H1014z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.788405em;"><span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">6</span><span class="mord">4</span><span class="mord">6</span><span class="mord">7</span><span class="mord">6</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:2.1574400000000002em;vertical-align:-0.8360000000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">6</span><span class="mord">0</span><span class="mord">7</span><span class="mord">3</span></span></span></span></span></p><p>通过下表可见伸缩因子随迭代次数的变化</p><table><thead><tr><th style="text-align:center">迭代次数</th><th style="text-align:center">伸缩因子K<sub>n</sub></th></tr></thead><tbody><tr><td style="text-align:center">10</td><td style="text-align:center">1.646759211139822</td></tr><tr><td style="text-align:center">20</td><td style="text-align:center">1.6467602581200669</td></tr><tr><td style="text-align:center">50</td><td style="text-align:center">1.6467602581210652</td></tr><tr><td style="text-align:center">100</td><td style="text-align:center">1.6467602581210652</td></tr></tbody></table><p>可见伸缩因子随着迭代次数增加而变化越来越小，最终收敛。这样可以利用<code>cordic</code>旋转后通过乘以伸缩因子来保证长度变换也是正确的，从而求到长度<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">ρ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">ρ</span></span></span></span>。最终的变换公式如下。</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>K</mi><mi>n</mi></msub><munderover><mo>∏</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msub><mi>x</mi><mi>n</mi></msub><mo>+</mo><mi>d</mi><mfrac><msub><mi>y</mi><mi>n</mi></msub><msup><mn>2</mn><mi>n</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><msub><mi>y</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>K</mi><mi>n</mi></msub><munderover><mo>∏</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo>−</mo><mi>d</mi><mfrac><msub><mi>x</mi><mi>n</mi></msub><msup><mn>2</mn><mi>n</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><msub><mi>z</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>z</mi><mn>0</mn></msub><mo>+</mo><munderover><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><mi>d</mi><msub><mi>θ</mi><mi>n</mi></msub><mspace linebreak="newline"></mspace><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mo>=</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>n</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mo>=</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>n</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow><mo separator="true">,</mo><mtext> </mtext><msub><mi>θ</mi><mi>n</mi></msub><mo>=</mo><mi>a</mi><mi>r</mi><mi>c</mi><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mfrac><mn>1</mn><msup><mn>2</mn><mi>n</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace></mrow><annotation encoding="application/x-tex">x_{n+1} = K_n\prod_{n=0}^{n}(x_n+d\frac{y_n}{2^n})\\y_{n+1} = K_n\prod_{n=0}^{n}(y_n-d\frac{x_n}{2^n})\\z_{n+1} = z_0 + \sum_{n=0}^{n}dθ_n\\where\begin{cases}d = +1,  &amp; \text{if $y_n$&gt;0} \\d = -1, &amp; \text{if $y_n$≤0}\end{cases},\ θ_n = arctan(\frac{1}{2^n})\\</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.9185100000000004em;vertical-align:-1.267113em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.7935599999999998em;vertical-align:-0.686em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1075599999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.9185100000000004em;vertical-align:-1.267113em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.7935599999999998em;vertical-align:-0.686em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1075599999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.9185100000000004em;vertical-align:-1.267113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace"> </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="mspace newline"></span></span></span></span></p><h3 id="font-color-b5d5ff-stylefont-weightbold两种旋转模式font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold两种旋转模式font"></a> <font color= #b5d5ff style='font-weight:bold'>两种旋转模式</font></h3><p>在圆周坐标系下的坐标旋转其实存在两个问题：</p><blockquote><ol><li><p>已知<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">x_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>y</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">y_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，<font color= #green>如何计算旋转角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">θ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>使得<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">y=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>？</font></p></li><li><p>已知旋转角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">θ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">x_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，且<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>y</mi><mn>1</mn></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">y_1=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>，<font color= #green>如何计算<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>y</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">y_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>？</font></p></li></ol></blockquote><p>这是两个<b><font color= red >镜像问题</font></b>，只是从两个方向来考虑。</p><blockquote><ol><li><p>通过不断进行<code>cordic</code>旋转变换逼近<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">y=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>的点（顺时针，逼近<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">y=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>点）</p><p>使结果纵坐标<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>→</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">y\to0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>的<code>cordic</code>旋转变换称为<b><font color= red >向量模式(vector mode)</font></b>。</p></li><li><p>通过不断进行<code>cordic</code>旋转变换逼近旋转角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">θ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>（逆时针，逼近<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">θ=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>的点）</p><p>使结果角度<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi><mo>→</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">θ\to0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>的<code>cordic</code>旋转变换被称为<b><font color= red >旋转模式(rotation mode)</font></b>。</p></li></ol></blockquote><ul><li>圆周坐标的向量模式(vector mode)的公式为（上一节已经推导）</li></ul><ol><li><p>迭代式：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>x</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>x</mi><mi>i</mi></msub><mo>+</mo><msub><mi>d</mi><mi>i</mi></msub><mfrac><msub><mi>y</mi><mi>i</mi></msub><msup><mn>2</mn><mi>i</mi></msup></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>y</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><msub><mi>d</mi><mi>i</mi></msub><mfrac><msub><mi>x</mi><mi>i</mi></msub><msup><mn>2</mn><mi>i</mi></msup></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>z</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>z</mi><mi>i</mi></msub><mo>+</mo><mi>d</mi><msub><mi>θ</mi><mi>i</mi></msub></mrow></mstyle></mtd></mtr></mtable></mrow><mspace linebreak="newline"></mspace><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>d</mi><mi>i</mi></msub><mo>=</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>d</mi><mi>i</mi></msub><mo>=</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow><mo separator="true">,</mo><msub><mi>θ</mi><mi>i</mi></msub><mo>=</mo><mi>a</mi><mi>r</mi><mi>c</mi><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mfrac><mn>1</mn><msup><mn>2</mn><mi>i</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace></mrow><annotation encoding="application/x-tex">\begin{cases}x_{i+1} = x_i+d_i\frac{y_i}{2^i}\\y_{i+1} = y_i-d_i\frac{x_i}{2^i}\\z_{i+1} = z_i + dθ_i\\\end{cases}\\where\begin{cases}d_i = +1,  &amp; \text{if $y_i$&gt;0} \\d_i = -1, &amp; \text{if $y_i$≤0}\end{cases},θ_i = arctan(\frac{1}{2^i})\\</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.32em;vertical-align:-1.9099999999999997em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35002em;"><span style="top:-2.19999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:-2.19999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-3.1500100000000004em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-4.30001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-4.60002em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.8500199999999998em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7475em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7570857142857143em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7114919999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7570857142857143em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-1.5300000000000002em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.9099999999999997em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.750664em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="mspace newline"></span></span></span></span></p></li><li><p>结果式：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>K</mi><mi>n</mi></msub><munderover><mo>∏</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msub><mi>x</mi><mi>n</mi></msub><mo>+</mo><mi>d</mi><mfrac><msub><mi>y</mi><mi>n</mi></msub><msup><mn>2</mn><mi>n</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><msub><mi>y</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>K</mi><mi>n</mi></msub><munderover><mo>∏</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo>−</mo><mi>d</mi><mfrac><msub><mi>x</mi><mi>n</mi></msub><msup><mn>2</mn><mi>n</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><msub><mi>z</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>z</mi><mn>0</mn></msub><mo>+</mo><munderover><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><mi>d</mi><msub><mi>θ</mi><mi>n</mi></msub><mspace linebreak="newline"></mspace><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mo>=</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>n</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mo>=</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>n</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow><mo separator="true">,</mo><mtext> </mtext><msub><mi>θ</mi><mi>n</mi></msub><mo>=</mo><mi>a</mi><mi>r</mi><mi>c</mi><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mfrac><mn>1</mn><msup><mn>2</mn><mi>n</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace></mrow><annotation encoding="application/x-tex">x_{n+1} = K_n\prod_{n=0}^{n}(x_n+d\frac{y_n}{2^n})\\y_{n+1} = K_n\prod_{n=0}^{n}(y_n-d\frac{x_n}{2^n})\\z_{n+1} = z_0 + \sum_{n=0}^{n}dθ_n\\where\begin{cases}d = +1,  &amp; \text{if $y_n$&gt;0} \\d = -1, &amp; \text{if $y_n$≤0}\end{cases},\ θ_n = arctan(\frac{1}{2^n})\\</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.9185100000000004em;vertical-align:-1.267113em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.7935599999999998em;vertical-align:-0.686em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1075599999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.9185100000000004em;vertical-align:-1.267113em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.7935599999999998em;vertical-align:-0.686em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1075599999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.9185100000000004em;vertical-align:-1.267113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace"> </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="mspace newline"></span></span></span></span></p></li></ol><ul><li>圆周坐标下旋转模式(rotation mode)的公式为</li></ul><ol><li><p>迭代式：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>x</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>d</mi><mi>i</mi></msub><mfrac><msub><mi>y</mi><mi>i</mi></msub><msup><mn>2</mn><mi>i</mi></msup></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>y</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>y</mi><mi>i</mi></msub><mo>+</mo><msub><mi>d</mi><mi>i</mi></msub><mfrac><msub><mi>x</mi><mi>i</mi></msub><msup><mn>2</mn><mi>i</mi></msup></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>z</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>z</mi><mi>i</mi></msub><mo>−</mo><msub><mi>d</mi><mi>i</mi></msub><msub><mi>θ</mi><mi>i</mi></msub></mrow></mstyle></mtd></mtr></mtable></mrow><mspace linebreak="newline"></mspace><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>d</mi><mi>i</mi></msub><mo>=</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>z</mi><mi>i</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>d</mi><mi>i</mi></msub><mo>=</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>z</mi><mi>i</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow><mo separator="true">,</mo><msub><mi>θ</mi><mi>i</mi></msub><mo>=</mo><mi>a</mi><mi>r</mi><mi>c</mi><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mfrac><mn>1</mn><msup><mn>2</mn><mi>i</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace></mrow><annotation encoding="application/x-tex">\begin{cases}x_{i+1} = x_i-d_i\frac{y_i}{2^i}\\y_{i+1} = y_i+d_i\frac{x_i}{2^i}\\z_{i+1} = z_i - d_iθ_i\\\end{cases}\\where\begin{cases}d_i = +1,  &amp; \text{if $z_i$&gt;0} \\d_i = -1, &amp; \text{if $z_i$≤0}\end{cases},θ_i = arctan(\frac{1}{2^i})\\</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.32em;vertical-align:-1.9099999999999997em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35002em;"><span style="top:-2.19999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:-2.19999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-3.1500100000000004em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-4.30001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-4.60002em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.8500199999999998em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7475em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7570857142857143em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.446108em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7114919999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7570857142857143em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-1.5300000000000002em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.9099999999999997em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.750664em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="mspace newline"></span></span></span></span></p></li><li><p>结果式：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>K</mi><mi>n</mi></msub><munderover><mo>∏</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msub><mi>x</mi><mi>n</mi></msub><mo>−</mo><mi>d</mi><mfrac><msub><mi>y</mi><mi>n</mi></msub><msup><mn>2</mn><mi>n</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><msub><mi>y</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>K</mi><mi>n</mi></msub><munderover><mo>∏</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msub><mi>y</mi><mi>n</mi></msub><mo>+</mo><mi>d</mi><mfrac><msub><mi>x</mi><mi>n</mi></msub><msup><mn>2</mn><mi>n</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><msub><mi>z</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>z</mi><mn>0</mn></msub><mo>−</mo><munderover><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><mi>d</mi><msub><mi>θ</mi><mi>n</mi></msub><mspace linebreak="newline"></mspace><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mo>=</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>z</mi><mi>n</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mo>=</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>z</mi><mi>n</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow><mo separator="true">,</mo><mtext> </mtext><msub><mi>θ</mi><mi>n</mi></msub><mo>=</mo><mi>a</mi><mi>r</mi><mi>c</mi><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mfrac><mn>1</mn><msup><mn>2</mn><mi>n</mi></msup></mfrac><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace></mrow><annotation encoding="application/x-tex">x_{n+1} = K_n\prod_{n=0}^{n}(x_n-d\frac{y_n}{2^n})\\y_{n+1} = K_n\prod_{n=0}^{n}(y_n+d\frac{x_n}{2^n})\\z_{n+1} = z_0 - \sum_{n=0}^{n}dθ_n\\where\begin{cases}d = +1,  &amp; \text{if $z_n$&gt;0} \\d = -1, &amp; \text{if $z_n$≤0}\end{cases},\ θ_n = arctan(\frac{1}{2^n})\\</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.9185100000000004em;vertical-align:-1.267113em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.7935599999999998em;vertical-align:-0.686em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1075599999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.9185100000000004em;vertical-align:-1.267113em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.7935599999999998em;vertical-align:-0.686em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1075599999999999em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.9185100000000004em;vertical-align:-1.267113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace"> </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span><span class="mspace newline"></span></span></span></span></p></li></ol><h3 id="font-color-b5d5ff-stylefont-weightbold三种坐标系font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold三种坐标系font"></a> <font color= #b5d5ff style='font-weight:bold'>三种坐标系</font></h3><p>上文只讨论了圆周坐标系，实际<code>cordic</code>算法可用于三种坐标系，进行不同的复杂运算。</p><ul><li><b><font color= red >圆周坐标系(circular rotations)</font></b></li><li><b><font color= red >线性坐标系(linear rotations)</font></b></li><li><b><font color= red >双曲线坐标系(hyperbolic rotations)</font></b></li></ul><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cordic3.png" alt="cordic3" /></p><h4 id="font-color-b5d5ff-stylefont-weightbold-圆周坐标系font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold-圆周坐标系font"></a> <font color= #b5d5ff style='font-weight:bold'> 圆周坐标系</font></h4><blockquote><p>之前的所有讨论均基于圆周坐标系。这里不再赘述。</p></blockquote><h4 id="font-color-b5d5ff-stylefont-weightbold-线性坐标系font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold-线性坐标系font"></a> <font color= #b5d5ff style='font-weight:bold'> 线性坐标系</font></h4><blockquote><p>假设<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mn>250</mn><mo separator="true">,</mo><mn>100</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_1,y_1)=(250,100)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord">5</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mclose">)</span></span></span></span>，要求其在线性坐标系下的旋转角<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">θ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>。首先根据观察可知<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mi>a</mi><mi>n</mi><mi>θ</mi><mo>=</mo><mfrac><mn>2</mn><mn>5</mn></mfrac></mrow><annotation encoding="application/x-tex">tanθ=\frac{2}{5}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> 。这时利用<code>cordic</code>旋转算法进行尝试。</p></blockquote><p>类似的，先逆时针&quot;旋转&quot;<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>45</mn><mi mathvariant="normal">°</mi></mrow><annotation encoding="application/x-tex">45°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">5</span><span class="mord">°</span></span></span></span>进行尝试。根据之前推导的公式可知，此时显然<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mn>2</mn></msub><mo>=</mo><msub><mi>x</mi><mn>1</mn></msub><mo>=</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">x_2=x_1=100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>y</mi><mn>2</mn></msub><mo>=</mo><msub><mi>y</mi><mn>1</mn></msub><mo>−</mo><msub><mi>x</mi><mn>1</mn></msub><mi>t</mi><mi>a</mi><mi>n</mi><mn>45</mn><mi mathvariant="normal">°</mi><mo>=</mo><msub><mi>y</mi><mn>1</mn></msub><mo>−</mo><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">y_2=y_1-x_1tan45°=y_1-x_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7777700000000001em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord">4</span><span class="mord">5</span><span class="mord">°</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7777700000000001em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。写成矩阵的形式：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>y</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mn>45</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>250</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>100</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>250</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>100</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>250</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>150</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\left[\begin{matrix}   x\\   y  \end{matrix}\right]=\left[\begin{matrix}   1&amp;0\\   -tan(45°)&amp;1  \end{matrix}\right]\left[\begin{matrix}   250\\   100  \end{matrix}\right]=\left[\begin{matrix}   1&amp;0\\   -1&amp;1  \end{matrix}\right]\left[\begin{matrix}   250\\   100  \end{matrix}\right]=\left[  \begin{matrix}   250\\   -150  \end{matrix}\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">4</span><span class="mord">5</span><span class="mord">°</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">5</span><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">5</span><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">5</span><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span><span class="mord">5</span><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p><p>发现纵坐标<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>&lt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">y&lt;0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>，则旋转角度超过了范围，则在此基础上顺时针&quot;回转&quot;<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">tan(θ)=\frac{1}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">θ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>角（<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi><mo>=</mo><mn>26.565051177078</mn><mi mathvariant="normal">°</mi></mrow><annotation encoding="application/x-tex">θ=26.565051177078°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">6</span><span class="mord">.</span><span class="mord">5</span><span class="mord">6</span><span class="mord">5</span><span class="mord">0</span><span class="mord">5</span><span class="mord">1</span><span class="mord">1</span><span class="mord">7</span><span class="mord">7</span><span class="mord">0</span><span class="mord">7</span><span class="mord">8</span><span class="mord">°</span></span></span></span>）。写成矩阵的形式：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>y</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mn>26.565051177078</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>250</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>150</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mfrac><mn>1</mn><mn>2</mn></mfrac></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>250</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>150</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>250</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>25</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\left[\begin{matrix}   x\\   y  \end{matrix}\right]=\left[\begin{matrix}   1&amp;0\\   tan(26.565051177078°)&amp;1  \end{matrix}\right]\left[\begin{matrix}   250\\   -150  \end{matrix}\right]=\left[\begin{matrix}   1&amp;0\\   \frac{1}{2}&amp;1  \end{matrix}\right]\left[\begin{matrix}   250\\   -150  \end{matrix}\right]=\left[  \begin{matrix}   250\\   -25  \end{matrix}\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">2</span><span class="mord">6</span><span class="mord">.</span><span class="mord">5</span><span class="mord">6</span><span class="mord">5</span><span class="mord">0</span><span class="mord">5</span><span class="mord">1</span><span class="mord">1</span><span class="mord">7</span><span class="mord">7</span><span class="mord">0</span><span class="mord">7</span><span class="mord">8</span><span class="mord">°</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">5</span><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span><span class="mord">5</span><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.4051080000000002em;vertical-align:-0.9525540000000003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.452554em;"><span style="top:-3.612554em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4074459999999998em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9525540000000003em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.452554em;"><span style="top:-3.612554em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4074459999999998em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9525540000000003em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">5</span><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span><span class="mord">5</span><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">5</span><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">2</span><span class="mord">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p><p>发现纵坐标<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>&lt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">y&lt;0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>，则旋转角度依然不够，则在此基础上顺时针&quot;回转&quot;<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mn>4</mn></mfrac></mrow><annotation encoding="application/x-tex">tan(θ)=\frac{1}{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">θ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>角（<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi><mo>=</mo><mn>14.036243467926477</mn><mi mathvariant="normal">°</mi></mrow><annotation encoding="application/x-tex">θ=14.036243467926477°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">4</span><span class="mord">.</span><span class="mord">0</span><span class="mord">3</span><span class="mord">6</span><span class="mord">2</span><span class="mord">4</span><span class="mord">3</span><span class="mord">4</span><span class="mord">6</span><span class="mord">7</span><span class="mord">9</span><span class="mord">2</span><span class="mord">6</span><span class="mord">4</span><span class="mord">7</span><span class="mord">7</span><span class="mord">°</span></span></span></span>）。写成矩阵的形式：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>y</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mn>14.036243467926477</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>250</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>25</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mfrac><mn>1</mn><mn>4</mn></mfrac></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>250</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>25</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>250</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>37.5</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\left[\begin{matrix}   x\\   y  \end{matrix}\right]=\left[\begin{matrix}   1&amp;0\\   tan(14.036243467926477°)&amp;1  \end{matrix}\right]\left[\begin{matrix}   250\\   -25  \end{matrix}\right]=\left[\begin{matrix}   1&amp;0\\   \frac{1}{4}&amp;1  \end{matrix}\right]\left[\begin{matrix}   250\\   -25  \end{matrix}\right]=\left[  \begin{matrix}   250\\   37.5  \end{matrix}\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">1</span><span class="mord">4</span><span class="mord">.</span><span class="mord">0</span><span class="mord">3</span><span class="mord">6</span><span class="mord">2</span><span class="mord">4</span><span class="mord">3</span><span class="mord">4</span><span class="mord">6</span><span class="mord">7</span><span class="mord">9</span><span class="mord">2</span><span class="mord">6</span><span class="mord">4</span><span class="mord">7</span><span class="mord">7</span><span class="mord">°</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">5</span><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">2</span><span class="mord">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.4051080000000002em;vertical-align:-0.9525540000000003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.452554em;"><span style="top:-3.612554em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4074459999999998em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9525540000000003em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.452554em;"><span style="top:-3.612554em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4074459999999998em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9525540000000003em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">5</span><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">2</span><span class="mord">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">5</span><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span><span class="mord">7</span><span class="mord">.</span><span class="mord">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p><p>发现纵坐标<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">y&gt;0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>，则旋转角度超过了范围，则在此基础上继续逆时针&quot;旋转&quot;<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mn>8</mn></mfrac></mrow><annotation encoding="application/x-tex">tan(θ)=\frac{1}{8}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">8</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">θ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span>角（<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi><mo>=</mo><mn>7.125016348901798</mn><mi mathvariant="normal">°</mi></mrow><annotation encoding="application/x-tex">θ=7.125016348901798°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">7</span><span class="mord">.</span><span class="mord">1</span><span class="mord">2</span><span class="mord">5</span><span class="mord">0</span><span class="mord">1</span><span class="mord">6</span><span class="mord">3</span><span class="mord">4</span><span class="mord">8</span><span class="mord">9</span><span class="mord">0</span><span class="mord">1</span><span class="mord">7</span><span class="mord">9</span><span class="mord">8</span><span class="mord">°</span></span></span></span>）。写成矩阵的形式：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>x</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>y</mi></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mn>7.125016348901798</mn><mi mathvariant="normal">°</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>250</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>37.5</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mfrac><mn>1</mn><mn>8</mn></mfrac></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>250</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>37.5</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>250</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6.25</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\left[\begin{matrix}   x\\   y  \end{matrix}\right]=\left[\begin{matrix}   1&amp;0\\   -tan(7.125016348901798°)&amp;1  \end{matrix}\right]\left[\begin{matrix}   250\\   37.5  \end{matrix}\right]=\left[\begin{matrix}   1&amp;0\\   -\frac{1}{8}&amp;1  \end{matrix}\right]\left[\begin{matrix}   250\\   37.5  \end{matrix}\right]=\left[  \begin{matrix}   250\\   6.25  \end{matrix}\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">x</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">7</span><span class="mord">.</span><span class="mord">1</span><span class="mord">2</span><span class="mord">5</span><span class="mord">0</span><span class="mord">1</span><span class="mord">6</span><span class="mord">3</span><span class="mord">4</span><span class="mord">8</span><span class="mord">9</span><span class="mord">0</span><span class="mord">1</span><span class="mord">7</span><span class="mord">9</span><span class="mord">8</span><span class="mord">°</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">5</span><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span><span class="mord">7</span><span class="mord">.</span><span class="mord">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.4051080000000002em;vertical-align:-0.9525540000000003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.452554em;"><span style="top:-3.612554em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4074459999999998em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">8</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9525540000000003em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.452554em;"><span style="top:-3.612554em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4074459999999998em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9525540000000003em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">5</span><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span><span class="mord">7</span><span class="mord">.</span><span class="mord">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord">5</span><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span><span class="mord">.</span><span class="mord">2</span><span class="mord">5</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p><p>这时纵坐标已经比较接近<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>了。类似的，按照这个模式继续算下去，可以不断逼近真实的结果。比如现在的结果范围为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mn>250</mn><mo separator="true">,</mo><mn>6.25</mn><mo>±</mo><mn>15.625</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y)=(250,6.25±15.625)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord">5</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">6</span><span class="mord">.</span><span class="mord">2</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">±</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">5</span><span class="mord">.</span><span class="mord">6</span><span class="mord">2</span><span class="mord">5</span><span class="mclose">)</span></span></span></span>，已经接近实际结果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mn>250</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y)=(250,0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord">5</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span>了。旋转过程演示图如下。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/linear-rotate.png" alt="linear-rotate" /></p><p>线性坐标系的&quot;旋转&quot;其实与圆周坐标系下的旋转含义并不相同了，因为这里的矩阵变化（所谓旋转）其实表现的就是一种迭代映射，其变换逻辑图如下：</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/linear-map.gif" alt="linear-map" /></p><p>注意，上述讨论分析的是使结果纵坐标<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>→</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">y\to0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>的<code>cordic</code>旋转变换，因此是<b><font color= red >向量模式(vector mode)</font></b>。</p><ul><li>线性坐标的向量模式(vector mode)的公式为（根据上述内容推导，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span></span></span></span>为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>t</mi><mi>a</mi><mi>n</mi><mo stretchy="false">(</mo><mi>y</mi><mn>1</mn><mi mathvariant="normal">/</mi><mi>x</mi><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">tan(y1/x1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord">1</span><span class="mord">/</span><span class="mord mathdefault">x</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>，注意<code>cordic</code>算法规定迭代n从1开始，且由于没有迭代乘法，并不存在伸缩因子<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>K</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">K_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>）</li></ul><ol><li><p>迭代式：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>x</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>x</mi><mi>i</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>y</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><msub><mi>d</mi><mi>i</mi></msub><mfrac><msub><mi>x</mi><mi>i</mi></msub><msup><mn>2</mn><mi>i</mi></msup></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>z</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>z</mi><mi>i</mi></msub><mo>+</mo><msub><mi>d</mi><mi>i</mi></msub><mfrac><msub><mi>x</mi><mi>i</mi></msub><msup><mn>2</mn><mi>i</mi></msup></mfrac></mrow></mstyle></mtd></mtr></mtable></mrow><mspace linebreak="newline"></mspace><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>d</mi><mi>i</mi></msub><mo>=</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>d</mi><mi>i</mi></msub><mo>=</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>i</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\begin{cases}x_{i+1} = x_i\\y_{i+1} = y_i - d_i\frac{x_i}{2^i}\\z_{i+1} = z_i + d_i\frac{x_i}{2^i}\\\end{cases}\\where\begin{cases}d_i = +1,  &amp; \text{if $y_i$&gt;0} \\d_i = -1, &amp; \text{if $y_i$≤0}\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.32em;vertical-align:-1.9099999999999997em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35002em;"><span style="top:-2.19999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:-2.19999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-3.1500100000000004em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-4.30001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-4.60002em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.8500199999999998em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7114919999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7570857142857143em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-1.5300000000000002em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7114919999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7570857142857143em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.9099999999999997em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p></li><li><p>结果式：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>x</mi><mi>n</mi></msub><mo>=</mo><msub><mi>x</mi><mn>0</mn></msub><mspace linebreak="newline"></mspace><msub><mi>y</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>y</mi><mn>0</mn></msub><mo>−</mo><munderover><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><mfrac><mrow><mi>d</mi><msub><mi>x</mi><mi>n</mi></msub></mrow><msup><mn>2</mn><mi>n</mi></msup></mfrac><mspace linebreak="newline"></mspace><msub><mi>z</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>z</mi><mn>0</mn></msub><mo>+</mo><munderover><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mfrac><mi>d</mi><msup><mn>2</mn><mi>n</mi></msup></mfrac><mspace linebreak="newline"></mspace><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mo>=</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>n</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mo>=</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>y</mi><mi>n</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">x_{n+1} = x_n = x_0\\y_{n+1} = y_0 - \sum_{n=0}^{n}\frac{dx_n}{2^n}\\z_{n+1} = z_0 + \sum_{n=1}^{n}\frac{d}{2^n}\\where\begin{cases}d = +1,  &amp; \text{if $y_n$&gt;0} \\d = -1, &amp; \text{if $y_n$≤0}\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7777700000000001em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.9185100000000004em;vertical-align:-1.267113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.9185100000000004em;vertical-align:-1.267113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p></li></ol><ul><li>圆周坐标下旋转模式(rotation mode)的公式为</li></ul><ol><li><p>迭代式：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>x</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>x</mi><mi>i</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>y</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>y</mi><mi>i</mi></msub><mo>+</mo><mi>d</mi><mfrac><msub><mi>x</mi><mi>i</mi></msub><msup><mn>2</mn><mi>i</mi></msup></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>z</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>z</mi><mi>i</mi></msub><mo>−</mo><mi>d</mi><mfrac><msub><mi>x</mi><mi>i</mi></msub><msup><mn>2</mn><mi>i</mi></msup></mfrac></mrow></mstyle></mtd></mtr></mtable></mrow><mspace linebreak="newline"></mspace><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mo>=</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>z</mi><mi>i</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mo>=</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>z</mi><mi>i</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\begin{cases}x_{i+1} = x_i\\y_{i+1} = y_i + d\frac{x_i}{2^i}\\z_{i+1} = z_i - d\frac{x_i}{2^i}\\\end{cases}\\where\begin{cases}d = +1,  &amp; \text{if $z_i$&gt;0} \\d = -1, &amp; \text{if $z_i$≤0}\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.32em;vertical-align:-1.9099999999999997em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.35002em;"><span style="top:-2.19999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:-2.19999em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-3.1500100000000004em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-4.30001em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-4.60002em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.8500199999999998em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.41em;"><span style="top:-4.41em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.97em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7114919999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7570857142857143em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-1.5300000000000002em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7114919999999999em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7570857142857143em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.9099999999999997em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p></li><li><p>结果式：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>x</mi><mi>n</mi></msub><mo>=</mo><msub><mi>x</mi><mn>0</mn></msub><mspace linebreak="newline"></mspace><msub><mi>y</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>y</mi><mn>0</mn></msub><mo>+</mo><munderover><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><mfrac><mrow><mi>d</mi><msub><mi>x</mi><mi>n</mi></msub></mrow><msup><mn>2</mn><mi>n</mi></msup></mfrac><mspace linebreak="newline"></mspace><msub><mi>z</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>z</mi><mn>0</mn></msub><mo>−</mo><munderover><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mfrac><mi>d</mi><msup><mn>2</mn><mi>n</mi></msup></mfrac><mspace linebreak="newline"></mspace><mi>w</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mo>=</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>z</mi><mi>n</mi></msub></mstyle><mtext>&gt;0</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mo>=</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mstyle scriptlevel="0" displaystyle="false"><msub><mi>z</mi><mi>n</mi></msub></mstyle><mtext>≤0</mtext></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">x_{n+1} = x_n = x_0\\y_{n+1} = y_0 + \sum_{n=0}^{n}\frac{dx_n}{2^n}\\z_{n+1} = z_0 - \sum_{n=1}^{n}\frac{d}{2^n}\\where\begin{cases}d = +1,  &amp; \text{if $z_n$&gt;0} \\d = -1, &amp; \text{if $z_n$≤0}\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7777700000000001em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.9185100000000004em;vertical-align:-1.267113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.9185100000000004em;vertical-align:-1.267113em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.882887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.267113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.590392em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">+</span><span class="mord">1</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">&gt;0</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span><span class="mord"><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.04398em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">≤0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p></li></ol><h4 id="font-color-b5d5ff-stylefont-weightbold-双曲坐标系font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold-双曲坐标系font"></a> <font color= #b5d5ff style='font-weight:bold'> 双曲坐标系</font></h4><blockquote><p>双曲坐标系的<code>cordic</code>旋转比较类似于圆周坐标系。</p></blockquote><p>注意特殊的<strong>重复迭代</strong>。</p><h2 id="font-color-b5d5ff-stylefont-weightbold应用问题font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold应用问题font"></a> <font color= #b5d5ff style='font-weight:bold'>应用问题</font></h2><h3 id="font-color-b5d5ff-stylefont-weightboldcordic功能表font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldcordic功能表font"></a> <font color= #b5d5ff style='font-weight:bold'>cordic功能表</font></h3><p>图源为参考文献<sup>[6]</sup> ，侵删。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cordic_function_list.png" alt="cordic_function_list" /></p><h3 id="font-color-b5d5ff-stylefont-weightboldcordic计算范围及转换font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldcordic计算范围及转换font"></a> <font color= #b5d5ff style='font-weight:bold'>cordic计算范围及转换</font></h3><blockquote><p><code>cordic</code>算法的计算是有范围限制的，超范围的值需要进行转换后才能利用<code>cordic</code>算法进行计算。</p></blockquote><h3 id="font-color-b5d5ff-stylefont-weightboldcordic计算误差font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldcordic计算误差font"></a> <font color= #b5d5ff style='font-weight:bold'>cordic计算误差</font></h3><blockquote><p>近似误差和舍入误差</p></blockquote><p>见参考文献<sup>[7]</sup></p><h2 id="font-color-b5d5ff-stylefont-weightboldfpga实现font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldfpga实现font"></a> <font color= #b5d5ff style='font-weight:bold'>FPGA实现</font></h2><h1 id="font-color-b5d5ff-stylefont-weightbold总结font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold总结font"></a> <font color= #b5d5ff style='font-weight:bold'>总结</font></h1><hr /><p><font color= greden style='font-weight:bold' font size= 8>未完待续…长期施工中…</font></p><h1 id="font-color-b5d5ff-stylefont-weightbold参考资料font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold参考资料font"></a> <font color= #b5d5ff style='font-weight:bold'>参考资料</font></h1><p>[1] 邹熙. 基于CORDIC的指数函数的FPGA实现[J]. 大众科技, 2008, 000(010):36-37.</p><p>[2] <a href="https://blog.csdn.net/xiabodan/article/details/10948521?depth_1-utm_source=distribute.wap_relevant.none-task&amp;utm_source=distribute.wap_relevant.none-task">三角函数计算，Cordic 算法入门</a></p><p>[3] <a href="https://baike.baidu.com/item/CORDIC/5189325?fr=aladdin">CORDIC_百度百科</a></p><p>[4] 周晓青, 李合生, 陶荣辉, et al. 基于CORDIC算法的双曲正余弦函数FPGA实现[J]. 太赫兹科学与电子信息学报, 2010(2):211-214.</p><p>[5] <a href="https://blog.csdn.net/u010712012/article/details/77755567">cordic算法详解 转载</a></p><p>[6] Xilinx CORDIC算法</p><p>[7] Y. H. Hu, “The Quantization Effects of the CORDIC Algorithm”, in IEEE Trans. On Signal Processing, Vol 40,<br />No 4, April 1992</p>]]></content>
      
      
      <categories>
          
          <category> ic </category>
          
          <category> design </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cordic </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Clock Domain Crossing</title>
      <link href="/posts/Clock-Domain-Crossing-Problem/"/>
      <url>/posts/Clock-Domain-Crossing-Problem/</url>
      
        <content type="html"><![CDATA[<blockquote><p>全文分析较长，嫌麻烦直接翻到底看结论。</p></blockquote><h1 id="font-color-b5d5ff-stylefont-weightbold引言font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold引言font"></a> <font color= #b5d5ff style='font-weight:bold'>引言</font></h1><p>在各种条件下（<b><font color= red>温度、压力、震动等</font></b>）电路可能出现偶发性故障，解决难度较大，要减少数字系统中的这种问题，即要保障电路最大程度的可靠性。时序电路中的这种不稳定的状态即称为<b><font color= red>亚稳态</font></b>。</p><p>时序电路中的触发器需要满足<b><font color= red>建立时间</font></b>和<b><font color= red>保持时间</font></b>的要求，才能满足电路稳定工作的时序要求。</p><blockquote><p>建立时间：在有效时钟沿到来之前，输入端信号需要保持稳定不变的最小时间。<br />保持时间：在有效时钟沿到来之后，输入端信号需要保持稳定不变的最小时间。</p></blockquote><p><font color= #green  >如何分析建立时间和保持时间呢？</font>这里得从数电基础来分析一下。下面上D触发器的图。图源<a href="https://baike.baidu.com/item/%E6%95%B0%E5%AD%97%E7%94%B5%E5%AD%90%E6%8A%80%E6%9C%AF%E5%9F%BA%E7%A1%80%EF%BC%88%E7%AC%AC5%E7%89%88%EF%BC%89/5250042?fr=aladdin">数字电子技术基础第5版</a></p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/Dflipflop.jpg" alt="d触发器" /></p><p>在CLK上升沿到来之前，CLK=0，G1和G2门的前端会被锁住，Q和Q’保持不变。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/Dflipflop_keep.jpg" alt="d触发器" /></p><p>因为D端的数据变化经过G6和G5后会控制G3和G4的输出，因此在CLK上升沿到来之前，需要保持G5和G6的输出稳定，这样才能保证G3和G4能够正确输出，实现D值传递到Q的效果。因此在CLK上升沿到来之前，D的变化在G5和G6的传递必须完成。所以其建立时间必须t<sub>set</sub>≥2t<sub>pd</sub>（t<sub>pd</sub>为一个与门的信号延迟时间）。</p><p>因为CLK端的数据变化经过G4后会控制G6的输出，因此D的变化不能在G4变化的时候进行，在CLK上升沿到来之后，D必须保持不变直到G4的输出完成。所以其保持时间必须t<sub>hold</sub>≥t<sub>pd</sub>。其电平转换如下。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/Dflipflop_time.jpg" alt="d触发器跳转" /></p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/dffjump.gif" alt="d触发器跳转" /></p><p>以上只是举个例子，实际触发器电路可能不完全等同于此。另外实际情况下各个门电路延迟也并不相同，并且电路本身延迟也不完全一致。总而言之，触发器的<b><font color= red >建立和保持时间取决于生产工艺</font></b>，由工艺厂商决定。</p><p>由上述分析可知，若时序不能满足建立时间和保持时间要求，输出端值会呈现未知状态，电路进入亚稳态。</p><h1 id="font-color-b5d5ff-stylefont-weightbold跨时钟域主要问题font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold跨时钟域主要问题font"></a> <font color= #b5d5ff style='font-weight:bold'>跨时钟域主要问题</font></h1><p>最好的解决亚稳态的方法就是使用同步设计，同步设计可以通过STA（静态时序分析）来解决时序问题。但实际上绝大部分的ASIC设计是由多个异步的时钟驱动的，因此多时钟的设计里就需要对跨时钟域的信号、数据进行特殊操作来保障电路的稳定性。</p><p><font color= #green  >跨时钟域（Clock Domain Crossing，CDC）</font>问题主要有以下几种：</p><ol><li><p>亚稳态</p><p>确保亚稳态对系统<b><font color= red >不产生错误影响</font></b>。</p></li><li><p>数据丢失</p><p>确保信号由<b><font color= red >快速时钟域向慢速时钟域传播</font></b>时能被正确捕捉。</p></li><li><p>数据收敛及多路扇出</p><p>确保<b><font color= red >一组相关联的同步信号在经过不同的路径</font></b>之后可以在某一个相同的时钟周期正确的到达另一个时钟域。确保在<b><font color= red >一个信号在跨时钟域出现多路扇出时</font></b>，后续逻辑得到相同的值。</p></li><li><p>异步复位</p><p>确保<b><font color= red >异步复位释放</font></b>时不导致电路出现亚稳态。</p></li></ol><p>下面分别介绍各个问题及其实际解决方法。</p><h2 id="font-color-b5d5ff-stylefont-weightbold单bit-亚稳态font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold单bit-亚稳态font"></a> <font color= #b5d5ff style='font-weight:bold'>单bit-亚稳态</font></h2><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc3.png" alt="亚稳态" /></p><p>如上图，当信号adat由A时钟域进入B时钟域时，由于信号adat的时钟域和B的时钟域存在频率差和相位差，<b><font color= red >信号adat可能会在B时钟沿跳变时发生变化</font></b>（从而不能满足建立时间和保持时间要求），从而出现亚稳态。此时bdat1值可能为1，也可能为0，并且可能到下一次B时钟的上升沿到来时这个不稳定状态仍然没有恢复，这样进入亚稳态的信号bdat1就会<b><font color= red >传播</font></b>到下一级电路去。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc4.png" alt="亚稳态" /></p><p>解决这类问题的办法是使用同步器，也就是常说的<b><font color= red >打两拍（Double Flip-Flops）</font></b>，即对进入时钟域B的信号经过两级触发器的同步后再使用该信号。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc5.png" alt="亚稳态" /></p><p>由上图，打了两拍之后，对于进入亚稳态的bdat1来说，在下一个时钟沿到来的时候，他的<b><font color= red >不稳定值（0或1）</font></b>会被第二级触发器捕捉到，从而bdat2会有一个<b><font color= red >稳定的输出（0或1）</font></b>，从而<b><font color= red >避免</font></b>了亚稳态的进一步传播。注意，此方法只能避免亚稳态传播，并不保证出现亚稳态时后续电路的结果正确。就像上图中如果bdat1稳定值为0，则bdat2就会继续保持为0，从而两种情况下的输出结果完全不同，可能会影响后端电路。</p><p><font color= #green  >那是不是打两拍后数据就不存在亚稳态问题了呢？</font><b><font color= red >并不是。</font></b>因为实际情况下bdat1的亚稳态持续时间是有可能持续到第二个时钟沿到来时刻的，即第二个图里的样子。亚稳态的持续时间与触发器的恢复能力有关。</p><p>因此在跨两个时钟域的时候是否出现亚稳态情况其实是一个<b><font color= red >概率问题</font></b>，可以想得到的是，这个出现概率与两个时钟的频率（频率越高数据越有可能撞上触发器边沿）、触发器的恢复能力等参数有关。概率分析的部分可以见参考资料<sup>[5]</sup>以及参考资料<sup>[6]</sup> <a href="https://www.zhihu.com/answer/95940354">跨时钟域同步，为什么两级寄存器结构能够降低亚稳态？</a>的分析，其主要分析参数为MTBF（Mean Time Between Failures，平均故障间隔时间）。其结论是：在一般情况下（典型参数见上述资料），对于绝大多数设计来说，<b><font color= red >打两拍可以将亚稳态控制在可以接受的范围内</font></b>。</p><p>同步器代码如下。</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> synchronizer</span><br><span class="line">( </span><br><span class="line">    <span class="keyword">input</span>                   clkb                    ,       </span><br><span class="line">    <span class="keyword">input</span>                   rst                     ,       </span><br><span class="line">    <span class="keyword">input</span>                   adat                    ,       </span><br><span class="line">    <span class="keyword">output</span>  <span class="keyword">wire</span>            bdat2                          </span><br><span class="line">);</span><br><span class="line">    <span class="keyword">reg</span>[<span class="number">1</span>:<span class="number">0</span>]                bdat                    ;       </span><br><span class="line"></span><br><span class="line">    <span class="keyword">always</span>@(<span class="keyword">posedge</span> clkb <span class="keyword">or</span> <span class="keyword">posedge</span> rst)<span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span>(rst==<span class="number">1&#x27;b1</span>)<span class="keyword">begin</span></span><br><span class="line">            bdat &lt;= <span class="number">0</span>;            </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            bdat &lt;= &#123;bdat[<span class="number">0</span>],adat&#125;;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">assign</span> bdat2 = bdat[<span class="number">1</span>]; </span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure><p>为有效避免跨时钟域带来的亚稳态问题，规范的设计要求</p><ol><li><p>每个独立模块只使用一个时钟；</p></li><li><p>不同时钟域的模块间如果需要信号交互，必须使用同步器进行同步。；</p></li><li><p>对系统进行STA（静态时序分析），MIN-MAX Timing Analysis</p></li></ol><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc6.png" alt="亚稳态" /></p><h2 id="font-color-b5d5ff-stylefont-weightbold单bit-数据丢失font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold单bit-数据丢失font"></a> <font color= #b5d5ff style='font-weight:bold'>单bit-数据丢失</font></h2><p>如果数据从快的时钟域进入慢的时钟域，则可能会因为快时钟域的信号<b><font color= red >持续时间过短</font></b>导致慢时钟域的时钟<b><font color= red >无法捕获到该信号</font></b>从而导致数据丢失。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc7.png" alt="亚稳态" /></p><p>还是上一节的那个电路，按照上图所示时序，在B时钟域的两次上升沿之间，adat持续了一个A时钟域的周期，但是B时钟域无法捕获到该信号，导致数据无法在B时钟域传递下去。解决这种问题最直观的想法就是<b><font color= red >延长</font></b>adat信号<b><font color= red >至少一个bclk的周期</font></b>，使得bclk能够捕获到他，如下图。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc8.png" alt="亚稳态" /></p><p><font color= #green  >那是不是只要延时就行呢？</font><b><font color= red >并不是。</font></b>注意到因为adat的持续周期大于bclk的周期，这种方法bclk端可能采集到1次adat信号，也可能采集到2次，因此bdat的持续时间是不可控的。所以一般来说还有一种方法，即<b><font color= red >通过控制信号进行同步反馈</font></b>。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc9.png" alt="亚稳态" /></p><p>信号传递如上图所示，adat信号先置高，但暂时不拉低，什么时候拉低呢？等到B时钟域的反馈信号回来之后再拉低。由于跨时钟域，因此在adat1进入B时钟域和反馈信号bdat2进入A时钟域的时候，均打两拍处理亚稳态问题。知道在A时钟域收到反馈信号abdat2后，adat再拉低，bdat2会在之后跟随拉低。这是一种<b><font color= red >比较保险</font></b>的办法，但进行<b><font color= red >同步需要很长的延迟时间</font></b>。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc10.png" alt="亚稳态" /></p><p>代码如下。</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> synchronizer_aclk</span><br><span class="line">( </span><br><span class="line">    <span class="keyword">input</span>                   aclk                    ,       </span><br><span class="line">    <span class="keyword">input</span>                   rst                     ,       </span><br><span class="line">    <span class="keyword">input</span>                   bdat2                   ,       </span><br><span class="line">    <span class="keyword">input</span>                   a                       ,       </span><br><span class="line">    <span class="keyword">output</span>  <span class="keyword">reg</span>             adat                    ,       </span><br><span class="line">    <span class="keyword">output</span>  <span class="keyword">reg</span>             adat1                          </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">reg</span>                     abdat1                  ;       </span><br><span class="line">    <span class="keyword">reg</span>                     abdat2                  ;       </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">always</span>@(<span class="keyword">posedge</span> aclk <span class="keyword">or</span> <span class="keyword">posedge</span> rst)<span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span>(rst==<span class="number">1&#x27;b1</span>)<span class="keyword">begin</span></span><br><span class="line">            adat &lt;= <span class="number">0</span>;     </span><br><span class="line">            adat1 &lt;= <span class="number">0</span>;     </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            adat1 &lt;= adat;</span><br><span class="line">            <span class="keyword">if</span>(a==<span class="number">1&#x27;b1</span>)<span class="keyword">begin</span></span><br><span class="line">                adat &lt;= <span class="number">1</span>; </span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(abdat2==<span class="number">1&#x27;b1</span>)<span class="keyword">begin</span></span><br><span class="line">                adat &lt;= <span class="number">1&#x27;b0</span>;     </span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">                adat &lt;= adat;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">always</span>@(<span class="keyword">posedge</span> aclk <span class="keyword">or</span> <span class="keyword">posedge</span> rst)<span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span>(rst==<span class="number">1&#x27;b1</span>)<span class="keyword">begin</span></span><br><span class="line">            abdat1 &lt;= <span class="number">0</span>; </span><br><span class="line">            abdat2 &lt;= <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            abdat1 &lt;= bdat2; </span><br><span class="line">            abdat2 &lt;= abdat1;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> synchronizer_bclk</span><br><span class="line">( </span><br><span class="line">    <span class="keyword">input</span>                   bclk                    ,       </span><br><span class="line">    <span class="keyword">input</span>                   rst                     ,       </span><br><span class="line">    <span class="keyword">input</span>                   adat1                   ,       </span><br><span class="line">    <span class="keyword">output</span>  <span class="keyword">reg</span>             bdat2                          </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">reg</span>                     bdat1                   ;       </span><br><span class="line"></span><br><span class="line">    <span class="keyword">always</span>@(<span class="keyword">posedge</span> bclk <span class="keyword">or</span> <span class="keyword">posedge</span> rst)<span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span>(rst==<span class="number">1&#x27;b1</span>)<span class="keyword">begin</span></span><br><span class="line">            bdat1 &lt;= <span class="number">0</span>;</span><br><span class="line">            bdat2 &lt;= <span class="number">0</span>; </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            bdat1 &lt;= adat1;</span><br><span class="line">            bdat2 &lt;= bdat1; </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure><h2 id="font-color-b5d5ff-stylefont-weightbold多bit-数据收敛和多路扇出font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold多bit-数据收敛和多路扇出font"></a> <font color= #b5d5ff style='font-weight:bold'>多bit-数据收敛和多路扇出</font></h2><p>数据收敛问题情况较多，主要原因都是因为跨时钟域的一组相关联的信号在跨时钟域时因为传播的<b><font color= red >延时路径不同的误差</font></b>导致进入另一个时钟域时出现的误码问题。下面分多种情况讨论一下并介绍解决方法。</p><h3 id="font-color-b5d5ff-stylefont-weightbold数据收敛-2bit同时变化的信号font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold数据收敛-2bit同时变化的信号font"></a> <font color= #b5d5ff style='font-weight:bold'>数据收敛-2bit同时变化的信号</font></h3><p>如下图，A时钟域的触发器A需要a_load和a_en两个信号同时为1才能触发adata加载到abus，而这两个信号b_load和b_en均来自另一个时钟域B。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc11.png" alt="亚稳态" /></p><p>当b_load和b_en跨时钟域传递时存在小的误差延时，而这个误差延迟正好被aclk捕捉到，这样会最终导致a_en比a_load信号晚一拍出来。从而在A时钟域，这两个信号不会同时出现，因此adata也就不会被加载到abus端。</p><p>解决这个问题的办法就是很自然就是<b><font color= red >跨时钟域只传递一个使能</font></b>即可，传递过来同步之后再进行信号分配，如下图所示。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc12.png" alt="亚稳态" /></p><h3 id="font-color-b5d5ff-stylefont-weightbold数据收敛-2bit有相位差的信号font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold数据收敛-2bit有相位差的信号font"></a> <font color= #b5d5ff style='font-weight:bold'>数据收敛-2bit有相位差的信号</font></h3><p>如下图，A时钟域的触发器A需要两拍aen1和aen2分别加载数据a1到a2，然后a2到a3，而这两个信号ben1和ben2均来自另一个时钟域B。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc13.png" alt="亚稳态" /></p><p>当ben1和ben2跨时钟域传递时存在小的误差延时，而在A时钟域，这个误差延迟正好被aclk捕捉到，这两个信号aen1和aen2就会相差一整个时钟周期，最终导致a2端能加载而到a3却不能。</p><p>解决这个问题的办法，同样很自然就是<b><font color= red >跨时钟域只传递一个使能</font></b>，传递过来同步之后再对信号打拍，如下图所示。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc14.png" alt="亚稳态" /></p><h3 id="font-color-b5d5ff-stylefont-weightbold多路扇出-2bit编码信号font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold多路扇出-2bit编码信号font"></a> <font color= #b5d5ff style='font-weight:bold'>多路扇出-2bit编码信号</font></h3><p>如下图，A时钟域的2-4译码器需要对adec[1]和adec[0]编码信号进行解码，而这两个信号的来源bdec[1]和bdec[0]均来自另一个时钟域B。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc15.png" alt="亚稳态" /></p><p>当ben[1]和ben[2]跨时钟域传递时存在小的误差延时，而在A时钟域，这个误差延迟正好被aclk捕捉到，这两个信号aen[1]和aen[2]就会相差一整个时钟周期，最终导致译码结果会有一个周期异常。</p><p>解决这个问题的办法，就不能跨时钟域只用一个使能信号了。因为两位信号为编码（数据）信号而不再是简单的控制信号，逻辑功能已经不同。而其解决办法其实有两种：</p><ol><li><p><b><font color= red >给A和B跨时钟域添加一个单独的控制使能信号来控制编码信号传输</font></b></p><p>即保证在A时钟域，<b><font color= red >控制信号只在a_dec[1]和a_dec[0]稳定的情况下有效</font></b>，这样就需要几个条件：</p><ol><li><p>控制信号在b时钟域要在编码信号b_dec[1]和b_dec[0]变化开始后一个clkb后再变化</p></li><li><p>控制信号在b时钟域要在编码信号b_dec[1]和b_dec[0]变化结束前一个clkb先结束</p></li><li><p>控制信号的持续时间必须大于一整个clka周期</p><p>这样其实就需要对两个时钟频率即相位控制进行比较清晰的分析才能实现。</p></li></ol><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc16.png" alt="亚稳态" /></p></li><li><p><b><font color= red >在B时钟域先进行2-4编码（即转换为独热码），然后在A时钟域通过状态机过滤掉异常的编码值</font></b>（即不是独热码的值）</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc17.png" alt="亚稳态" /></p><p>当然跟前一种方法一样，独热码的信号持续时间必须大于一整个clka周期，以便被clka捕捉到。</p></li></ol><h3 id="font-color-b5d5ff-stylefont-weightbold多bit信号-综合问题font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold多bit信号-综合问题font"></a> <font color= #b5d5ff style='font-weight:bold'>多bit信号-综合问题</font></h3><p>其实之前讨论的三种情况都可以总结为相同的思路。</p><ol><li><p><b><font color= red >找到问题点，即数据发生变化且被另一个时钟域捕获的瞬间</font></b></p></li><li><p><b><font color= red >将多bit跨时钟域信号想办法转换为单bit跨时钟域信号，然后通过门控、编解码等方法解决问题</font></b>。</p></li></ol><p>但是这种解决办法可能对信号的持续时间，还有触发时间等有不同的要求，并且不同的问题需要进行不同的具体分析。<font color= #green  >那有没有通用的方法可以传递多位的信号呢？</font><b><font color= red >还真有。</font></b>下面介绍两种常用方法。</p><h4 id="font-color-b5d5ff-stylefont-weightbold握手协议font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold握手协议font"></a> <font color= #b5d5ff style='font-weight:bold'>握手协议</font></h4><p>总体思路其实与之前的思路一致，将多bit数据通过单bit控制信号来传递。</p><ol><li><p>在需要传递一个data的时候，发送端时钟域A先将data放到总线上，然后输出一个data_valid信号；</p></li><li><p>data_valid信号跨时钟域并经过处理后传递到接收端时钟域B；</p></li><li><p>接收端时钟域B采集到这个data_valid信号之后，从总线上拿走data，再反馈acknowledge信号给原时钟域A；</p></li><li><p>反馈的acknowledge信号跨时钟域并经过处理后传递到发送端时钟域A；</p></li><li><p>发送端时钟域A再继续发送下一个数据。</p></li></ol><p>总体结构为<b><font color= red >一次发送，一次返回</font></b>，结构图如下。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc18.png" alt="亚稳态" /></p><p>这个结构也可以有其他变种：</p><ol><li><p><b><font color= red >一次发送，两次返回</font></b></p><p>为了更保险，在每次直到接收端发现data_valid拉低之后，再发送一个ready信号，而发送端时钟域A接受到ready之后再继续发送下一个数据。即acknowledge用于拉低data_valid信号，然后再用控制信号ready来表示收到data_valid拉低，并开始下一次数据发送。结构图如下。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc19.png" alt="亚稳态" /></p></li><li><p><b><font color= red >两次发送，两次返回</font></b><br />最保险的办法，就是发送端时钟域A发送data_valid信号，接收端返回acknowledge信号，发送端发送cancel_acknowledge信号，接收端返回cancel_finish信号。通过两次握手形成完整的同步机制。结构图如下。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc20.png" alt="亚稳态" /></p><p>这几种结构进行数据交互的延迟时间依次增大，但是遇到跨时钟域问题的概率却依次降低，实际设计时应在评估后结合具体实例选取不同的方法。</p></li></ol><h4 id="font-color-b5d5ff-stylefont-weightbold异步fifofont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold异步fifofont"></a> <font color= #b5d5ff style='font-weight:bold'>异步fifo</font></h4><p>使用异步双口RAM，或异步FIFO，是一种非常方便的处理跨时钟域多bit数据传递的方法。发送端只需要根据自己时钟域A不断的把数据放进FIFO，接收端再根据自己时钟域B不断取数据即可，当然设计这种FIFO其实有一定难度。异步FIFO设计的主要难点就在于<b><font color= red >FIFO空信号（EMPTY）和FIFO满信号(FULL)</font></b>的操作。<font color= #green  >为什么呢？</font>因为空满信号是通过发送端的写地址和接收端的读地址进行对比来产生的。</p><p>举个例子，假设我们设计一个深度为16的FIFO，其地址从0~15，那么FIFO满的时候就是写地址增加到15的时候，FIFO空的时候就是读地址减少到0的时候。但是地址的传递是多bit跨时钟域的，存在跨时钟域的问题，即可能多bit数据传递因为传播的<b><font color= red >延时路径不同的误差</font></b>存在误码可能。如果我们地址使用一般的二进制计数，假设我写地址在7的之后写入一个数据，写地址加1，即地址会从7（0111）跳到8(1000)（在发送端时钟域A），但是由于各bit信号的传递存在很小的误差延时，导致其跳转的中间状态可能被接收端时钟域B捕获到，形成异常的地址（这种情况类似于两bit关联-两个编码信号的情况），而地址异常跳0的瞬间被接收端时钟域B捕获到就会产生错误的FIFO空信号（EMPTY）。同理，由于地址跨时钟域传递的问题可能导致发送端时钟域接收到地址异常跳15的瞬间，从而产生错误的FIFO满信号（FULL）。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc21.png" alt="亚稳态" /></p><p><font color= #green  >那么如何处理这种地址跨时钟域传递的问题呢？</font>其实思路还是跟最开始一致，即我们<b><font color= red >将多bit跨时钟域信号想办法转换为单bit跨时钟域信号，然后通过一些普通方法来解决问题</font></b>。在两bit关联-两个编码信号那一节中使用<b><font color= red >独热码</font></b>编码来进行多bit转单bit信号，而对于地址信号这种每次只加一或减一的连续信号，可以使用<b><font color= red >格雷码</font></b>来进行编码。由于格雷码相邻两个码值只有1个bit不同，因此即使出现异常，最多也就保持上一个正确的值而已。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc22.png" alt="亚稳态" /></p><p>根据不同的设计，可能会用到格雷码的编解码器。代码如下。</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> gray2bin #(<span class="keyword">parameter</span> WIDTH = <span class="number">4</span>)</span><br><span class="line">( </span><br><span class="line">    <span class="keyword">input</span>  [WIDTH-<span class="number">1</span>:<span class="number">0</span>]      gray                    ,       </span><br><span class="line">    <span class="keyword">output</span>  <span class="keyword">reg</span>[WIDTH-<span class="number">1</span>:<span class="number">0</span>]  bin                            </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">integer</span> i;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">always</span>@(gray)<span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;WIDTH;i=i+<span class="number">1</span>)</span><br><span class="line">            bin[i] = ^(gray&gt;&gt;i);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">endmodul</span><br></pre></td></tr></table></figure><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> bin2gray #(<span class="keyword">parameter</span> WIDTH = <span class="number">4</span>)</span><br><span class="line">( </span><br><span class="line">    <span class="keyword">input</span> [WIDTH-<span class="number">1</span>:<span class="number">0</span>]       bin                     ,       </span><br><span class="line">    <span class="keyword">output</span>  <span class="keyword">wire</span>[WIDTH-<span class="number">1</span>:<span class="number">0</span>] gray                           </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">assign</span> gray = (bin&gt;&gt;<span class="number">1</span>)^(bin);</span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure><p>格雷码计数器的代码就不贴了，就是在普通二进制计数器后加上格雷码编码。</p><p>因此。异步FIFO的设计架构如下。主要是几个部分：</p><ol><li>发送端的FIFO控制器，负责将数据放入FIFO，并在接收FIFO满标志时不再放数据</li><li>接收端的FIFO控制器，负责从FIFO取出数据，并在接收FIFO空标志时不再取数据</li><li>FIFO满标志控制器以及FIFO空标志控制器，负责进行地址的格雷码转换并输出标志</li><li>同步器，负责同步收发两端发送给对方的地址信号</li></ol><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/cdc23.png" alt="亚稳态" /></p><p>给自己留个作业，以后有时间了自己写一个异步FIFO。</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> fifo_async</span><br></pre></td></tr></table></figure><h2 id="font-color-b5d5ff-stylefont-weightbold单bit-异步复位font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold单bit-异步复位font"></a> <font color= #b5d5ff style='font-weight:bold'>单bit-异步复位</font></h2><p>数字系统的上电复位信号都是异步的，复位信号的亚稳态都是在<b><font color= red >复位信号释放的时候</font></b>出现的。对于异步复位信号，引入了标准的恢复时间(Recovery Time)和移除时间(Removal Time)的概念。本质上还是建立时间和保持时间的概念。而解决异步复位问题，一般就是一句口诀：<b><font color= red >异步复位，同步释放</font></b>。即在进行异步复位释放的时候，先对复位信号打两拍，同步处理之后的信号再作为系统的复位信号使用。</p><h1 id="font-color-b5d5ff-stylefont-weightbold结语font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold结语font"></a> <font color= #b5d5ff style='font-weight:bold'>结语</font></h1><ol><li>单bit亚稳态问题一般解决方法：打两拍。如果系统频率很高或者有其他特殊约束，也可能打3拍，要分析MTBF；</li><li>数据丢失的问题一般解决方法：延宽信号或进行握手；</li><li>多bit数据传输的一般解决方法：握手协议（2次，3次或4次），或使用异步FIFO（格雷码转换地址信号）；</li><li>异步复位问题的解决方法：异步复位，同步释放。</li></ol><p>同时，在过程中作者验证了另外几个小问题，限于篇幅不做分享，列在下方与读者一共同思考。</p><ol><li><font color= #green  >常说的竞争和冒险与亚稳态问题有什么关系？</font></li><li><font color= #green  >格雷码编码是如何保证相邻码之间只有一个bit有变化的？</font></li></ol><p>本文部分的内容完全来自参考资料<sup>[1]</sup>，大家有兴趣可以去看看英文原版，写的非常好。</p><h1 id="font-color-b5d5ff-stylefont-weightbold参考资料font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold参考资料font"></a> <font color= #b5d5ff style='font-weight:bold'>参考资料</font></h1><p>[1] Synthesis and Scripting Techniques for Designing Multi-Asynchronous Clock Designs</p><p>[2] <a href="http://dengkanwen.com/238.html">揭秘《跨时钟域处理》三大方法</a></p><p>[3] 万年不翻的<a href="https://baike.baidu.com/item/%E6%95%B0%E5%AD%97%E7%94%B5%E5%AD%90%E6%8A%80%E6%9C%AF%E5%9F%BA%E7%A1%80%EF%BC%88%E7%AC%AC5%E7%89%88%EF%BC%89/5250042?fr=aladdin">数字电子技术基础（第5版）</a></p><p>[4] <a href="http://t.elecfans.com/v/832.html">芯片设计中跨时钟域(CDC)5大问题与解决方法</a></p><p>[5] William J. Dally and John W. Poulton, Digital Systems Engineering, Cambridge University Press, 1998, pp. 469-470.</p><p>[6] <a href="https://www.zhihu.com/answer/95940354">跨时钟域同步，为什么两级寄存器结构能够降低亚稳态？</a></p>]]></content>
      
      
      <categories>
          
          <category> ic </category>
          
          <category> design </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ic </tag>
            
            <tag> cdc </tag>
            
            <tag> interview </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IC Design Flow</title>
      <link href="/posts/IC-Design-Flow/"/>
      <url>/posts/IC-Design-Flow/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="b7221748e49ae063a2ea3132fb95192971f342b75fe8ee3ab41c3231981e7dc4">8bc8731f59759f523b66220ae60338fc65cb16d51d0ed2854d4649f5df4087c2e2adb30414a0884654f94a7c6025444d4b5b82dba3ba93768a604d31717c1977969eb4dd035bf04feacbebc5b9e30a822c07696ec6a32b03517532712e70d7a2b131b85b287b870fd4ea201a5dcef79a37bfbf37bcaeb219242b24ccab2d37cd09f02a02f34b14850f0c88c0bf627ae1744c31f559dd44cc4929f4892513efadd4018827b4855adeecc488eefdae4afcc42205555594e666f6a597773752d111cb73a316260b600495fd3331f69e8e806d8853ad53c82a0bd1026d4c0e1640368847a6a9f492fb1d2893202cf40b5b38710cdc1be8308484e84e29cf5c4d9665878d3690f5dc41c3b11f63c66fa5fb2f07611a32e1be60c312f0c8718d3f10b71c668f2e8d1d43aac8dbbdf29d0a9decb85fe539e612b687f322eb3b13ea439f819c5f577c95b4651659b46645278723d6a387c03222eb07872ed8246d97c3c4a1a8d572704d80cec9ea5a617c4d81e1797d75a125f9e4a1e715fd2e88cf29919578bfb0005cf5cab487c23f0f508b1911bf2d6f89b41980198da16b7791e563dc2d0a4332a39bf80bde253d8c20cdc0d2e0a4639d33d14304e5021e1a7d141422b59281d1d83fbc341c7b00ffe3e4ebec34ae40af723de8819f2a8db7cb1e28412af7b026e5dbcdd279dab8ef5f1d7ffba552a9532b3cd84eec47ed46b05011f9301ca3b1b2d400d912020344a648e7eb88aa3c09740c6e9a4c7e1f115b1e1c84356574d54acd8b22c5b974dab1f0e3311961d75185bc3d793c60acc6b4126aa2ad70dab732e49bee91630b555b3b9d34184812b4e6ce52487cfc2b779d6d46d8c9562daeba239bbfe851286561770016950534c641b394bcab3c398c0c93d48bb0144e9516b470a65285b9f3cfb6929b8c7a49640ec59db77e3afeb05759c000870a569a9de89eb834e2cc434fbbfa9ed87c21d3a926155b3945f3046dbc313f3f14e72b0a4344910b3b8ac35039a4291fcecdb0e537d9f69759a516dc0d457af7e9dced5308a239c9e5dd7a318102444e3e984c656e1c9abb6bb16b096a2ceed07dd474c4031c768135800b2c0afd52a508f0dbabf5a54d71c23d4fe8dd7b37733e72405e33f372565f4d4a3b64ce1b9de4fe3badef671801f795fb20babfb39164d2f5b5cad4be354e7b3ae801704aad943b89b3940630a283498acbaf011c5698d8c19277a9b56d032e642311693b8460fba90e69fcdd34584d7556389afe3cd24d2ec031e575cc91e5b026cd2d62a7d08b05c1683fb14268276e402f63f912d93465b4553add2fe1f516859436ea688a1c8271e112226832ced0e34e1eb6faa604d321a01c67348b4b485b26a9730ab48722fa823cf7af7c6b7f3cabe9c962e40bf9a1b4f599982a8d211895a08118c28d94761e2a61508720d859a10f2b1517ef16f1556e4489299fbed907dba811f3ec31767f4ea6e89f13e9c35c7c3711b7d2f13b3b67d6c9a23f5d5810136ef5c085b2edac85fe79d496df5baf91229698bc1977101ff9e6645c2ee183a436adee415938d2dbeb4d6f8c798990a6f3916baa369a18e2c7a64d8c49d405ed0e6a197f52f58b972e7f396dd0adf59d825153a5b4d271bb00903331eb0300b6c1c3002e4fdbffcf5b6506f90cfd5d22a794b4276ee5d9a2df8f3f14a153f6ade0acfd2b5145c5798282d824f94861530441320a6708307ebfe452fd7e9dd9f1f6b37ad52adfe26981065ff70a1f2d202bbc7a817de7f73c264f66778704d56a55424a2fe1ae0d88d8792be6efdc624037cd08ec1a2f6f85f1c177fe6e48b26c745f555ad496bbb4a875d959aacd539b75665f440dc565ad0c8ea6a0e447e7e0862442d59c1963216702a660d2bd026d7821f1d890202f7db786598db0de2b7accc48394c0db85feb2eb1fe6d6551da5568d27992c0c4baca8031357590238938b8d0498ad3f0ae54354592004e3e04847c2046682f0270700ba367dd27130f34974a42a9cf2ce9089fdef9e9acf11685cc26d22d660a596e149e7928cf17470</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> ic </category>
          
          <category> flow </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ic </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gvim-Verilog-Handbook</title>
      <link href="/posts/Gvim-Verilog-HB/"/>
      <url>/posts/Gvim-Verilog-HB/</url>
      
        <content type="html"><![CDATA[<div class="tip important"><p>此篇为中篇，主要介绍部分功能使用。部分功能可能已改动，只做参考。</p><p></p></div><blockquote><p>点击查看<a href="/posts/Gvim-Verilog-Final/">终篇效果</a></p></blockquote><h1 id="font-color-b5d5ff-stylefont-weightbold代码编写font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold代码编写font"></a> <font color= #b5d5ff style='font-weight:bold'>代码编写</font></h1><h2 id="font-color-b5d5ff-stylefont-weightbold添加头部font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold添加头部font"></a> <font color= #b5d5ff style='font-weight:bold'>添加头部</font></h2><p>在Normal模式下输入<code>header</code>（或菜单栏中Verilog的AddHeader），自动生成文件头部。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/header.gif" alt="文件头" /></p><p>可在automatic.vim的AddHeader()函数中修改相关的参数模板。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> AddHeader()</span><br></pre></td></tr></table></figure><h2 id="font-color-b5d5ff-stylefont-weightbold添加波形图font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold添加波形图font"></a> <font color= #b5d5ff style='font-weight:bold'>添加波形图</font></h2><p>点击GUI界面工具栏中的AddClk，AddSig和AddBus（或菜单栏中的TimingWave）分别添加时钟，一般信号，总线信号，末尾取反标志位以及分割线。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/addwave.gif" alt="添加波形图" /></p><p>通过快捷键<code>Ctrl+F8</code>或者TimingWave中的Invert键进行信号的翻转和总线的调整，信号末尾的取反标志位代表信号翻转时使用下降沿触发（默认为上升沿触发）。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/adjustwave.gif" alt="调整波形图" /></p><p>波形的相关配置在automatic.vim中的位置及其含义如下。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> s:sig_offset = 13                                       <span class="string">&quot;信号偏移值</span></span><br><span class="line"><span class="string">let s:clk_period = 8                                        &quot;</span>一个时钟间隔8个空格周期</span><br><span class="line"><span class="built_in">let</span> s:clk_num = 16                                          <span class="string">&quot;产生16个时钟</span></span><br><span class="line"><span class="string">let s:cq_trans = 1                                          &quot;</span>第一个触发点间隔1个空格周期</span><br><span class="line"><span class="built_in">let</span> s:wave_max_wd = s:sig_offset + s:clk_num*s:clk_period</span><br><span class="line"><span class="string">&quot;0 is clk posedge, 4 is clk negedge</span></span><br></pre></td></tr></table></figure><h2 id="font-color-b5d5ff-stylefont-weightbold添加代码段font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold添加代码段font"></a> <font color= #b5d5ff style='font-weight:bold'>添加代码段</font></h2><h3 id="font-color-b5d5ff-stylefont-weightbold添加always块font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold添加always块font"></a> <font color= #b5d5ff style='font-weight:bold'>添加always块</font></h3><p>多种always块添加，可通过菜单栏AlwaysBlock的选项点击或工具栏部分图标点击，或者通过快捷键<code>al</code>，修改配置与添加文件头部的功能类似，在automatic.vim相关函数中对应修改即可。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/addalways.gif" alt="调整波形图" /></p><h3 id="font-color-b5d5ff-stylefont-weightbold添加状态机font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold添加状态机font"></a> <font color= #b5d5ff style='font-weight:bold'>添加状态机</font></h3><p>快捷键<code>fsm</code>，生成三段式状态机模板，修改配置与添加文件头部的功能类似，在automatic.vim相关函数中对应修改即可。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/addfsm.gif" alt="调整波形图" /></p><h3 id="font-color-b5d5ff-stylefont-weightbold类似添加font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold类似添加font"></a> <font color= #b5d5ff style='font-weight:bold'>类似添加</font></h3><p>还有添加单行注释、选定后添加多行注释、添加reg/wire注释块、添加主程序注释块等。参考automaic.vim配置即可。插入模式下快捷键F2添加时间，参考vimrc配置。</p><h2 id="font-color-b5d5ff-stylefont-weightbold信号操作font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold信号操作font"></a> <font color= #b5d5ff style='font-weight:bold'>信号操作</font></h2><h3 id="font-color-b5d5ff-stylefont-weightbold产生信号定义font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold产生信号定义font"></a> <font color= #b5d5ff style='font-weight:bold'>产生信号定义</font></h3><ul><li>端口信号定义</li></ul><p>输入信号后，在对应信号行Normal模式下输入<code>;di</code>产生input信号声明，输入<code>;dow</code>产生output wire 信号声明，输入<code>;dor</code>产生output reg信号声明，注意此声明不能带位宽，不然会被截位。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/gensignal.gif" alt="产生信号定义" /></p><ul><li>reg/wire信号定义</li></ul><p>输入信号后，在对应信号行Normal模式下<code>;dr</code>产生input信号声明，<code>;dw</code>产生output wire 信号声明，注意此声明不能带位宽，不然会被截位。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/genregwire.gif" alt="regwire定义" /></p><h3 id="font-color-b5d5ff-stylefont-weightboldinputoutput定义切换font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldinputoutput定义切换font"></a> <font color= #b5d5ff style='font-weight:bold'>input/output定义切换</font></h3><p>快捷键<code>Shift+F9</code>（或菜单栏的Verilog）调整端口信号input/output切换</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/switchinout.gif" alt="inout切换" /></p><h3 id="font-color-b5d5ff-stylefont-weightbold信号对齐font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold信号对齐font"></a> <font color= #b5d5ff style='font-weight:bold'>信号对齐</font></h3><p>输入信号位宽之后信号对齐会有问题，通过快捷键<code>F7</code>对齐输入输出端口的格式；通过快捷键<code>F8</code>对齐reg/wire的格式；通过快捷键<code>F6</code>调整例化模块的端口对齐。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/align.gif" alt="信号对齐" /></p><h3 id="font-color-b5d5ff-stylefont-weightbold自动例化font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold自动例化font"></a> <font color= #b5d5ff style='font-weight:bold'>自动例化</font></h3><p>将需要例化的模块与顶层模块放在一个文件夹下，然后在顶层模块中输入</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uart u_uart(<span class="comment">/*autoinst*/</span>);<span class="comment">//模块名+u_模块名+(/*autoinst*/); 注意要添加分号</span></span><br></pre></td></tr></table></figure><p>然后使用快捷键<code>Shift+F3</code>（或菜单栏Verilog功能）即可。例化端口自带input和outrput注释，可以更改automati.vim代码选择不添加。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/autoinst.gif" alt="自动例化" /></p><p>另外，自动例化autoinst功能里带有例化更新，例化顺序重排，重对齐等操作，具体可尝试使用。AutoArg功能用于声明输入输出，现在暂时不太需要使用了。</p><h3 id="font-color-b5d5ff-stylefont-weightbold自动定义regwirefont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold自动定义regwirefont"></a> <font color= #b5d5ff style='font-weight:bold'>自动定义reg/wire</font></h3><p>慎用，部分功能有异常。在需要添加reg/wire定义的位置输入</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*autodef*/</span></span><br></pre></td></tr></table></figure><p>然后使用快捷键<code>Shift+F2</code>（或菜单栏Verilog功能）即可，此功能会自动定义当前未定义的例化模块端口，模块内使用到的wire和reg信号。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/autodef.gif" alt="自动定义reg/wire" /></p><h3 id="font-color-b5d5ff-stylefont-weightbold自动连线font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold自动连线font"></a> <font color= #b5d5ff style='font-weight:bold'>自动连线</font></h3><p>待补充。</p><h3 id="font-color-b5d5ff-stylefont-weightbold递增减命名font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold递增减命名font"></a> <font color= #b5d5ff style='font-weight:bold'>递增/减命名</font></h3><p>进入Gvim列操作后选定单列后（在windows下Ctrl+q，Linux下Ctrl+v），输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:I</span><br></pre></td></tr></table></figure><p>则生成第一个数为起始数的递增序列。若输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:I -1</span><br></pre></td></tr></table></figure><p>则生成第一个数为起始数的递减序列。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/increasing.gif" alt="递增序列" /></p><h1 id="font-color-b5d5ff-stylefont-weightboldide操作font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldide操作font"></a> <font color= #b5d5ff style='font-weight:bold'>IDE操作</font></h1><h2 id="font-color-b5d5ff-stylefont-weightbold树形拓扑font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold树形拓扑font"></a> <font color= #b5d5ff style='font-weight:bold'>树形拓扑</font></h2><h3 id="font-color-b5d5ff-stylefont-weightbold文件树font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold文件树font"></a> <font color= #b5d5ff style='font-weight:bold'>文件树</font></h3><p>Normal模式下输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:NERdTree</span><br></pre></td></tr></table></figure><p>显示当前文件夹的文件树。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/nerdtree.gif" alt="nerdtree" /></p><h3 id="font-color-b5d5ff-stylefont-weightboldrtl树font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldrtl树font"></a> <font color= #b5d5ff style='font-weight:bold'>RTL树</font></h3><p>RTL树需要perl脚本支持，linux下操作比较方便。Windows下可用git的git-bash集成的perl。</p><p>在.v文件夹下使用调用<strong>git-bash</strong>，并把名为<strong>ctags_gen</strong>的perl脚本放入该文件夹，在git-bash中输入命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">perl ctags_gen *.v</span><br></pre></td></tr></table></figure><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/rtltreepre.gif" alt="rtltreeprepare" /></p><p>这里会生成一个模块之间关联信息的文件<code>tags</code>。这样在文件夹下用Gvim打开.v的顶层文件，命令行模式输入命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:RtlTree</span><br></pre></td></tr></table></figure><p>即可打开Rtl树列表。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/rtltree.gif" alt="rtltree" /></p><h2 id="font-color-b5d5ff-stylefont-weightbold代码检查font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold代码检查font"></a> <font color= #b5d5ff style='font-weight:bold'>代码检查</font></h2><p>代码检查需要iverilog作为Linter来进行操作。下载windows版的iverilog并将iverilog.exe的地址添加到环境变量$PATH中。Syntasticcheck会调用cmd.exe（或git-bash，可通过vimrc配置）作为shell启动iveirllog检查代码，并将结果返回Syntasticcheck，然后由Syntasticcheck显示到Gvim编辑器中。在Normal模式下输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:SyntasticCheck</span><br></pre></td></tr></table></figure><p>即可进行代码检查。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/syntasticcheck.gif" alt="syntasticcheck" /></p><h1 id="font-color-b5d5ff-stylefont-weightboldbtwfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldbtwfont"></a> <font color= #b5d5ff style='font-weight:bold'>BTW</font></h1><p>据说Emacs的verilog-mode插件集成度高且很好用，但在vim中调用貌似不太方便，详见<a href="https://creatorjie.wordpress.com/2013/05/27/%E7%94%A8emacs%E5%86%99verilog/">用Emacs写Verilog</a> 。不过现在这版Gvim作者个人用着已经很方便了，且自己配置也很方便，所以暂不考虑替换。</p>]]></content>
      
      
      <categories>
          
          <category> ic </category>
          
          <category> editor </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vim </tag>
            
            <tag> verilog </tag>
            
            <tag> gvim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gvim-Verilog-Env</title>
      <link href="/posts/Gvim-Verilog-env/"/>
      <url>/posts/Gvim-Verilog-env/</url>
      
        <content type="html"><![CDATA[<div class="tip important"><p>此篇为初篇，主要介绍环境搭建。部分功能可能已改动，只做参考。</p><p></p></div><blockquote><p>点击查看<a href="/posts/Gvim-Verilog-Final/">终篇效果</a></p></blockquote><h1 id="综述"><a class="markdownIt-Anchor" href="#综述"></a> 综述</h1><p>主要参考了下面几个链接的vimrc配置及脚本：</p><p><a href="http://dengkanwen.com/438.html">Kevin：如何提高敲代码的速度？</a></p><p><a href="https://www.jianshu.com/u/c59586ada722">基于GVim搭建Verilog开发环境</a></p><p><a href="https://blog.csdn.net/zxy9602/article/details/79439257">全世界最好的编辑器VIM之Windows配置（gvim）</a></p><p><a href="http://bbs.eetop.cn/thread-335755-3-1.html">vim auto script for verilog &amp; RtlTree - (like Emacs, Verdi)</a></p><p><a href="https://www.vim.org/scripts/script.php?script_id=4067">automatic for Verilog &amp; RtlTree : Automatic generator for Verilog HDL (upgraded) &amp; RtlTree</a></p><hr /><h1 id="verilog专用设置"><a class="markdownIt-Anchor" href="#verilog专用设置"></a> Verilog专用设置</h1><h2 id="vimrc配置"><a class="markdownIt-Anchor" href="#vimrc配置"></a> vimrc配置</h2><p>根据<a href="http://dengkanwen.com/438.html">Kevin：如何提高敲代码的速度？</a>，修改相关vimrc的配置，根据自己的操作习惯做了一些快捷键映射的修改，同时添加部分注释。</p><hr /><h2 id="自动化脚本"><a class="markdownIt-Anchor" href="#自动化脚本"></a> 自动化脚本</h2><p>在使用上述vimrc配置，搜索相关资料时，作者在<a href="http://bbs.eetop.cn/thread-335755-3-1.html">vim auto script for verilog &amp; RtlTree - (like Emacs, Verdi)</a>意外发现一个Verilog自动化脚本。此脚本包含很多Vim相关自动化功能，只需要自己修改部分脚本文件即可使用。</p><h3 id="安装方法"><a class="markdownIt-Anchor" href="#安装方法"></a> 安装方法</h3><p>在源地址下载链接后，将.vim/plugin文件夹下automatic.vim放入自己的Gvim同样位置的plugin文件夹下。另外可粘贴/after文件夹至vim源文件位置，作为Gvim工具栏使用的icon图标。由于原作者使用的是Linux，因此在Windows下需要重新配置图片位置及格式。</p><p>我的VIM安装位置为E:\Vim\vim73，因此将automatic.vim的下列代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">amenu ToolBar.-Show-            :</span><br><span class="line">amenu icon=<span class="variable">$HOME</span>/.vim/after/ShowCall.xpm ToolBar.ShowCall               :call ShowCall()&lt;CR&gt;</span><br><span class="line">amenu icon=<span class="variable">$HOME</span>/.vim/after/ShowDef.xpm  ToolBar.ShowDef                :call ShowDef()&lt;CR&gt;</span><br><span class="line">amenu ToolBar.-TimingWave-      :</span><br><span class="line">amenu icon=<span class="variable">$HOME</span>/.vim/after/AddClk.xpm   ToolBar.AddClk                 :call AddClk()&lt;CR&gt;</span><br><span class="line">amenu icon=<span class="variable">$HOME</span>/.vim/after/AddSig.xpm   ToolBar.AddSig                 :call AddSig()&lt;CR&gt;</span><br><span class="line">amenu icon=<span class="variable">$HOME</span>/.vim/after/AddBus.xpm   ToolBar.AddBus                 :call AddBus()&lt;CR&gt;</span><br><span class="line">amenu icon=<span class="variable">$HOME</span>/.vim/after/AddNeg.xpm   ToolBar.AddNeg                 :call AddNeg()&lt;CR&gt;</span><br><span class="line">amenu icon=<span class="variable">$HOME</span>/.vim/after/AddBlk.xpm   ToolBar.AddBlk                 :call AddBlk()&lt;CR&gt;</span><br><span class="line">amenu ToolBar.-Always-          :</span><br><span class="line">amenu icon=<span class="variable">$HOME</span>/.vim/after/alpn.xpm     ToolBar.alpn                   :call AlBpn()&lt;CR&gt;</span><br><span class="line">amenu icon=<span class="variable">$HOME</span>/.vim/after/al.xpm       ToolBar.al                     :call AlB()&lt;CR&gt;</span><br><span class="line">amenu icon=<span class="variable">$HOME</span>/.vim/after/alnn.xpm     ToolBar.alnn                   :call AlBnn()&lt;CR&gt;</span><br></pre></td></tr></table></figure><p>修改为(这里$VIM为指向E:\VIM的环境变量)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">amenu ToolBar.-Show-            :</span><br><span class="line">amenu icon=<span class="variable">$VIM</span>/vim73/after/ShowCall.bmp ToolBar.ShowCall               :call ShowCall()&lt;CR&gt;</span><br><span class="line">amenu icon=<span class="variable">$VIM</span>/vim73/after/ShowDef.bmp  ToolBar.ShowDef                :call ShowDef()&lt;CR&gt;</span><br><span class="line">amenu ToolBar.-TimingWave-      :</span><br><span class="line">amenu icon=<span class="variable">$VIM</span>/vim73/after/AddClk.bmp   ToolBar.AddClk                 :call AddClk()&lt;CR&gt;</span><br><span class="line">amenu icon=<span class="variable">$VIM</span>/vim73/after/AddSig.bmp   ToolBar.AddSig                 :call AddSig()&lt;CR&gt;</span><br><span class="line">amenu icon=<span class="variable">$VIM</span>/vim73/after/AddBus.bmp   ToolBar.AddBus                 :call AddBus()&lt;CR&gt;</span><br><span class="line">amenu icon=<span class="variable">$VIM</span>/vim73/after/AddNeg.bmp   ToolBar.AddNeg                 :call AddNeg()&lt;CR&gt;</span><br><span class="line">amenu icon=<span class="variable">$VIM</span>/vim73/after/AddBlk.bmp   ToolBar.AddBlk                 :call AddBlk()&lt;CR&gt;</span><br><span class="line">amenu ToolBar.-Always-          :</span><br><span class="line">amenu icon=<span class="variable">$VIM</span>/vim73/after/alpn.bmp     ToolBar.alpn                   :call AlBpn()&lt;CR&gt;</span><br><span class="line">amenu icon=<span class="variable">$VIM</span>/vim73/after/al.bmp       ToolBar.al                     :call AlB()&lt;CR&gt;</span><br><span class="line">amenu icon=<span class="variable">$VIM</span>/vim73/after/alnn.bmp     ToolBar.alnn                   :call AlBnn()&lt;CR&gt;</span><br></pre></td></tr></table></figure><p>这样打开Gvim就可以看见菜单栏和工具栏了。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/autoscript.jpg" alt="工具栏和菜单栏" /></p><p>下面介绍这个脚本的一些自动化功能。</p><hr /><h3 id="添加时序波形timingwave"><a class="markdownIt-Anchor" href="#添加时序波形timingwave"></a> 添加时序波形TimingWave</h3><p>在编辑器内可以添加时序波形，通过菜单栏、工具栏以及快捷键操作。可以添加时钟（clk），信号（sig）和总线（bus）信号。通过翻转（Invert，快捷键ctrl+F8）操作信号。</p><p>配置参数在automatic.vim的如下位置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> s:sig_offset = 13</span><br><span class="line"><span class="built_in">let</span> s:clk_period = 8</span><br><span class="line"><span class="built_in">let</span> s:clk_num = 16</span><br><span class="line"><span class="built_in">let</span> s:cq_trans = 1</span><br><span class="line"><span class="built_in">let</span> s:wave_max_wd = s:sig_offset + s:clk_num*s:clk_period</span><br><span class="line"><span class="string">&quot;0 is clk posedge, 4 is clk negedge</span></span><br></pre></td></tr></table></figure><p>sig_offset：产生信号的偏移宽度</p><p>clk_period: 产生的时钟信号的周期</p><p>clk_num: 产生的时钟信号的个数</p><p>cq_trans: 第几个沿开始跳变。0代表上升沿，4代表下降沿。这里用1表示上升沿跳变，延迟1个单位。</p><p>输出的波形样式如下：</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/timingwave.jpg" alt="输出波形" /></p><hr /><h3 id="添加always块和头部"><a class="markdownIt-Anchor" href="#添加always块和头部"></a> 添加always块和头部</h3><p>在在编辑器内可以添加always块和文件头，通过菜单栏、工具栏或快捷键操作。前面的vimrc配置中其实已经有简洁版的always块生成方法（输入&quot;al&quot;），这里使用脚本可以使得修改配置更加简单，因为配置是通过函数输入的，不需要再手动去找位置改代码。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/alwaysgen.jpg" alt="always块生成" /></p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/always.jpg" alt="always" /></p><p>想要修改always的生成逻辑，修改automatic.vim的如下代码即可（一共四种类型的alwyas块，这里只放一种作参考）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;Always Block definition &#123;&#123;&#123;1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function AlBpn() &quot;</span>&#123;&#123;&#123;2</span><br><span class="line">    <span class="built_in">let</span> lnum = line(<span class="string">&quot;.&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> idx <span class="keyword">in</span> range(1,7)</span><br><span class="line">        call append(lnum,<span class="string">&quot;&quot;</span>)</span><br><span class="line">    endfor</span><br><span class="line">    call setline(lnum+1,<span class="string">&quot;always @(posedge clk or negedge rst_n) begin&quot;</span>)</span><br><span class="line">    call setline(lnum+2,<span class="string">&quot;    if(!rst_n) begin&quot;</span>)</span><br><span class="line">    call setline(lnum+3,<span class="string">&quot;        &quot;</span>)</span><br><span class="line">    call setline(lnum+4,<span class="string">&quot;    end else if() begin&quot;</span>)</span><br><span class="line">    call setline(lnum+5,<span class="string">&quot;    end else begin&quot;</span>)</span><br><span class="line">    call setline(lnum+6,<span class="string">&quot;    end&quot;</span>)</span><br><span class="line">    call setline(lnum+7,<span class="string">&quot;end&quot;</span>)</span><br><span class="line">    call cursor(lnum+3,9)</span><br><span class="line">endfunction <span class="string">&quot;&#125;&#125;&#125;2</span></span><br></pre></td></tr></table></figure><p>同样的方法可以修改添加头部设置。这里推荐删除原vimrc配置产生头文件的部分代码。</p><p>因为原vimrc配置由于头部过长，修改配置非常麻烦，但在此脚本的函数下比较方便。修改的代码位置如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> AddHeader() <span class="string">&quot;&#123;&#123;&#123;2</span></span><br><span class="line"><span class="string">let line = getline(1)</span></span><br><span class="line"><span class="string">if line =~ &#x27;// +FHDR&#x27;</span></span><br><span class="line"><span class="string">        return</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string">    let company = system(&quot;</span><span class="built_in">echo</span> <span class="variable">$COMPANY</span><span class="string">&quot;)</span></span><br><span class="line"><span class="string">    let company = substitute(company,&#x27;\n&#x27;,&#x27;&#x27;,&#x27;&#x27;)</span></span><br><span class="line"><span class="string">    if company =~ &#x27;COMPANY:&#x27;</span></span><br><span class="line"><span class="string">echohl WarningMsg | echo &quot;</span>unix env <span class="variable">$COMPANY</span>: Undefined variable. Please set_env COMPANY <span class="keyword">in</span> ~/.cshrc<span class="string">&quot; | echohl None</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    &quot;</span>===============================================================</span><br><span class="line">    <span class="string">&quot;        Add File Header</span></span><br><span class="line"><span class="string">    &quot;</span>===============================================================</span><br><span class="line"><span class="built_in">let</span> filename = expand(<span class="string">&quot;%&quot;</span>)</span><br><span class="line">call append(0,  <span class="string">&quot;// +FHDR------------------------------------------------------------&quot;</span>)</span><br><span class="line">call append(1,  <span class="string">&quot;//                 Copyright (c) &quot;</span>.strftime(<span class="string">&quot;%Y &quot;</span>) . company . <span class="string">&quot;.&quot;</span>)</span><br><span class="line">call append(2,  <span class="string">&quot;//                       ALL RIGHTS RESERVED&quot;</span>)</span><br><span class="line">call append(3,  <span class="string">&quot;// -----------------------------------------------------------------&quot;</span>)</span><br><span class="line">call append(4,  <span class="string">&quot;// Filename      : &quot;</span>.filename)</span><br><span class="line">call append(5,  <span class="string">&quot;// Author        : &quot;</span>.s:GetUserName())</span><br><span class="line">call append(6,  <span class="string">&quot;// Created On    : &quot;</span>.strftime(<span class="string">&quot;%Y-%m-%d %H:%M&quot;</span>))</span><br><span class="line">call append(7,  <span class="string">&quot;// Last Modified : &quot;</span>)</span><br><span class="line">call append(8,  <span class="string">&quot;// -----------------------------------------------------------------&quot;</span>)</span><br><span class="line">call append(9,  <span class="string">&quot;// Description:&quot;</span>)</span><br><span class="line">call append(10,  <span class="string">&quot;//&quot;</span>)</span><br><span class="line">call append(11, <span class="string">&quot;//&quot;</span>)</span><br><span class="line">call append(12, <span class="string">&quot;// -FHDR------------------------------------------------------------&quot;</span>)</span><br><span class="line">call append(13, <span class="string">&quot;&quot;</span>)</span><br><span class="line">endfunction <span class="string">&quot;&#125;&#125;&#125;2</span></span><br></pre></td></tr></table></figure><p>注意这里作者使用的姓名、公司等是在linux系统下自动配置的，可以根据自己的需求自行修改（本人依旧采用vimrc配置头部的格式，只是改成了使用脚本的方法）。修改如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> AddHeader() <span class="string">&quot;&#123;&#123;&#123;2</span></span><br><span class="line"><span class="string">let line = getline(1)</span></span><br><span class="line"><span class="string">if line =~ &#x27;// +FHDR&#x27;</span></span><br><span class="line"><span class="string">        return</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string">    let company = system(&quot;</span><span class="built_in">echo</span> <span class="variable">$COMPANY</span><span class="string">&quot;)</span></span><br><span class="line"><span class="string">    let company = substitute(company,&#x27;\n&#x27;,&#x27;&#x27;,&#x27;&#x27;)</span></span><br><span class="line"><span class="string">    if company =~ &#x27;COMPANY:&#x27;</span></span><br><span class="line"><span class="string">echohl WarningMsg | echo &quot;</span>unix env <span class="variable">$COMPANY</span>: Undefined variable. Please set_env COMPANY <span class="keyword">in</span> ~/.cshrc<span class="string">&quot; | echohl None</span></span><br><span class="line"><span class="string">    endif</span></span><br><span class="line"><span class="string">    &quot;</span>===============================================================</span><br><span class="line">    <span class="string">&quot;        Add File Header</span></span><br><span class="line"><span class="string">    &quot;</span>===============================================================</span><br><span class="line"><span class="built_in">let</span> filename = expand(<span class="string">&quot;%&quot;</span>)</span><br><span class="line">call append(0,  <span class="string">&quot;// =================================================================================&quot;</span>)</span><br><span class="line">call append(1,  <span class="string">&quot;// Project Name : Test&quot;</span>)</span><br><span class="line">call append(2,  <span class="string">&quot;// Device       : Xlinx&quot;</span>)</span><br><span class="line">call append(3,  <span class="string">&quot;// Author       : HonkW&quot;</span>)</span><br><span class="line">call append(4,  <span class="string">&quot;// Email        : honkwang93@gmail.com&quot;</span>)</span><br><span class="line">call append(5,  <span class="string">&quot;// Website      : https://honk.wang&quot;</span>)</span><br><span class="line">call append(6,  <span class="string">&quot;// Create Time  : &quot;</span>.strftime(<span class="string">&quot;%Y/%m/%d %H:%M&quot;</span>))</span><br><span class="line">call append(7,  <span class="string">&quot;// File Name    : .v&quot;</span>)</span><br><span class="line">call append(8,  <span class="string">&quot;// Module Name  :&quot;</span>)</span><br><span class="line">call append(9,  <span class="string">&quot;// &quot;</span>)</span><br><span class="line">call append(10, <span class="string">&quot;// CopyRight(c) 2020, NPIC&quot;</span>)</span><br><span class="line">call append(11, <span class="string">&quot;// All Rights Reserved&quot;</span>)</span><br><span class="line">call append(12, <span class="string">&quot;// &quot;</span>)</span><br><span class="line">call append(13, <span class="string">&quot;// =================================================================================&quot;</span>)</span><br><span class="line">call append(14, <span class="string">&quot;// Modification History:&quot;</span>)</span><br><span class="line">call append(15, <span class="string">&quot;// Date         By              Version                 Change Description&quot;</span>)</span><br><span class="line">call append(16, <span class="string">&quot;// ---------------------------------------------------------------------------------&quot;</span>)</span><br><span class="line">call append(17, <span class="string">&quot;// &quot;</span>.strftime(<span class="string">&quot;%x&quot;</span>).<span class="string">&quot;    Honk            1.0                     Original&quot;</span>)</span><br><span class="line">call append(18, <span class="string">&quot;// &quot;</span>)</span><br><span class="line">call append(19, <span class="string">&quot;// =================================================================================&quot;</span>)</span><br><span class="line">call append(20, <span class="string">&quot;`timescale  1ns/1ns&quot;</span>)</span><br><span class="line">call append(21, <span class="string">&quot;module&quot;</span>)</span><br><span class="line">call append(22, <span class="string">&quot;( &quot;</span>)</span><br><span class="line">call append(23, <span class="string">&quot; &quot;</span>)</span><br><span class="line">call append(24, <span class="string">&quot; &quot;</span>)</span><br><span class="line">call append(25, <span class="string">&quot;);&quot;</span>)</span><br><span class="line">  call append(26, <span class="string">&quot; &quot;</span>)  </span><br><span class="line">  call append(27, <span class="string">&quot;endmodule&quot;</span>)  </span><br><span class="line">    call cursor(8,19)</span><br><span class="line">endfunction <span class="string">&quot;&#125;&#125;&#125;2</span></span><br></pre></td></tr></table></figure><p>当然，为了和我的vimrc统一，添加了map的快捷键设置，快捷键依旧保持为&quot;hd&quot;，然后删除了vimrc中冗长且不好修改的头部文件配置代码。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">map hd                                                                  :call AddHeader()&lt;CR&gt;i</span><br></pre></td></tr></table></figure><hr /><h3 id="实例模块搜索"><a class="markdownIt-Anchor" href="#实例模块搜索"></a> 实例/模块搜索</h3><p>可以通过Search菜单栏上下搜索.v文件中多个例化模块，或者搜索module。</p><hr /><h3 id="单行多行注释"><a class="markdownIt-Anchor" href="#单行多行注释"></a> 单行/多行注释</h3><p>单行注释可直接通过快捷键或菜单栏点击生成，格式可在automatic.vim代码中自行修改。</p><p>多行注释注意先选中需要注释的内容再使用快捷键或菜单栏点击，否则可能出现异常。</p><hr /><h3 id="自动例化"><a class="markdownIt-Anchor" href="#自动例化"></a> 自动例化</h3><p>自动进行模块的端口例化。下面以一个例子作为说明：</p><p>假设已完成模块的文件名为sdrmc_state.v，模块名为sdrmc_state，模块端口如下。</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> sdrmc_state (</span><br><span class="line">   <span class="comment">// Outputs</span></span><br><span class="line">   pre_sd_ras_p, pre_sd_cas_p, pre_sd_we_p, pre_ld_brst, pre_ld_rcd, </span><br><span class="line">   pre_ld_cslt, pre_clr_ref, pre_sd_doe_n, pre_sd_doe2_n, </span><br><span class="line">   pre_sd_ready, pre_sd_add_mx, pre_ad_tri,</span><br><span class="line">   <span class="comment">// Inputs</span></span><br><span class="line">   Reset, Clk, brst_end, cslt_end, rcd_end, auto_ref, ki_end, </span><br><span class="line">   clr_ref, Act_st, write_st</span><br><span class="line">   );</span><br><span class="line">   <span class="keyword">output</span> pre_sd_ras_p, pre_sd_cas_p, pre_sd_we_p, pre_ld_brst;</span><br><span class="line">   <span class="keyword">output</span> pre_ld_rcd, pre_ld_cslt, pre_clr_ref, pre_ad_tri;</span><br><span class="line">   <span class="keyword">output</span> pre_sd_doe_n, pre_sd_doe2_n, pre_sd_ready, pre_sd_add_mx; </span><br><span class="line">   </span><br><span class="line">   <span class="keyword">input</span> Reset, Clk, brst_end, cslt_end, rcd_end;</span><br><span class="line">   <span class="keyword">input</span> auto_ref, ki_end, clr_ref;</span><br><span class="line">   <span class="keyword">input</span> [<span class="number">2</span>:<span class="number">0</span>] Act_st;</span><br><span class="line">   <span class="keyword">input</span> write_st;</span><br></pre></td></tr></table></figure><p>在<strong>同一文件夹下</strong>新建一个.v文件。假设在这个文件例化sdrmc_state模块，则只需要在代码中输入(注意autoinst的输入方法，以及最后必须加分号)：</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sdrmc_state u_sdrmc_state(<span class="comment">/*autoinst*/</span>);</span><br></pre></td></tr></table></figure><p>鼠标点中模块实例化行（autoinst关键字所在行），然后选择菜单Verilog -&gt; AutoInst， 即完成自动例化功能 （或使用快捷键）。</p><p>自动例化状态如下：</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">   sdrmc_state u_sdrmc_state(<span class="comment">/*autoinst*/</span></span><br><span class="line">    <span class="variable">.pre_sd_ras_p</span>                   (pre_sd_ras_p                               ), <span class="comment">// output</span></span><br><span class="line">    <span class="variable">.pre_ld_rcd</span>                     (pre_ld_rcd                                 ), <span class="comment">// output</span></span><br><span class="line">    <span class="variable">.pre_sd_doe_n</span>                   (pre_sd_doe_n                               ), <span class="comment">// output</span></span><br><span class="line">   </span><br><span class="line">    <span class="variable">.Reset</span>                          (Reset                                      ), <span class="comment">// input </span></span><br><span class="line">    <span class="variable">.auto_ref</span>                       (auto_ref                                   ), <span class="comment">// input </span></span><br><span class="line">    <span class="variable">.Act_st</span>                         (Act_st[<span class="number">2</span>:<span class="number">0</span>]                                ), <span class="comment">// input </span></span><br><span class="line">    <span class="variable">.write_st</span>                       (write_st                                   )  <span class="comment">// input </span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>同时，原作者开发了几个实用的自动例化的相关功能</p><ul><li><p>自动例化更新：</p><p>功能用于提示当子模块有接口改变后，快速的知道有哪些模块被添加或者被删除<br />提示会用注释的方式在模块port例化行的末尾加上，修改连线代码后，请自行删除。<br />// INST_NEW 表示当前行，为子模块新增加的信号<br />// INST_DEL  表示当前行，子模块已经将此信号删除</p><p>鼠标点中模块实例化行（autoinst关键字所在行），然后选择菜单 Verilog -&gt; AutoInstUpdate,    AutoInstUpdateOrder 是将连线顺序重新排布为子模块接口定义的顺序，方便对应</p></li><li><p>添加例化模块的端口方向：</p><p>鼠标点中模块实例化行（autoinst关键字所在行），然后选择菜单 Verilog -&gt; AppendPortDirectionToInst</p><p>注意这个功能是没有添加端口方向的例化模块使用的。如果使用的原作者的自动例化功能，是自动附带端口方向的。如果想取消这个功能，可以到automatic.vim的function AutoInst中修改部分代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> value[7] == 1</span><br><span class="line"><span class="built_in">let</span> tmp_line = tmp_line . suffix_margin . <span class="string">&#x27;)  // &#x27;</span> . io_dir</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">let</span> tmp_line = tmp_line . suffix_margin . <span class="string">&#x27;), // &#x27;</span> . io_dir</span><br><span class="line">endif</span><br></pre></td></tr></table></figure><p>修改为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> value[7] == 1</span><br><span class="line"><span class="built_in">let</span> tmp_line = tmp_line . suffix_margin . <span class="string">&#x27;)  &#x27;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">let</span> tmp_line = tmp_line . suffix_margin . <span class="string">&#x27;), &#x27;</span></span><br><span class="line">endif</span><br></pre></td></tr></table></figure></li></ul><hr /><h3 id="自动定义wire-reg"><a class="markdownIt-Anchor" href="#自动定义wire-reg"></a> 自动定义wire / reg</h3><p>（以下为原作者语）：此功能强烈依赖用户良好的verilog编码习惯，自己尝试后<strong>请慎重选择试用</strong>。  菜单Verilog -&gt; AutoDef, 脚本会在autodef（请用注释符包起来）位置开始自动定义数据类型，当然不能识别所有的结构，未完全定义部分（会有提示，但测试中有遇到没有完全提示的情况）请自行添加到autodef结构之外， 避免重新autodef时被脚本删除。</p><p>此功能与vimrc中的配置有所重复（可查看vimrc配置文件），故暂不使用。</p><hr /><h3 id="语法高亮"><a class="markdownIt-Anchor" href="#语法高亮"></a> 语法高亮</h3><p>根据<a href="https://blog.csdn.net/sxlwzl/article/details/23753081?utm_source=distribute.pc_relevant.none-task">vim语法高亮—verilog/systemverilog</a>的说法：</p><p>This script extends Verilog syntax highlighting, which comes along with Vim 6.3, and adds SystemVerilog stuff to it. It will recognize Verilog and SystemVerilog syntax in *.v, *.vh and *.sv files. The new syntax is named as “verilog_systemverilog”. If your scripts are loaded correctly, you should see this syntax name when you execute the Vim command “:set syntax?” in your Verilog/SystemVerilog files.</p><p>因此只有需要使用systemverilog的时候才需要，不然vim是自带verilog语法高亮的。安装步骤在链接中也有说，将三个文件分别拷贝到对应位置即可。此自动化脚本的压缩包内也包含语法高亮相关的配置文件。因暂时不使用systemverilog，故不使用此语法高亮扩展。</p><hr /><h3 id="成对标签跳转"><a class="markdownIt-Anchor" href="#成对标签跳转"></a> 成对标签跳转</h3><p>此脚本将matchit.vim文件放到plugin文件夹中，并在vimrc添加对标如下:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> b:match_words = <span class="string">&#x27;\&lt;function\&gt;:\&lt;endfunction\&gt;,&#x27;</span></span><br><span class="line">\ . <span class="string">&#x27;\&lt;task\&gt;:\&lt;endtask\&gt;,&#x27;</span></span><br><span class="line">\ . <span class="string">&#x27;\&lt;module\&gt;:\&lt;endmodule\&gt;,&#x27;</span></span><br><span class="line">\ . <span class="string">&#x27;\&lt;begin\&gt;:\&lt;end\&gt;,&#x27;</span></span><br><span class="line">\ . <span class="string">&#x27;\&lt;case\&gt;:\&lt;endcase\&gt;,&#x27;</span></span><br><span class="line">\ . <span class="string">&#x27;\&lt;class\&gt;:\&lt;endclass\&gt;,&#x27;</span></span><br><span class="line">\ . <span class="string">&#x27;\&lt;for\&gt;:\&lt;endfor\&gt;,&#x27;</span></span><br><span class="line">\ . <span class="string">&#x27;\&lt;while\&gt;:\&lt;endwhile\&gt;,&#x27;</span></span><br><span class="line">\ . <span class="string">&#x27;\&lt;specify\&gt;:\&lt;endspecify\&gt;,&#x27;</span></span><br><span class="line">\ . <span class="string">&#x27;\&lt;generate\&gt;:\&lt;endgenerate\&gt;,&#x27;</span></span><br><span class="line">\ . <span class="string">&#x27;\&lt;\(ifdef\|ifndef\)\&gt;:\&lt;\(else\|elsif\)\&gt;:\&lt;endif\&gt;,&#x27;</span></span><br><span class="line">\ . <span class="string">&#x27;`\&lt;\(ifdef\|ifndef\)\&gt;:`\&lt;\(else\|elsif\)\&gt;:`\&lt;endif\&gt;&#x27;</span></span><br></pre></td></tr></table></figure><p>参考<a href="https://www.jianshu.com/u/c59586ada722">基于GVim搭建Verilog开发环境</a>，因Gvim的macro文件夹自带matchit.vim，只是平时未使用。因此直接在vimrc中添加路径即可。另外添加部分成对标签。最终在vimrc中添加如下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">&quot;</span>                        成对标签设置</span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">source <span class="variable">$VIMRUNTIME</span>/macros/matchit.vim</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">let b:match_ignorecase=0</span></span><br><span class="line"><span class="string">let b:match_words=</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;begin\&gt;:\&lt;end\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;if\&gt;:\&lt;else\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;module\&gt;:\&lt;endmodule\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;class\&gt;:\&lt;endclass\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;program\&gt;:\&lt;endprogram\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;clocking\&gt;:\&lt;endclocking\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;property\&gt;:\&lt;endproperty\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;sequence\&gt;:\&lt;endsequence\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;package\&gt;:\&lt;endpackage\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;covergroup\&gt;:\&lt;endgroup\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;primitive\&gt;:\&lt;endprimitive\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;specify\&gt;:\&lt;endspecify\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;generate\&gt;:\&lt;endgenerate\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;interface\&gt;:\&lt;endinterface\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;function\&gt;:\&lt;endfunction\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;task\&gt;:\&lt;endtask\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;for\&gt;:\&lt;endfor\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;while\&gt;:\&lt;endwhile\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;specify\&gt;:\&lt;endspecify\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;generate\&gt;:\&lt;endgenerate\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;case\&gt;\|\&lt;casex\&gt;\|\&lt;casez\&gt;:\&lt;endcase\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;fork\&gt;:\&lt;join\&gt;\|\&lt;join_any\&gt;\|\&lt;join_none\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;`ifdef\&gt;:`else\&gt;:`endif\&gt;,&#x27;</span></span><br></pre></td></tr></table></figure><p>配置完成后，在Gvim中使用&quot;%&quot;操作，即可在各类配对的符号（针对verilog/systemverilog代码）中跳转。</p><hr /><h3 id="字体缩放"><a class="markdownIt-Anchor" href="#字体缩放"></a> 字体缩放</h3><p>zoom.vim放入plugin文件夹即可使用。使用&quot;+“和”-&quot;进行Gvim字体大小的缩放。</p><hr /><h3 id="rtltree"><a class="markdownIt-Anchor" href="#rtltree"></a> RTLTree</h3><p>暂未使用，这里介绍一下找到的相关资料。主要想弄一个RTL结构树类型的插件。在搜索过程中找到了如下资料：</p><p><a href="http://bbs.eetop.cn/thread-862619-1-1.html">vtags3.0: vim/gvim中进行verilog语言信号追踪、显示拓扑插件，最新3.0版</a> ，然后根据这个找到了原版在vimscript上的原版<a href="https://www.vim.org/scripts/script.php?script_id=5494">vtags : verdi like, verilog code signal trace and show topo script</a>。试了半天之后发现指导书均基于linux，貌似在windows下Gvim没法用，故放弃。</p><p>在这个自动化脚本里也有ctag_gen文件，作者也是用这个生成ctags，然后形成rtltree。尝试了发现不行，不知具体原因。</p><p>在<a href="https://www.jianshu.com/p/972655d2b722">基于GVim搭建Verilog开发环境</a>中介绍了universal-ctags的使用，使用 <code>git-bash ctags -R --languages=Verilog /path/to/the/code</code> 也成功生成了ctags，只是未尝试结合verilog_systemverilog的模块跳转功能。感觉这个功能影响不大，因为这个依然没有RTLTree显示的功能。</p><p><strong>最新进展（2020-2-28）：脚本ctags这个可以在windows下使用，需要perl。如果有git-bash很简单，git自带perl。可以用perl -v 查看自己的bash是否带perl。将所有.v文件和ctags_gen文件放到一个文件夹下，在git-bash中用perl输入：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">perl ctags_gen *.v</span><br></pre></td></tr></table></figure><p><strong>这样就会在文件夹下生成一个tag文件。这样在Gvim中使用:Rtltree命令即可通过NERDTree插件查看Rtltree结构。注意这个脚本不是很稳定，有些时候调用会出问题。建议还是使用IDE，不在编辑器里使用。</strong></p><hr /><h2 id="插件设置"><a class="markdownIt-Anchor" href="#插件设置"></a> 插件设置</h2><p>安装一些Verilog的Gvim插件。</p><h3 id="vundle插件管理"><a class="markdownIt-Anchor" href="#vundle插件管理"></a> Vundle插件管理</h3><p>Vundle安装参考<a href="https://www.jianshu.com/p/972655d2b722">基于GVim搭建Verilog开发环境</a>以及其源网站<a href="https://github.com/VundleVim">VundleVim</a>/<a href="https://github.com/VundleVim/Vundle.vim">Vundle.vim</a>。vimrc添加配置如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">&quot;</span>                           插件设置</span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">&quot;</span> 设置运行路径，注意新建系统变量VIM指向Gvim的安装目录</span><br><span class="line"><span class="keyword">if</span>(has(<span class="string">&#x27;win32&#x27;</span>) || has(<span class="string">&#x27;win64&#x27;</span>))</span><br><span class="line">    <span class="built_in">set</span> rtp+=<span class="variable">$VIM</span>/vimfiles/bundle/Vundle.vim</span><br><span class="line">    <span class="built_in">let</span> path=<span class="string">&#x27;$VIM/vimfiles/bundle&#x27;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">set</span> rtp+=~/.vim/bundle/Vundle.vim</span><br><span class="line">    <span class="built_in">let</span> path=<span class="string">&#x27;~/.vim/bundle&#x27;</span></span><br><span class="line">endif</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; -----------------------插件列表------------------------------</span></span><br><span class="line"><span class="string">call vundle#begin(&#x27;<span class="variable">$VIM</span>/vimfiles/bundle&#x27;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span>使用Vundle管理插件</span><br><span class="line">Plugin <span class="string">&#x27;VundleVim/Vundle.vim&#x27;</span></span><br><span class="line"><span class="string">&quot;多插件列表</span></span><br><span class="line"><span class="string">Plugin &#x27;AutoComplPop&#x27;                   &quot;</span>自动补全窗口弹出</span><br><span class="line">Plugin <span class="string">&#x27;vim-syntastic/syntastic&#x27;</span>        <span class="string">&quot;语法检查</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">call vundle#end()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span>允许插件  </span><br><span class="line">filetype plugin on</span><br></pre></td></tr></table></figure><p>注意#begin位置那里要加入路径，不然可能生成两个bundle文件夹安装插件，因为默认在.vim文件夹下自建插件文件夹。</p><p>配置完成后启动Gvim，在Gvim中输入运行 <code>:PluginInstall</code> 安装插件。运行<code>:PluginList</code>查看安装了的插件。 若要卸载插件，先在vimrc中删除Plugin，然后启动Gvim，运行<code>:PluginClean</code>即可卸载插件。</p><p>这样的安装和卸载方法可以减少复制粘贴文件的麻烦，便于管理使用的插件。</p><hr /><h3 id="autocomplpop自动补全"><a class="markdownIt-Anchor" href="#autocomplpop自动补全"></a> AutoComplPop自动补全</h3><p>输入时自动弹出补全窗口。直接使用Vundle安装即可。参考<a href="https://github.com/vim-scripts">vim-scripts</a>/<a href="https://github.com/vim-scripts/AutoComplPop">AutoComplPop</a>。根据网上的说法，YCM集成了多个插件，功能上应该更好。但鉴于本人暂时不需要复杂的自动补全，故没有选择YCM。</p><hr /><h3 id="syntastic代码检查"><a class="markdownIt-Anchor" href="#syntastic代码检查"></a> Syntastic代码检查</h3><p><a href="https://blog.csdn.net/weixin_34040079/article/details/88356905">Vim之代码异步检测插件 ALE</a>、 <a href="https://blog.csdn.net/demorngel/article/details/69052789">Vim插件之ale</a>中阐述主要有三种代码检查插件</p><ul><li>Syntastic</li><li>Neomake</li><li>ALE</li></ul><p>其中ALE为异步检测，效果最好，但是需要vim8以上的版本。本人之前一直使用的是Vim7.3，编译的要求也不高，只做简单的规则检查，所以暂时用的老版的syntastic。</p><p>使用Vundle安装syntastic过程中可能有故障，关闭打开的cmd窗口，忽略那些错误提示完成安装即可。</p><p>另外需要给syntastic配置Linter，这里使用iverilog。windows版本下载：<a href="http://bleyer.org/icarus/">Icarus Verilog for Windows</a>。安装后需要将iverilog加入系统变量$PATH中，这样就可以在命令行里调用iverilog命令了。参考<a href="https://blog.csdn.net/John_Y97/article/details/88869296">Windows 10下配置和使用Icarus Verilog (iverilog)和GTKWave</a>和<a href="https://blog.csdn.net/weixin_34281477/article/details/93372241">Windows上使用iverilog+gtkwave仿真</a></p><p>配置vimrc中的syntastic不正确会有类似故障信息如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">E484: Cannot open file /tmp/vnmSZpx/4  </span><br><span class="line">Error detected while processing function SyntasticInfo..310..309..247:  </span><br><span class="line">line  3:  </span><br><span class="line">E171: Missing :endif  </span><br><span class="line">Error detected while processing function SyntasticInfo..310:  </span><br></pre></td></tr></table></figure><p>Google后发现 <a href="https://github.com/vim-syntastic/syntastic/issues/1384">Error messages when enabling syntastic #1384</a>以及<a href="https://github.com/vim-syntastic">vim-syntastic</a>/<a href="https://github.com/vim-syntastic/syntastic">syntastic</a>的FAQ的4.1里都有说，应该是shellslash的平台问题，syntastic_shell设置成git-bash后正常。但后来在syntastic调用git-bash一阵子再使用时出现故障</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash: /c: Is a directory /usr/bin/bash: Exit 126.</span><br></pre></td></tr></table></figure><p>切换回命令行又可以正常使用。原因未知。</p><p>修改的vimrc配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&quot;语法检查插件配置</span><br><span class="line">set statusline+=%#warningmsg#</span><br><span class="line">set statusline+=%&#123;SyntasticStatuslineFlag()&#125;</span><br><span class="line">set statusline+=%*</span><br><span class="line"></span><br><span class="line">&quot;显示消息气泡</span><br><span class="line">let g:syntastic_enable_balloons = 1</span><br><span class="line"></span><br><span class="line">&quot;</span><br><span class="line">let g:syntastic_always_populate_loc_list = 1</span><br><span class="line"></span><br><span class="line">&quot;不自动进行代码检查</span><br><span class="line">let g:syntastic_auto_loc_list = 1</span><br><span class="line">let g:syntastic_check_on_open = 0</span><br><span class="line">let g:syntastic_check_on_wq = 0</span><br><span class="line">let g:syntastic_mode_map = &#123;</span><br><span class="line">        \ &quot;mode&quot;: &quot;passive&quot;,</span><br><span class="line">        \ &quot;active_filetypes&quot;: [&quot;&quot;],</span><br><span class="line">        \ &quot;passive_filetypes&quot;: [&quot;verilog&quot;] &#125;</span><br><span class="line">        </span><br><span class="line">&quot; 设置linter为iverilog,这里需要在系统变量PATH中添加iverilog的位置，这样shell才能识别iverilog指令</span><br><span class="line">let g:syntastic_verilog_checkers = [&#x27;iverilog&#x27;]</span><br><span class="line"></span><br><span class="line">&quot; 设置shell路径，注意这玩意不接受cmd.exe这种windows的shell，不设置就有问题(????????????????????????????????)</span><br><span class="line">&quot; let g:syntastic_shell = &amp;shell</span><br><span class="line"></span><br><span class="line">nnoremap check :SyntasticCheck&lt;CR&gt;</span><br></pre></td></tr></table></figure><p>其中，mode_map设置主要为了关闭保存文件自动代码检查的功能。另外映射了check为代码检查的快捷键。代码编写完成后运行<code>:SyntasticCheck</code>或直接输入<code>check</code>即进行检查，效果如下：</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/syntastic.jpg" alt="syntastic" /></p><p>之后换新版Gvim考虑把代码检查换成ALE。</p><hr /><h1 id="终版vimrc配置"><a class="markdownIt-Anchor" href="#终版vimrc配置"></a> 终版vimrc配置</h1><p>按照之前需要的添加部分配置，然后删除了部分代码（添加always块和头部已经加入了自动化脚本的功能）。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">&quot;</span> Decription: 用于编写Verilog的vimrc文件，<span class="keyword">for</span> windows</span><br><span class="line"><span class="string">&quot; Ver：1.1</span></span><br><span class="line"><span class="string">&quot;</span> Maintainer: Honk</span><br><span class="line"><span class="string">&quot; Date: 2020-2-19</span></span><br><span class="line"><span class="string">&quot;</span> =============================================================</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">&quot;</span>                        基础设置</span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">set nocompatible                            &quot;</span>关闭vi兼容模式</span><br><span class="line"><span class="built_in">source</span> <span class="variable">$VIMRUNTIME</span>/vimrc_example.vim</span><br><span class="line"><span class="built_in">source</span> <span class="variable">$VIMRUNTIME</span>/mswin.vim</span><br><span class="line">behave mswin                                <span class="string">&quot;部分按键按照windows模式操作，解决crtl+c、ctrl+v、ctrl+a等windows下的快捷键  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span>Windows Gvim 默认配置</span><br><span class="line"><span class="built_in">set</span> diffexpr=MyDiff()</span><br><span class="line"><span class="keyword">function</span>! MyDiff()</span><br><span class="line">  <span class="built_in">let</span> opt = <span class="string">&#x27;-a --binary &#x27;</span></span><br><span class="line">  <span class="keyword">if</span> &amp;diffopt =~ <span class="string">&#x27;icase&#x27;</span> | <span class="built_in">let</span> opt = opt . <span class="string">&#x27;-i &#x27;</span> | endif</span><br><span class="line">  <span class="keyword">if</span> &amp;diffopt =~ <span class="string">&#x27;iwhite&#x27;</span> | <span class="built_in">let</span> opt = opt . <span class="string">&#x27;-b &#x27;</span> | endif</span><br><span class="line">  <span class="built_in">let</span> arg1 = v:fname_in</span><br><span class="line">  <span class="keyword">if</span> arg1 =~ <span class="string">&#x27; &#x27;</span> | <span class="built_in">let</span> arg1 = <span class="string">&#x27;&quot;&#x27;</span> . arg1 . <span class="string">&#x27;&quot;&#x27;</span> | endif</span><br><span class="line">  <span class="built_in">let</span> arg2 = v:fname_new</span><br><span class="line">  <span class="keyword">if</span> arg2 =~ <span class="string">&#x27; &#x27;</span> | <span class="built_in">let</span> arg2 = <span class="string">&#x27;&quot;&#x27;</span> . arg2 . <span class="string">&#x27;&quot;&#x27;</span> | endif</span><br><span class="line">  <span class="built_in">let</span> arg3 = v:fname_out</span><br><span class="line">  <span class="keyword">if</span> arg3 =~ <span class="string">&#x27; &#x27;</span> | <span class="built_in">let</span> arg3 = <span class="string">&#x27;&quot;&#x27;</span> . arg3 . <span class="string">&#x27;&quot;&#x27;</span> | endif</span><br><span class="line">  <span class="built_in">let</span> eq = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">if</span> <span class="variable">$VIMRUNTIME</span> =~ <span class="string">&#x27; &#x27;</span></span><br><span class="line">    <span class="keyword">if</span> &amp;sh =~ <span class="string">&#x27;\&lt;cmd&#x27;</span></span><br><span class="line">      <span class="built_in">let</span> cmd = <span class="string">&#x27;&quot;&quot;&#x27;</span> . <span class="variable">$VIMRUNTIME</span> . <span class="string">&#x27;\diff&quot;&#x27;</span></span><br><span class="line">      <span class="built_in">let</span> eq = <span class="string">&#x27;&quot;&#x27;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">let</span> cmd = substitute(<span class="variable">$VIMRUNTIME</span>, <span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;&quot; &#x27;</span>, <span class="string">&#x27;&#x27;</span>) . <span class="string">&#x27;\diff&quot;&#x27;</span></span><br><span class="line">    endif</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">let</span> cmd = <span class="variable">$VIMRUNTIME</span> . <span class="string">&#x27;\diff&#x27;</span></span><br><span class="line">  endif</span><br><span class="line">  silent execute <span class="string">&#x27;!&#x27;</span> . cmd . <span class="string">&#x27; &#x27;</span> . opt . arg1 . <span class="string">&#x27; &#x27;</span> . arg2 . <span class="string">&#x27; &gt; &#x27;</span> . arg3 . eq</span><br><span class="line">endfunction</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">&quot;</span>                        成对标签设置</span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">source <span class="variable">$VIMRUNTIME</span>/macros/matchit.vim</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">let b:match_ignorecase=0</span></span><br><span class="line"><span class="string">let b:match_words=</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;begin\&gt;:\&lt;end\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;if\&gt;:\&lt;else\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;module\&gt;:\&lt;endmodule\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;class\&gt;:\&lt;endclass\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;program\&gt;:\&lt;endprogram\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;clocking\&gt;:\&lt;endclocking\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;property\&gt;:\&lt;endproperty\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;sequence\&gt;:\&lt;endsequence\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;package\&gt;:\&lt;endpackage\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;covergroup\&gt;:\&lt;endgroup\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;primitive\&gt;:\&lt;endprimitive\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;specify\&gt;:\&lt;endspecify\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;generate\&gt;:\&lt;endgenerate\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;interface\&gt;:\&lt;endinterface\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;function\&gt;:\&lt;endfunction\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;task\&gt;:\&lt;endtask\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;for\&gt;:\&lt;endfor\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;while\&gt;:\&lt;endwhile\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;specify\&gt;:\&lt;endspecify\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;generate\&gt;:\&lt;endgenerate\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;case\&gt;\|\&lt;casex\&gt;\|\&lt;casez\&gt;:\&lt;endcase\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;fork\&gt;:\&lt;join\&gt;\|\&lt;join_any\&gt;\|\&lt;join_none\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;`ifdef\&gt;:`else\&gt;:`endif\&gt;,&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> =============================================================</span><br><span class="line"><span class="string">&quot;                           插件设置</span></span><br><span class="line"><span class="string">&quot;</span> =============================================================</span><br><span class="line"><span class="string">&quot; 设置运行路径，注意新建系统变量VIM指向Gvim的安装目录</span></span><br><span class="line"><span class="string">if(has(&#x27;win32&#x27;) || has(&#x27;win64&#x27;))</span></span><br><span class="line"><span class="string">    set rtp+=<span class="variable">$VIM</span>/vimfiles/bundle/Vundle.vim</span></span><br><span class="line"><span class="string">    let path=&#x27;<span class="variable">$VIM</span>/vimfiles/bundle&#x27;</span></span><br><span class="line"><span class="string">else</span></span><br><span class="line"><span class="string">    set rtp+=~/.vim/bundle/Vundle.vim</span></span><br><span class="line"><span class="string">    let path=&#x27;~/.vim/bundle&#x27;</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> -----------------------插件列表------------------------------</span><br><span class="line">call vundle<span class="comment">#begin(&#x27;$VIM/vimfiles/bundle&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;使用Vundle管理插件</span></span><br><span class="line"><span class="string">Plugin &#x27;VundleVim/Vundle.vim&#x27;</span></span><br><span class="line"><span class="string">&quot;</span>多插件列表</span><br><span class="line">Plugin <span class="string">&#x27;AutoComplPop&#x27;</span>                   <span class="string">&quot;自动补全窗口弹出</span></span><br><span class="line"><span class="string">Plugin &#x27;vim-syntastic/syntastic&#x27;        &quot;</span>语法检查</span><br><span class="line"></span><br><span class="line">call vundle<span class="comment">#end()</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;允许插件  </span></span><br><span class="line"><span class="string">filetype plugin on</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span>语法检查插件配置</span><br><span class="line"><span class="built_in">set</span> statusline+=%<span class="comment">#warningmsg#</span></span><br><span class="line"><span class="built_in">set</span> statusline+=%&#123;SyntasticStatuslineFlag()&#125;</span><br><span class="line"><span class="built_in">set</span> statusline+=%*</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;显示消息气泡</span></span><br><span class="line"><span class="string">let g:syntastic_enable_balloons = 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span></span><br><span class="line"><span class="built_in">let</span> g:syntastic_always_populate_loc_list = 1</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;不自动进行代码检查</span></span><br><span class="line"><span class="string">let g:syntastic_auto_loc_list = 1</span></span><br><span class="line"><span class="string">let g:syntastic_check_on_open = 0</span></span><br><span class="line"><span class="string">let g:syntastic_check_on_wq = 0</span></span><br><span class="line"><span class="string">let g:syntastic_mode_map = &#123;</span></span><br><span class="line"><span class="string">        \ &quot;</span>mode<span class="string">&quot;: &quot;</span>passive<span class="string">&quot;,</span></span><br><span class="line"><span class="string">        \ &quot;</span>active_filetypes<span class="string">&quot;: [&quot;</span><span class="string">&quot;],</span></span><br><span class="line"><span class="string">        \ &quot;</span>passive_filetypes<span class="string">&quot;: [&quot;</span>verilog<span class="string">&quot;] &#125;</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">&quot;</span> 设置linter为iverilog,这里需要在系统变量PATH中添加iverilog的位置，这样shell才能识别iverilog指令</span><br><span class="line"><span class="built_in">let</span> g:syntastic_verilog_checkers = [<span class="string">&#x27;iverilog&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; 设置shell路径，注意这玩意不接受cmd.exe这种windows的shell，不设置就有问题(????????????????????????????????)</span></span><br><span class="line"><span class="string">&quot;</span> <span class="built_in">let</span> g:syntastic_shell = &amp;shell</span><br><span class="line"></span><br><span class="line">nnoremap check :SyntasticCheck&lt;CR&gt;</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">&quot;</span>                           界面设置</span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">set guifont=courier_new:b:h16               &quot;</span>windows设定字体风格字号</span><br><span class="line"><span class="string">&quot;set guifont=Courier\ 100\ Pitch            &quot;</span>linux  设定字体风格字号</span><br><span class="line"><span class="built_in">set</span> number                                  <span class="string">&quot;显示行号</span></span><br><span class="line"><span class="string">set background=light                        &quot;</span>背景</span><br><span class="line">colorscheme desert                          <span class="string">&quot;设定配色方案</span></span><br><span class="line"><span class="string">syntax on                                   &quot;</span>语法高亮</span><br><span class="line">highlight Pmenu    guibg=darkgrey  guifg=white  <span class="string">&quot;修改自动补全窗口的配色</span></span><br><span class="line"><span class="string">highlight PmenuSel guibg=lightgrey guifg=white</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> =============================================================</span><br><span class="line"><span class="string">&quot;                           tab键设置</span></span><br><span class="line"><span class="string">&quot;</span> =============================================================</span><br><span class="line"><span class="built_in">set</span> expandtab                               <span class="string">&quot;tab自动转换空格</span></span><br><span class="line"><span class="string">set softtabstop=4                           &quot;</span>使得按退格键时可以一次删掉 4 个空格</span><br><span class="line"><span class="built_in">set</span> tabstop=4                               <span class="string">&quot;设定tab长度为4</span></span><br><span class="line"><span class="string">set shiftwidth=4                            &quot;</span>设定 &lt;&lt; 和 &gt;&gt; 命令移动时的宽度为 4</span><br><span class="line"><span class="string">&quot;set autoindent                             &quot;</span>设定自动缩进</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">&quot;</span>                           其他设置</span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">&quot;</span><span class="built_in">set</span> ignorecase                             <span class="string">&quot;搜索时忽略大小写</span></span><br><span class="line"><span class="string">&quot;</span><span class="built_in">set</span> ignorecase  smartcase                  <span class="string">&quot;搜索时忽略大小写，但在有一个或以上大写字母时仍保持对大小写敏感</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> ----------Vim打开文件时，会出现另一个同名的备份文件----------</span><br><span class="line"><span class="built_in">set</span> nowritebackup                           <span class="string">&quot;写入期间不进行备份</span></span><br><span class="line"><span class="string">&quot;</span><span class="built_in">set</span> writebackup                            <span class="string">&quot;写入期间备份</span></span><br><span class="line"><span class="string">set nobackup                                &quot;</span>不保存备份</span><br><span class="line"><span class="string">&quot;set backup                                 &quot;</span>保存备份</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; -------------------------------------------------------------</span></span><br><span class="line"><span class="string">set helplang=en                             &quot;</span>设置英文帮助</span><br><span class="line"><span class="string">&quot;set helplang=cn                            &quot;</span>设置中文帮助</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> directory=<span class="variable">$VIMHOME</span>\swp,.</span><br><span class="line"><span class="built_in">set</span> showcmd                                 <span class="string">&quot;显示在最右下角展示最近输入的命令</span></span><br><span class="line"><span class="string">set backspace=indent,eol,start              &quot;</span>不设定在插入状态下无法用退格键和delete键删除回车符</span><br><span class="line"><span class="built_in">set</span> foldclose=all                           <span class="string">&quot;设置为自动关闭折叠</span></span><br><span class="line"><span class="string">set fileformats=dos                         &quot;</span>消除文件格式不正确的出现^M</span><br><span class="line"><span class="string">&quot;set encoding=utf-8                         &quot;</span>解决中文乱码</span><br><span class="line"><span class="built_in">set</span> termencoding=utf-8 </span><br><span class="line"><span class="built_in">set</span> fileencodings=utf-8,chinese,latin-1 </span><br><span class="line"><span class="string">&quot; -------------------------------------------------------------</span></span><br><span class="line"><span class="string">if has(&quot;</span>win32<span class="string">&quot;) </span></span><br><span class="line"><span class="string">    set fileencoding=chinese </span></span><br><span class="line"><span class="string">else </span></span><br><span class="line"><span class="string">    set fileencoding=utf-8 </span></span><br><span class="line"><span class="string">endif </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span>language messages zh_CN.utf-8</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">&quot;</span>                           IDE设置</span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> -------------------------文件窗口----------------------------</span><br><span class="line"><span class="string">&quot;creat tags</span></span><br><span class="line"><span class="string">set tags=tags;</span></span><br><span class="line"><span class="string">set autochdir</span></span><br><span class="line"><span class="string">&quot;</span>窗口管理</span><br><span class="line"><span class="built_in">let</span> Tlist_Show_One_File=1</span><br><span class="line"><span class="built_in">let</span> Tlist_Exit_OnlyWindow=1</span><br><span class="line"><span class="string">&quot;let g:winManagerWindowLayout=&#x27;FileExplorer|TagList&#x27;</span></span><br><span class="line"><span class="string">let g:winManagerWindowLayout=&#x27;FileExplorer&#x27;</span></span><br><span class="line"><span class="string">nmap vp :WMToggle&lt;cr&gt;</span></span><br><span class="line"><span class="string">&quot;</span>多文件编辑</span><br><span class="line"><span class="built_in">let</span> g:miniBufExplMapCTabSwitchBufs=1</span><br><span class="line"><span class="built_in">let</span> g:miniBufExplMapWindowsNavVim=1</span><br><span class="line"><span class="built_in">let</span> g:miniBufExplMapWindowNavArrows=1</span><br><span class="line"><span class="built_in">let</span> g:miniBufExplorerMoreThanOne=1</span><br><span class="line"><span class="string">&quot;grep</span></span><br><span class="line"><span class="string">nnoremap &lt;silent&gt; &lt;F10&gt; :Grep&lt;CR&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> -------------------------编辑vimrc--------------------------</span><br><span class="line"><span class="string">&quot;按F4或输入ee编辑_vimrc</span></span><br><span class="line"><span class="string">:map &lt;F4&gt; :source <span class="variable">$VIMHOME</span>/_vimrc&lt;cr&gt;:w!&lt;cr&gt;</span></span><br><span class="line"><span class="string">:map ,ee :e <span class="variable">$VIMHOME</span>/_vimrc&lt;cr&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> ------------------------------------------------------------</span><br><span class="line">cnoremap &lt;silent&gt; sp :sp&lt;cr&gt;</span><br><span class="line">cnoremap &lt;silent&gt; vp :vsplit&lt;cr&gt;</span><br><span class="line"><span class="string">&quot;:map gb :bd&lt;cr&gt;&lt;F4&gt;                        &quot;</span>键盘键的映射，将gb快捷键映射为:bd回车键。即新建一个vim窗口。</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">&quot;</span>                           自定义设置</span><br><span class="line"><span class="string">&quot; nore 表示非递归</span></span><br><span class="line"><span class="string">&quot;</span> n 表示在普通模式下生效</span><br><span class="line"><span class="string">&quot; v 表示在可视模式下生效</span></span><br><span class="line"><span class="string">&quot;</span> i 表示在插入模式下生效</span><br><span class="line"><span class="string">&quot; c 表示在命令行模式下生效</span></span><br><span class="line"><span class="string">&quot;</span> =============================================================</span><br><span class="line"><span class="string">&quot; -------------------------例化变量----------------------------</span></span><br><span class="line"><span class="string">&quot;</span>F2例化光标选中变量(命令模式下)</span><br><span class="line">:map &lt;F2&gt; ebmsd^:.s/^ *\([a-zA-Z][a-zA-Z0-9_]*\).*$/        .\1                        (\1                        ),/&lt;cr&gt;*^24ldw24ldw`sj</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; -------------------------生成时间----------------------------</span></span><br><span class="line"><span class="string">&quot;</span>F2生成当前时间,格式为 2019/11/20 23:39:15(插入模式下)</span><br><span class="line"><span class="string">&quot;:imap &lt;F2&gt; &lt;C-R&gt;=strftime(&quot;</span>%c<span class="string">&quot;)&lt;CR&gt;</span></span><br><span class="line"><span class="string">&quot;</span>F2生成当前时间,格式为 2019/11/20(插入模式下)</span><br><span class="line">:imap &lt;F2&gt; &lt;C-R&gt;=strftime(<span class="string">&quot;%x&quot;</span>)&lt;CR&gt;</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; ------------------------产生代码段---------------------------</span></span><br><span class="line"><span class="string">&quot;</span>添加reg/wire注释</span><br><span class="line">:map ;cr i&lt;cr&gt;&lt;space&gt;&lt;ESC&gt;0dwi//========================================================================\&lt;cr&gt;&lt;space&gt;&lt;ESC&gt;0dwi// =========== Define Parameter and Internal signals =========== &lt;cr&gt;&lt;space&gt;&lt;ESC&gt;0dwi//========================================================================/&lt;ESC&gt;</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;添加MAIN CODE注释</span></span><br><span class="line"><span class="string">:map ;cc i&lt;cr&gt;&lt;space&gt;&lt;ESC&gt;0dwi//=============================================================================&lt;cr&gt;&lt;space&gt;&lt;ESC&gt;0dwi//**************    Main Code   **************&lt;cr&gt;&lt;space&gt;&lt;ESC&gt;0dwi//=============================================================================&lt;ESC&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> ----------------------端口/变量声明--------------------------</span><br><span class="line"><span class="string">&quot;选中单词声明为wire</span></span><br><span class="line"><span class="string">:map ;dw ebmsd^:.s/^ *\([a-zA-Z][a-zA-Z0-9_]*\).*$/wire \1;/&lt;cr&gt;&lt;F8&gt;e*N`sj</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span>选中单词声明为reg</span><br><span class="line">:map ;dr ebmsd^:.s/^ *\([a-zA-Z][a-zA-Z0-9_]*\).*$/reg \1;/&lt;cr&gt;&lt;F8&gt;e*N`sj</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;选中单词声明为input</span></span><br><span class="line"><span class="string">:map ;i ebmsd^:.s/^ *\([a-zA-Z][a-zA-Z0-9_]*\).*$/        input   \1,/&lt;cr&gt;&lt;F7&gt;e*N`sj</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span>选中单词声明为output wire</span><br><span class="line">:map ;ow ebmsd^:.s/^ *\([a-zA-Z][a-zA-Z0-9_]*\).*$/        output  wire    \1,/&lt;cr&gt;&lt;F7&gt;bb*N`sj</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;选中单词声明为output reg</span></span><br><span class="line"><span class="string">:map ;or ebmsd^:.s/^ *\([a-zA-Z][a-zA-Z0-9_]*\).*$/        output  reg     \1,/&lt;cr&gt;&lt;F7&gt;bb*N`sj</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> ------------------------对齐格式---------------------------</span><br><span class="line"><span class="string">&quot;调整格式以便对齐（例化后的）</span></span><br><span class="line"><span class="string">:map &lt;F6&gt; :s/^ *\./        ./&lt;cr&gt;^f(i                              &lt;ESC&gt;f)i                               &lt;ESC&gt;^24ldw24ldwa  &lt;ESC&gt;hdwj</span></span><br><span class="line"><span class="string">&quot;</span>调整module定义中的变量，逗号和注释的位置</span><br><span class="line">:map &lt;F7&gt; 0f,bi                          &lt;ESC&gt;^24ldwf,i                                 &lt;ESC&gt;^48ldwa        &lt;ESC&gt;dw^j</span><br><span class="line"><span class="string">&quot;调整reg，wire所在行的变量，逗号和注释的位置</span></span><br><span class="line"><span class="string">:map &lt;F8&gt; 0f;bi                                &lt;ESC&gt;032ldwf;i                                    &lt;ESC&gt;064ldwa        &lt;ESC&gt;dw^j</span></span><br><span class="line"><span class="string">&quot;</span>调整module定义中的逗号和注释的位置（定义中不包含input、output时使用）</span><br><span class="line">:map &lt;F9&gt; 0f,i                                                    &lt;ESC&gt;056ldwa        &lt;ESC&gt;dw&lt;ESC&gt;^j</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; --------------------------其他-----------------------------</span></span><br><span class="line"><span class="string">&quot;</span>:map &lt;F11&gt; :s/$/         /&lt;cr&gt;j</span><br><span class="line"><span class="string">&quot;:map &lt;F12&gt; :s/^\([^ ]*\)/NET &quot;</span>\1<span class="string">&quot;                           IOSTANDARD = LVTTL \| LOC = &quot;</span><span class="string">&quot;          ;/&lt;cr&gt;028ldw06l*Nj</span></span><br><span class="line"><span class="string">&quot;</span>:map ;f :s/\([0-9]\) *<span class="string">&quot;/\1&quot;</span>/g&lt;cr&gt;j</span><br><span class="line"><span class="string">&quot;:map &lt;F12&gt; :.w! F:\software_for_FPGA\eg.v&lt;cr&gt;:source F:\software_for_FPGA\eg.v&lt;cr&gt;</span></span><br><span class="line"><span class="string">&quot;</span>删除TAB</span><br><span class="line"><span class="string">&quot;:map ;t :%s/\t/    /g&lt;cr&gt;:w&lt;cr&gt;</span></span><br><span class="line"><span class="string">&quot;</span>产生U_DLY</span><br><span class="line"><span class="string">&quot;:imap &lt;F4&gt; &lt;space&gt;&lt;= #U_DLY </span></span><br><span class="line"><span class="string">&quot;</span>删除</span><br><span class="line">:map ;m :%s/</span><br><span class="line">:autocmd Bufread :<span class="built_in">source</span> <span class="variable">$VIMHOME</span>/_vimrc&lt;cr&gt;:w!&lt;cr&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;====restore your cursor position in a file over several editing sessions</span></span><br><span class="line"><span class="string">au BufReadPost * if line(&quot;</span><span class="string">&#x27;\&quot;&quot;) &gt; 0|if line(&quot;&#x27;</span>\&quot;<span class="string">&quot;) &lt;= line(&quot;</span>$<span class="string">&quot;)|exe(&quot;</span>norm <span class="string">&#x27;\&quot;&quot;)|else|exe &quot;norm $&quot;|endif|endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">&quot;                           RTLTree</span></span><br><span class="line"><span class="string">&quot; 暂未使用，暂时关闭</span></span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">let t:RtlTreeVlogDefine = 0</span></span><br><span class="line"><span class="string">&quot;map &lt;F4&gt; :NERDTree&lt;CR&gt;</span></span><br><span class="line"><span class="string">&quot;map &lt;F5&gt; :RtlTree&lt;CR&gt;</span></span><br></pre></td></tr></table></figure><hr /><h1 id="其他设置"><a class="markdownIt-Anchor" href="#其他设置"></a> 其他设置</h1><p>还有一些网上查到的相关配置文件，但是没有暂时还没有使用的，暂时列在下面作为备用。以后学习新东西需要用时方便参考。</p><h2 id="中文帮助"><a class="markdownIt-Anchor" href="#中文帮助"></a> 中文帮助</h2><p>Vim自带help文档可以切换为中文，参考链接如下：</p><p><a href="http://vimcdoc.sourceforge.net/">Vim帮助文档首页</a></p><p><a href="http://vimcdoc.sourceforge.net/doc/help.html">Vim中文帮助文档网页版</a></p><p><a href="https://sourceforge.net/projects/vimcdoc/">下载链接</a></p><p>下载完成，按步骤安装。安装完成后打开vim，输入：help ，这时vim中的help信息已经是中文了。 当然，可以通过下面命令来切换帮助语言。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> helplang=cn<span class="string">&quot;设置中文帮助</span></span><br><span class="line"><span class="string">set helplang=en&quot;</span>设置英文帮助</span><br></pre></td></tr></table></figure><hr /><h2 id="参考"><a class="markdownIt-Anchor" href="#参考"></a> 参考</h2><p>部分发现了但是未用到的配置资料。</p><h3 id="提高verilog和uvm-testbench-coding效率的利器"><a class="markdownIt-Anchor" href="#提高verilog和uvm-testbench-coding效率的利器"></a> <a href="http://bbs.eetop.cn/thread-304611-1-5.html">提高Verilog和UVM testbench coding效率的利器</a></h3><p>Verilog部分</p><ul><li><p>自动产生端口信号列表；</p></li><li><p>自动产生信号声明；</p></li><li><p>自动例化（能够识别例化之后连接的变更，优于emacs）</p></li><li><p>自动产生一些有规律的代码（类似generate语句） 用户定义参数化模版</p><p>UVM部分</p></li><li><p>自动产生interface</p></li><li><p>自动产生uvm_field_*</p></li><li><p>各种uvm类的模版</p></li></ul><h3 id="vtags-verdi-like-verilog-code-signal-trace-and-show-topo-script"><a class="markdownIt-Anchor" href="#vtags-verdi-like-verilog-code-signal-trace-and-show-topo-script"></a> <a href="https://www.vim.org/scripts/script.php?script_id=5494">vtags : verdi like, verilog code signal trace and show topo script</a></h3><h1 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 总结</h1><p>为了在Windows下使用Gvim折腾了这么久，确实能得出一个结论：Linux开发比Windows方便很多。</p><hr /><h1 id="最新v82版gvim修改2020-02-26-231525-创建"><a class="markdownIt-Anchor" href="#最新v82版gvim修改2020-02-26-231525-创建"></a> 最新v8.2版Gvim修改（2020-02-26 23:15:25 创建）</h1><p>继续之前Gvim搭建Verilog编程环境的基础上，修改了部分配置和插件，针对最新的Gvim-v8.2。</p><h2 id="vimrc更改"><a class="markdownIt-Anchor" href="#vimrc更改"></a> vimrc更改</h2><p>主要把代码段功能全部搬移到了automatic.vim文件里。另外对对齐操作进行了修改，使得input/output和reg/wire等的对齐也是一致的。另外autoinst的格式与对齐操作的格式的不一样，这个没去改，要用的时候直接重新对齐一下就好了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">&quot;</span> Decription: 用于Verilog的vimrc文件，<span class="keyword">for</span> windows</span><br><span class="line"><span class="string">&quot; Maintainer: Honk</span></span><br><span class="line"><span class="string">&quot;</span> Date: 2020-2-26</span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> =============================================================</span><br><span class="line"><span class="string">&quot;                        基础设置</span></span><br><span class="line"><span class="string">&quot;</span> =============================================================</span><br><span class="line"><span class="built_in">set</span> nocompatible                            <span class="string">&quot;关闭vi兼容模式</span></span><br><span class="line"><span class="string">source <span class="variable">$VIMRUNTIME</span>/vimrc_example.vim        &quot;</span> Vim with all enhancements</span><br><span class="line"><span class="built_in">source</span> <span class="variable">$VIMRUNTIME</span>/mswin.vim                <span class="string">&quot; Remap a few keys for Windows behavior 部分按键按照windows模式操作，解决crtl+c、ctrl+v、ctrl+a等windows下的快捷键</span></span><br><span class="line"><span class="string">behave mswin                                &quot;</span> Mouse behavior (the Windows way) 鼠标操作</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; Use the internal diff if available.</span></span><br><span class="line"><span class="string">&quot;</span> Otherwise use the special <span class="string">&#x27;diffexpr&#x27;</span> <span class="keyword">for</span> Windows.</span><br><span class="line"><span class="keyword">if</span> &amp;diffopt !~<span class="comment"># &#x27;internal&#x27;</span></span><br><span class="line">  <span class="built_in">set</span> diffexpr=MyDiff()</span><br><span class="line">endif</span><br><span class="line"><span class="keyword">function</span> MyDiff()</span><br><span class="line">  <span class="built_in">let</span> opt = <span class="string">&#x27;-a --binary &#x27;</span></span><br><span class="line">  <span class="keyword">if</span> &amp;diffopt =~ <span class="string">&#x27;icase&#x27;</span> | <span class="built_in">let</span> opt = opt . <span class="string">&#x27;-i &#x27;</span> | endif</span><br><span class="line">  <span class="keyword">if</span> &amp;diffopt =~ <span class="string">&#x27;iwhite&#x27;</span> | <span class="built_in">let</span> opt = opt . <span class="string">&#x27;-b &#x27;</span> | endif</span><br><span class="line">  <span class="built_in">let</span> arg1 = v:fname_in</span><br><span class="line">  <span class="keyword">if</span> arg1 =~ <span class="string">&#x27; &#x27;</span> | <span class="built_in">let</span> arg1 = <span class="string">&#x27;&quot;&#x27;</span> . arg1 . <span class="string">&#x27;&quot;&#x27;</span> | endif</span><br><span class="line">  <span class="built_in">let</span> arg1 = substitute(arg1, <span class="string">&#x27;!&#x27;</span>, <span class="string">&#x27;\!&#x27;</span>, <span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">  <span class="built_in">let</span> arg2 = v:fname_new</span><br><span class="line">  <span class="keyword">if</span> arg2 =~ <span class="string">&#x27; &#x27;</span> | <span class="built_in">let</span> arg2 = <span class="string">&#x27;&quot;&#x27;</span> . arg2 . <span class="string">&#x27;&quot;&#x27;</span> | endif</span><br><span class="line">  <span class="built_in">let</span> arg2 = substitute(arg2, <span class="string">&#x27;!&#x27;</span>, <span class="string">&#x27;\!&#x27;</span>, <span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">  <span class="built_in">let</span> arg3 = v:fname_out</span><br><span class="line">  <span class="keyword">if</span> arg3 =~ <span class="string">&#x27; &#x27;</span> | <span class="built_in">let</span> arg3 = <span class="string">&#x27;&quot;&#x27;</span> . arg3 . <span class="string">&#x27;&quot;&#x27;</span> | endif</span><br><span class="line">  <span class="built_in">let</span> arg3 = substitute(arg3, <span class="string">&#x27;!&#x27;</span>, <span class="string">&#x27;\!&#x27;</span>, <span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> <span class="variable">$VIMRUNTIME</span> =~ <span class="string">&#x27; &#x27;</span></span><br><span class="line">    <span class="keyword">if</span> &amp;sh =~ <span class="string">&#x27;\&lt;cmd&#x27;</span></span><br><span class="line">      <span class="keyword">if</span> empty(&amp;shellxquote)</span><br><span class="line">        <span class="built_in">let</span> l:shxq_sav = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="built_in">set</span> shellxquote&amp;</span><br><span class="line">      endif</span><br><span class="line">      <span class="built_in">let</span> cmd = <span class="string">&#x27;&quot;&#x27;</span> . <span class="variable">$VIMRUNTIME</span> . <span class="string">&#x27;\diff&quot;&#x27;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">let</span> cmd = substitute(<span class="variable">$VIMRUNTIME</span>, <span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;&quot; &#x27;</span>, <span class="string">&#x27;&#x27;</span>) . <span class="string">&#x27;\diff&quot;&#x27;</span></span><br><span class="line">    endif</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">let</span> cmd = <span class="variable">$VIMRUNTIME</span> . <span class="string">&#x27;\diff&#x27;</span></span><br><span class="line">  endif</span><br><span class="line">  <span class="built_in">let</span> cmd = substitute(cmd, <span class="string">&#x27;!&#x27;</span>, <span class="string">&#x27;\!&#x27;</span>, <span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">  silent execute <span class="string">&#x27;!&#x27;</span> . cmd . <span class="string">&#x27; &#x27;</span> . opt . arg1 . <span class="string">&#x27; &#x27;</span> . arg2 . <span class="string">&#x27; &gt; &#x27;</span> . arg3</span><br><span class="line">  <span class="keyword">if</span> exists(<span class="string">&#x27;l:shxq_sav&#x27;</span>)</span><br><span class="line">    <span class="built_in">let</span> &amp;shellxquote=l:shxq_sav</span><br><span class="line">  endif</span><br><span class="line">endfunction</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">&quot;</span>                          界面设置</span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">set guifont=courier_new:b:h16               &quot;</span>windows设定字体风格字号</span><br><span class="line"><span class="built_in">set</span> number                                  <span class="string">&quot;显示行号</span></span><br><span class="line"><span class="string">set background=light                        &quot;</span>背景</span><br><span class="line">colorscheme desert                          <span class="string">&quot;设定配色方案</span></span><br><span class="line"><span class="string">syntax on                                   &quot;</span>语法高亮</span><br><span class="line">highlight Pmenu    guibg=darkgrey  guifg=white  <span class="string">&quot;修改自动补全窗口的配色</span></span><br><span class="line"><span class="string">highlight PmenuSel guibg=darkblue guifg=white</span></span><br><span class="line"><span class="string">set nofoldenable                            &quot;</span>关闭折叠</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">&quot;</span>                           tab键设置</span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">set expandtab                               &quot;</span>tab自动转换空格</span><br><span class="line"><span class="built_in">set</span> softtabstop=4                           <span class="string">&quot;使得按退格键时可以一次删掉 4 个空格</span></span><br><span class="line"><span class="string">set tabstop=4                               &quot;</span>设定tab长度为4</span><br><span class="line"><span class="built_in">set</span> shiftwidth=4                            <span class="string">&quot;设定 &lt;&lt; 和 &gt;&gt; 命令移动时的宽度为 4</span></span><br><span class="line"><span class="string">&quot;</span><span class="built_in">set</span> autoindent                             <span class="string">&quot;设定自动缩进</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> =============================================================</span><br><span class="line"><span class="string">&quot;                           其他设置</span></span><br><span class="line"><span class="string">&quot;</span> =============================================================</span><br><span class="line"><span class="string">&quot;set ignorecase                             &quot;</span>搜索时忽略大小写</span><br><span class="line"><span class="string">&quot;set ignorecase  smartcase                  &quot;</span>搜索时忽略大小写，但在有一个或以上大写字母时仍保持对大小写敏感</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; ----------Vim打开文件时，会出现另一个同名的备份文件----------</span></span><br><span class="line"><span class="string">set nowritebackup                           &quot;</span>写入期间不进行备份</span><br><span class="line"><span class="string">&quot;set writebackup                            &quot;</span>写入期间备份</span><br><span class="line"><span class="built_in">set</span> nobackup                                <span class="string">&quot;不保存备份</span></span><br><span class="line"><span class="string">&quot;</span><span class="built_in">set</span> backup                                 <span class="string">&quot;保存备份</span></span><br><span class="line"><span class="string">set noundofile                              &quot;</span>不保存撤销文件</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; -------------------------语言问题----------------------------</span></span><br><span class="line"><span class="string">set helplang=en                             &quot;</span>设置英文帮助</span><br><span class="line"><span class="string">&quot;set helplang=cn                            &quot;</span>设置中文帮助</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> directory=<span class="variable">$VIMHOME</span>\swp,.</span><br><span class="line"><span class="built_in">set</span> showcmd                                 <span class="string">&quot;显示在最右下角展示最近输入的命令</span></span><br><span class="line"><span class="string">set backspace=indent,eol,start              &quot;</span>不设定在插入状态下无法用退格键和delete键删除回车符</span><br><span class="line"><span class="built_in">set</span> foldclose=all                           <span class="string">&quot;设置为自动关闭折叠</span></span><br><span class="line"><span class="string">set fileformats=dos                         &quot;</span>消除文件格式不正确的出现^M</span><br><span class="line"><span class="string">&quot;set encoding=utf-8                         &quot;</span>解决中文乱码</span><br><span class="line"><span class="built_in">set</span> termencoding=utf-8 </span><br><span class="line"><span class="built_in">set</span> fileencodings=utf-8,chinese,latin-1 </span><br><span class="line"><span class="string">&quot; -------------------------------------------------------------</span></span><br><span class="line"><span class="string">if has(&quot;</span>win32<span class="string">&quot;) </span></span><br><span class="line"><span class="string">    set fileencoding=chinese </span></span><br><span class="line"><span class="string">else </span></span><br><span class="line"><span class="string">    set fileencoding=utf-8 </span></span><br><span class="line"><span class="string">endif </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> =============================================================</span><br><span class="line"><span class="string">&quot;                           插件设置</span></span><br><span class="line"><span class="string">&quot;</span> =============================================================</span><br><span class="line"><span class="string">&quot; 设置运行路径，注意新建系统变量VIM指向Gvim的安装目录</span></span><br><span class="line"><span class="string">if(has(&#x27;win32&#x27;) || has(&#x27;win64&#x27;))</span></span><br><span class="line"><span class="string">    set rtp+=<span class="variable">$VIM</span>/vimfiles/bundle/Vundle.vim</span></span><br><span class="line"><span class="string">    let path=&#x27;<span class="variable">$VIM</span>/vimfiles/bundle&#x27;</span></span><br><span class="line"><span class="string">else</span></span><br><span class="line"><span class="string">    set rtp+=~/.vim/bundle/Vundle.vim</span></span><br><span class="line"><span class="string">    let path=&#x27;~/.vim/bundle&#x27;</span></span><br><span class="line"><span class="string">endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> -----------------------插件列表------------------------------</span><br><span class="line">call vundle<span class="comment">#begin(&#x27;$VIM/vimfiles/bundle&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;使用Vundle管理插件</span></span><br><span class="line"><span class="string">Plugin &#x27;VundleVim/Vundle.vim&#x27;</span></span><br><span class="line"><span class="string">&quot;</span>多插件列表</span><br><span class="line">Plugin <span class="string">&#x27;AutoComplPop&#x27;</span>                   <span class="string">&quot;自动补全窗口弹出</span></span><br><span class="line"><span class="string">Plugin &#x27;preservim/nerdtree&#x27;             &quot;</span>显示当前路径目录树结构</span><br><span class="line"><span class="string">&quot;Plugin &#x27;dense-analysis/ale&#x27;             &quot;</span>ALE-Asynchronous Lint Engine语法检查</span><br><span class="line">Plugin <span class="string">&#x27;vim-syntastic/syntastic&#x27;</span>        <span class="string">&quot;syntastic语法检查</span></span><br><span class="line"><span class="string">Plugin &#x27;vim-airline/vim-airline&#x27;        &quot;</span>状态栏美化</span><br><span class="line"></span><br><span class="line">call vundle<span class="comment">#end()</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;总是打开Location List（相当于QuickFix）窗口，如果你发现syntastic因为与其他插件冲突而经常崩溃，将下面选项置0</span></span><br><span class="line"><span class="string">let g:syntastic_always_populate_loc_list = 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span>不自动进行代码检查</span><br><span class="line"><span class="built_in">let</span> g:syntastic_auto_loc_list = 1</span><br><span class="line"><span class="built_in">let</span> g:syntastic_check_on_open = 0</span><br><span class="line"><span class="built_in">let</span> g:syntastic_check_on_wq = 0</span><br><span class="line"><span class="built_in">let</span> g:syntastic_mode_map = &#123;</span><br><span class="line">        \ <span class="string">&quot;mode&quot;</span>: <span class="string">&quot;passive&quot;</span>,</span><br><span class="line">        \ <span class="string">&quot;active_filetypes&quot;</span>: [<span class="string">&quot;&quot;</span>],</span><br><span class="line">        \ <span class="string">&quot;passive_filetypes&quot;</span>: [<span class="string">&quot;verilog&quot;</span>] &#125;</span><br><span class="line">        </span><br><span class="line"><span class="string">&quot; 设置linter为iverilog</span></span><br><span class="line"><span class="string">let g:syntastic_verilog_checkers = [&#x27;iverilog&#x27;]&quot;</span>允许插件 </span><br><span class="line"></span><br><span class="line">filetype plugin on</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">&quot;</span>                        成对标签设置</span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">source <span class="variable">$VIMRUNTIME</span>/macros/matchit.vim</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">let b:match_ignorecase=0</span></span><br><span class="line"><span class="string">let b:match_words=</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;begin\&gt;:\&lt;end\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;if\&gt;:\&lt;else\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;module\&gt;:\&lt;endmodule\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;class\&gt;:\&lt;endclass\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;program\&gt;:\&lt;endprogram\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;clocking\&gt;:\&lt;endclocking\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;property\&gt;:\&lt;endproperty\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;sequence\&gt;:\&lt;endsequence\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;package\&gt;:\&lt;endpackage\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;covergroup\&gt;:\&lt;endgroup\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;primitive\&gt;:\&lt;endprimitive\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;specify\&gt;:\&lt;endspecify\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;generate\&gt;:\&lt;endgenerate\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;interface\&gt;:\&lt;endinterface\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;function\&gt;:\&lt;endfunction\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;task\&gt;:\&lt;endtask\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;for\&gt;:\&lt;endfor\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;while\&gt;:\&lt;endwhile\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;specify\&gt;:\&lt;endspecify\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;generate\&gt;:\&lt;endgenerate\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;case\&gt;\|\&lt;casex\&gt;\|\&lt;casez\&gt;:\&lt;endcase\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;\&lt;fork\&gt;:\&lt;join\&gt;\|\&lt;join_any\&gt;\|\&lt;join_none\&gt;,&#x27; .</span></span><br><span class="line"><span class="string">  \ &#x27;`ifdef\&gt;:`else\&gt;:`endif\&gt;,&#x27;</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">&quot;</span> =============================================================</span><br><span class="line"><span class="string">&quot;                        窗口管理设置</span></span><br><span class="line"><span class="string">&quot;</span> =============================================================</span><br><span class="line"><span class="string">&quot;creat tags</span></span><br><span class="line"><span class="string">set tags=tags;</span></span><br><span class="line"><span class="string">set autochdir</span></span><br><span class="line"><span class="string">&quot;</span>窗口管理</span><br><span class="line"><span class="built_in">let</span> Tlist_Show_One_File=1</span><br><span class="line"><span class="built_in">let</span> Tlist_Exit_OnlyWindow=1</span><br><span class="line"><span class="string">&quot;let g:winManagerWindowLayout=&#x27;FileExplorer|TagList&#x27;</span></span><br><span class="line"><span class="string">let g:winManagerWindowLayout=&#x27;FileExplorer&#x27;</span></span><br><span class="line"><span class="string">nmap vp :WMToggle&lt;cr&gt;</span></span><br><span class="line"><span class="string">&quot;</span>多文件编辑</span><br><span class="line"><span class="built_in">let</span> g:miniBufExplMapCTabSwitchBufs=1</span><br><span class="line"><span class="built_in">let</span> g:miniBufExplMapWindowsNavVim=1</span><br><span class="line"><span class="built_in">let</span> g:miniBufExplMapWindowNavArrows=1</span><br><span class="line"><span class="built_in">let</span> g:miniBufExplorerMoreThanOne=1</span><br><span class="line"><span class="string">&quot;grep</span></span><br><span class="line"><span class="string">nnoremap &lt;silent&gt; &lt;F10&gt; :Grep&lt;CR&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> =============================================================</span><br><span class="line"><span class="string">&quot;                           自定义设置</span></span><br><span class="line"><span class="string">&quot;</span> nore 表示非递归</span><br><span class="line"><span class="string">&quot; n 表示在普通模式下生效</span></span><br><span class="line"><span class="string">&quot;</span> v 表示在可视模式下生效</span><br><span class="line"><span class="string">&quot; i 表示在插入模式下生效</span></span><br><span class="line"><span class="string">&quot;</span> c 表示在命令行模式下生效</span><br><span class="line"><span class="string">&quot; =============================================================</span></span><br><span class="line"><span class="string">&quot;</span> -------------------------编辑vimrc--------------------------</span><br><span class="line"><span class="string">&quot;按F4或输入ee编辑_vimrc</span></span><br><span class="line"><span class="string">:map &lt;F4&gt; :source <span class="variable">$VIMHOME</span>/_vimrc&lt;cr&gt;:w!&lt;cr&gt;</span></span><br><span class="line"><span class="string">:map ,ee :e <span class="variable">$VIMHOME</span>/_vimrc&lt;cr&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> ------------------------------------------------------------</span><br><span class="line">cnoremap &lt;silent&gt; sp :sp&lt;cr&gt;</span><br><span class="line">cnoremap &lt;silent&gt; vp :vsplit&lt;cr&gt;</span><br><span class="line"><span class="string">&quot;:map gb :bd&lt;cr&gt;&lt;F4&gt;                        &quot;</span>键盘键的映射，将gb快捷键映射为:bd回车键。即新建一个vim窗口。</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; -------------------------例化变量----------------------------</span></span><br><span class="line"><span class="string">&quot;</span>F2例化光标选中变量(命令模式下)</span><br><span class="line">:map &lt;F2&gt; ebmsd^:.s/^ *\([a-zA-Z][a-zA-Z0-9_]*\).*$/        .\1                        (\1                        ),/&lt;cr&gt;*^24ldw24ldw`sj</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; ----------------------端口/变量声明--------------------------</span></span><br><span class="line"><span class="string">&quot;</span>选中单词声明为wire</span><br><span class="line">:map ;dw ebmsd^:.s/^ *\([a-zA-Z][a-zA-Z0-9_]*\).*$/    wire \1;/&lt;cr&gt;&lt;F8&gt;e*N`sj</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;选中单词声明为reg</span></span><br><span class="line"><span class="string">:map ;dr ebmsd^:.s/^ *\([a-zA-Z][a-zA-Z0-9_]*\).*$/    reg \1;/&lt;cr&gt;&lt;F8&gt;e*N`sj</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span>选中单词声明为input</span><br><span class="line">:map ;i ebmsd^:.s/^ *\([a-zA-Z][a-zA-Z0-9_]*\).*$/    input   \1,/&lt;cr&gt;&lt;F7&gt;e*N`sj</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;选中单词声明为output wire</span></span><br><span class="line"><span class="string">:map ;ow ebmsd^:.s/^ *\([a-zA-Z][a-zA-Z0-9_]*\).*$/    output  wire    \1,/&lt;cr&gt;&lt;F7&gt;bb*N`sj</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span>选中单词声明为output reg</span><br><span class="line">:map ;or ebmsd^:.s/^ *\([a-zA-Z][a-zA-Z0-9_]*\).*$/    output  reg     \1,/&lt;cr&gt;&lt;F7&gt;bb*N`sj</span><br><span class="line"></span><br><span class="line"><span class="string">&quot; ------------------------对齐格式---------------------------</span></span><br><span class="line"><span class="string">&quot;</span>调整格式以便对齐（例化后的）</span><br><span class="line">:map &lt;F6&gt; :s/^ *\./        ./&lt;cr&gt;^f(i                              &lt;ESC&gt;f)i                               &lt;ESC&gt;^24ldw24ldwa  &lt;ESC&gt;hdwj</span><br><span class="line"><span class="string">&quot;调整module定义中的变量，逗号和注释的位置</span></span><br><span class="line"><span class="string">:map &lt;F7&gt; 0f,bi                          &lt;ESC&gt;^24ldwf,i                                 &lt;ESC&gt;^48ldwa        &lt;ESC&gt;dw^j</span></span><br><span class="line"><span class="string">&quot;</span>调整reg，wire所在行的变量，逗号和注释的位置</span><br><span class="line">:map &lt;F8&gt; 0f;bi                          &lt;ESC&gt;028ldwf;i                                 &lt;ESC&gt;052ldwa        &lt;ESC&gt;dw^j</span><br><span class="line"><span class="string">&quot;调整module定义中的逗号和注释的位置（定义中不包含input、output时使用）</span></span><br><span class="line"><span class="string">:map &lt;F9&gt; 0f,i                                                    &lt;ESC&gt;056ldwa        &lt;ESC&gt;dw&lt;ESC&gt;^j</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> -------------------------生成时间----------------------------</span><br><span class="line"><span class="string">&quot;F2生成当前时间,格式为 2019/11/20 23:39:15(插入模式下)</span></span><br><span class="line"><span class="string">&quot;</span>:imap &lt;F2&gt; &lt;C-R&gt;=strftime(<span class="string">&quot;%c&quot;</span>)&lt;CR&gt;</span><br><span class="line"><span class="string">&quot;F2生成当前时间,格式为 2019/11/20(插入模式下)</span></span><br><span class="line"><span class="string">:imap &lt;F2&gt; &lt;C-R&gt;=strftime(&quot;</span>%x<span class="string">&quot;)&lt;CR&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span> -------------------------其他设置----------------------------</span><br><span class="line"><span class="string">&quot;删除TAB </span></span><br><span class="line"><span class="string">&quot;</span>:map ;t :%s/\t/    /g&lt;cr&gt;:w&lt;cr&gt;</span><br><span class="line"><span class="string">&quot;TAB 转化为空格</span></span><br><span class="line"><span class="string">:map ;t :retab&lt;cr&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;</span>产生U_DLY</span><br><span class="line"><span class="string">&quot;:imap &lt;F4&gt; &lt;space&gt;&lt;= #U_DLY</span></span><br><span class="line"><span class="string">&quot;</span>删除</span><br><span class="line">:map ;m :%s/</span><br><span class="line">:autocmd Bufread :<span class="built_in">source</span> <span class="variable">$VIMHOME</span>/_vimrc&lt;cr&gt;:w!&lt;cr&gt;</span><br><span class="line"><span class="string">&quot;====restore your cursor position in a file over several editing sessions</span></span><br><span class="line"><span class="string">au BufReadPost * if line(&quot;</span><span class="string">&#x27;\&quot;&quot;) &gt; 0|if line(&quot;&#x27;</span>\&quot;<span class="string">&quot;) &lt;= line(&quot;</span>$<span class="string">&quot;)|exe(&quot;</span>norm <span class="string">&#x27;\&quot;&quot;)|else|exe &quot;norm $&quot;|endif|endif</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">let t:RtlTreeVlogDefine = 0</span></span><br><span class="line"><span class="string">&quot;map &lt;F4&gt; :NERDTree&lt;CR&gt;</span></span><br><span class="line"><span class="string">&quot;map &lt;F5&gt; :RtlTree&lt;CR&gt;</span></span><br></pre></td></tr></table></figure><hr /><h2 id="脚本更改"><a class="markdownIt-Anchor" href="#脚本更改"></a> 脚本更改</h2><p>针对automatic.vim做了部分修改:</p><ol><li>添加一键生成三段式状态机（快捷键fsm）；</li><li>头文件生成快捷键由hd改为header（鉴于hd可能误操作）；</li><li>删掉了check快捷键（使用:SyntasticCheck命令直接检查，主要是点击后用TAB也很方便，不太需要map这个快捷键）；</li><li>生成主代码和wire/reg部分注释的快捷键由vimrc搬移到脚本中（快捷键;cr和;cc）。</li></ol><hr /><h2 id="插件更改202036更新"><a class="markdownIt-Anchor" href="#插件更改202036更新"></a> 插件更改（2020.3.6更新）</h2><p>原计划更改代码检查工具从Syntastic变为异步的ALE，但使用Vundle安装ALE并配置之后，可以在ALEInfo看到Liner报出来的故障信息（且是多次执行的结果，表示其在异步调用Linter，且调用成功），但在Vim界面上没有任何标识，原因未知，进入iverilog.vim中echom其匹配error/warning/syntaxerr消息的那个函数结果好像是空的，不知道是脚本哪里有问题。在google和百度搜索了半天后无解，遂放弃。但在安装ALE中顺便安装了NERDTree和airline-vim，后来也没有再卸载。</p><ul><li><p>NERDTree：文件结构树</p></li><li><p>airline-vim：状态栏美化</p></li></ul><p>安装过程依旧使用Vundle插件管理。</p><ul><li>VisIncr（新添加）：列操作，添加递增递减一列数字</li></ul><hr /><h2 id="部分计划"><a class="markdownIt-Anchor" href="#部分计划"></a> 部分计划</h2><ul><li>为了学习脚本中的ctag和调用RTLTree，以后找机会学一下Perl</li><li>部分功能问题在windows下没有解决方案，但是linux下有，可以一试。</li></ul><h2 id="部分有用链接"><a class="markdownIt-Anchor" href="#部分有用链接"></a> 部分有用链接</h2><p>学习过程中还搜索到了一些相关的可用功能，因为跟现有功能重复，所以没有使用。在此记录留作备份。</p><p><a href="https://mp.weixin.qq.com/s/R-dzQ6xXnQ5YqUZTGPVO_A">在Vim中集成emacs下的verilog-mode功能</a></p><p><a href="https://zhuanlan.zhihu.com/p/84541476?from_voters_page=true">这才是用Gvim写Verilog的正确方式</a></p><p><a href="https://github.com/vhda/verilog_systemverilog.vim">Vim Syntax Plugin for Verilog and SystemVerilog</a></p><p><a href="http://bbs.eetop.cn/forum.php?mod=viewthread&amp;tid=344036">自己写的一个verilog模块例化自动生成脚本，希望大家能试用，多提bug啊</a></p><p>最后贴一张操作图吧。</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/pic/vimscreen.jpg" alt="操作图" /></p>]]></content>
      
      
      <categories>
          
          <category> ic </category>
          
          <category> editor </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vim </tag>
            
            <tag> verilog </tag>
            
            <tag> gvim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Clock-Divider</title>
      <link href="/posts/Clock-Divider/"/>
      <url>/posts/Clock-Divider/</url>
      
        <content type="html"><![CDATA[<h1 id="font-color-b5d5ff-stylefont-weightbold问题font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold问题font"></a> <font color= #b5d5ff style='font-weight:bold'>问题</font></h1><ol><li><p>实现一个时钟分频电路，无论是<b><font color= red>奇数分频、偶数分频还是小数分频</font></b>。</p></li><li><p>通过输入<b><font color= red>任意切换</font></b>分频，即从一种分频时钟无缝切换到另一种分频时钟。</p></li></ol><h1 id="font-color-b5d5ff-stylefont-weightbold分类font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold分类font"></a> <font color= #b5d5ff style='font-weight:bold'>分类</font></h1><h2 id="font-color-b5d5ff-stylefont-weightbold整数font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold整数font"></a> <font color= #b5d5ff style='font-weight:bold'>整数</font></h2><h3 id="font-color-b5d5ff-stylefont-weightbold计数分频font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold计数分频font"></a> <font color= #b5d5ff style='font-weight:bold'>计数分频</font></h3><blockquote><p>最容易想到的就是行为级描述Verilog通过<b><font color= red>计数</font></b>来进行分频操作。</p></blockquote><h4 id="font-color-b5d5ff-stylefont-weightbold偶分频font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold偶分频font"></a> <font color= #b5d5ff style='font-weight:bold'>偶分频</font></h4><p>观察偶数偶分频的时序图如下（假设分频数为<code>N</code>）：</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/clock-divider/image-20210515170407399.png" alt="even-clock-div" /></p><p>对于<code>2</code>分频，需要<code>cnt=0</code>时，<code>clk_div&lt;=1</code>；<code>cnt=1</code>时，<code>clk_div&lt;=0</code>；</p><p>对于<code>4</code>分频，需要<code>cnt=0,1</code>时，<code>clk_div&lt;=1</code>；<code>cnt=2,3</code>时，<code>clk_div&lt;=0</code>；</p><p>对于<code>6</code>分频，需要<code>cnt=0,1,2</code>时，<code>clk_div&lt;=1</code>；<code>cnt=3,4,5</code>时，<code>clk_div&lt;=0</code>；</p><p>所以，对于<code>N</code>分频（偶数），</p><ul><li><p><code>clk_div</code>只要在<code>cnt&lt;(N&gt;&gt;1)</code>（小于<code>N/2</code>）时，<code>clk_div&lt;=1</code>，</p></li><li><p><code>clk_div</code>其余时候（大于<code>N/2</code>小于<code>N</code>），<code>clk_div&lt;=0</code>；</p></li></ul><h4 id="font-color-b5d5ff-stylefont-weightbold奇分频font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold奇分频font"></a> <font color= #b5d5ff style='font-weight:bold'>奇分频</font></h4><p>其实奇数分频可以参考偶数分频来做（假设分频数为<code>N</code>），两种方法可以简单的想象为<code>+1</code>法或<code>-1</code>法。</p><p>举例而言，假设需要<code>5</code>分频的时钟，则可以通过半周期的<code>4</code>分频时钟<code>+1</code>半周期（取<code>或</code>），或是通过半周期的<code>6</code>分频<code>-1</code>半周期（取<code>与</code>）来实现；时序图如下：</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/clock-divider/image-20210515195017081.png" alt="odd-clock-div" /></p><p>其逻辑就是<code>4+1=5</code>或<code>6-1=5</code>:</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/clock-divider/image-20210515195017081-1621079741868.png" alt="image-20210515195017081" /></p><p>观察奇数分频的时序图，假设<code>5</code>分频，则</p><blockquote><p><code>+1</code>法取<code>或</code></p></blockquote><p>需要<code>cnt=0,1</code>时，<code>clk4_p&lt;=1</code>,<code>cnt=2,3,4</code>时，<code>clk4_p&lt;=0</code>;（占空比<code>4:6</code>）</p><p>需要<code>clk4_p+1</code>比<code>clk4_p</code>晚<code>半个时钟</code>，<code>下降沿</code>触发;</p><p><code>clk_div</code>等于<code>clk4_p</code>和<code>clk4_p+1</code>的<code>或</code></p><blockquote><p><code>-1</code>法取与</p></blockquote><p>需要<code>cnt=0,1,2</code>时，<code>clk6_p&lt;=1</code>,<code>cnt=3,4</code>时，<code>clk6_p&lt;=0</code>;（占空比<code>6:4</code>）</p><p>需要<code>clk6_p-1</code>比<code>clk6_p</code>早<code>半个时钟</code>，<code>下降沿</code>触发;</p><p>可以发现这样无法通过<code>clk6_p</code>生成<code>clk6_p-1</code>，因此这里应该先通过<code>下降沿</code>触发的方式构造<code>clk6_p-1</code>，再通过晚<code>半个时钟</code>，<code>上升沿</code>触发的方式构造<code>clk6_p</code>；即如下时序图：</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/clock-divider/image-20210515202257164.png" alt="minus1" /></p><p>需要<code>cnt=0,1,2</code>时，<code>clk6_n&lt;=1</code>,<code>cnt=3,4</code>时，<code>clk6_n&lt;=0</code>;（占空比<code>6:4</code>）</p><p>需要<code>clk6_n+1</code>比<code>clk6_n</code>晚<code>半个时钟</code>，<code>上升沿</code>触发;</p><p><code>clk_div</code>等于<code>clk6_n</code>和<code>clk6_n+1</code>的<code>与</code></p><p>所以，对于<code>N</code>分频（奇数，假设分频数为<code>N</code>）可以总结规律：</p><blockquote><p>这里只写<code>+1</code>法的规律，<code>-1</code>法同理可得其规律</p></blockquote><ul><li><p><code>clkN-1_p</code>只要在<code>cnt&lt;(N&gt;&gt;1)</code>（小于<code>N/2</code>）时，<code>clk_div&lt;=1</code>；</p></li><li><p><code>clkN-1_p</code>其余时候（大于<code>N/2</code>小于<code>N</code>），<code>clk_div&lt;=0</code>；</p></li><li><p><code>clkN-1_p+1</code>比<code>clk4_p</code>晚<code>半个时钟</code>，<code>下降沿</code>触发;</p></li><li><p><code>clk_div</code>等于<code>clk4_p</code>和<code>clk4_p+1</code>的<code>或</code></p></li></ul><p>示例：</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> clk_div #(<span class="keyword">parameter</span> N = <span class="number">3</span>)</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> rst,</span><br><span class="line">    <span class="keyword">output</span> div_clk</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">reg</span> [<span class="built_in">$clog2</span>(N-<span class="number">1</span>):<span class="number">0</span>] cnt;</span><br><span class="line">    <span class="keyword">reg</span> pos_clk;</span><br><span class="line">    <span class="keyword">reg</span> neg_clk;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">always</span>@(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">posedge</span> rst)</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span>(rst)<span class="keyword">begin</span></span><br><span class="line">            cnt &lt;= <span class="number">0</span>; </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">if</span>(cnt==N-<span class="number">1</span>)<span class="keyword">begin</span></span><br><span class="line">                cnt &lt;= <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">                cnt &lt;= cnt + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">always</span>@(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">posedge</span> rst)</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span>(rst)<span class="keyword">begin</span></span><br><span class="line">            pos_clk &lt;= <span class="number">1&#x27;b0</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">if</span>(cnt&lt;(N&gt;&gt;<span class="number">1</span>))<span class="keyword">begin</span></span><br><span class="line">                pos_clk &lt;= <span class="number">1&#x27;b1</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">                pos_clk &lt;= <span class="number">1&#x27;b0</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">always</span>@(<span class="keyword">negedge</span> clk <span class="keyword">or</span> <span class="keyword">posedge</span> rst)</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span>(rst)<span class="keyword">begin</span></span><br><span class="line">            neg_clk &lt;= <span class="number">1&#x27;b0</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            neg_clk &lt;= pos_clk;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">assign</span> div_clk = pos_clk | neg_clk; </span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure><p>仿真：</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/clock-divider/wave.png" alt="wave" /></p><h4 id="font-color-b5d5ff-stylefont-weightbold通用法font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold通用法font"></a> <font color= #b5d5ff style='font-weight:bold'>通用法</font></h4><p>偶数分频其实就是奇数分频计算的其中一个时钟而已，因此可以通过判断奇偶进行分频切换。</p><p>假设只是参数化配置为任意分频时钟：</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> clk_div #(<span class="keyword">parameter</span> N = <span class="number">3</span>)</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> rst,</span><br><span class="line">    <span class="keyword">output</span> div_clk</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">reg</span> [<span class="built_in">$clog2</span>(N-<span class="number">1</span>):<span class="number">0</span>] cnt;</span><br><span class="line">    <span class="keyword">reg</span> pos_clk;</span><br><span class="line">    <span class="keyword">reg</span> neg_clk;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">always</span>@(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">posedge</span> rst)</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span>(rst)<span class="keyword">begin</span></span><br><span class="line">            cnt &lt;= <span class="number">0</span>; </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">if</span>(cnt==N-<span class="number">1</span>)<span class="keyword">begin</span></span><br><span class="line">                cnt &lt;= <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">                cnt &lt;= cnt + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">always</span>@(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">posedge</span> rst)</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span>(rst)<span class="keyword">begin</span></span><br><span class="line">            pos_clk &lt;= <span class="number">1&#x27;b0</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">if</span>(cnt&lt;(N&gt;&gt;<span class="number">1</span>))<span class="keyword">begin</span></span><br><span class="line">                pos_clk &lt;= <span class="number">1&#x27;b1</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">                pos_clk &lt;= <span class="number">1&#x27;b0</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">always</span>@(<span class="keyword">negedge</span> clk <span class="keyword">or</span> <span class="keyword">posedge</span> rst)</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span>(rst)<span class="keyword">begin</span></span><br><span class="line">            neg_clk &lt;= <span class="number">1&#x27;b0</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            neg_clk &lt;= pos_clk;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">assign</span> div_clk  = (N[<span class="number">0</span>]==<span class="number">1&#x27;b1</span>) ? (pos_clk | neg_clk) : (pos_clk); </span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure><p>如果需要随时可切换，则需要一个输入信号<code>n</code>。需要注意几个点：</p><ol><li>另外为了防止切换时出现异常，应至少等待到上一次分频信号输出完成（即<code>cnt</code>计满）才能进行切换；</li><li>初始化时必须的预设置一个<code>num</code>，否则计数器无法启动；</li><li>以上代码没有考虑<code>N=1</code>的情况，即原时钟输出的情况;</li></ol><p>示例：</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> clk_div #(<span class="keyword">parameter</span> WIDTH = <span class="number">4</span>)</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">input</span> clk,</span><br><span class="line">    <span class="keyword">input</span> rst,</span><br><span class="line">    <span class="keyword">input</span> valid,</span><br><span class="line">    <span class="keyword">input</span> [WIDTH-<span class="number">1</span>:<span class="number">0</span>] num_i,</span><br><span class="line">    <span class="keyword">output</span> div_clk</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">reg</span> valid_flag;</span><br><span class="line">    <span class="keyword">reg</span> [WIDTH-<span class="number">1</span>:<span class="number">0</span>] cnt;</span><br><span class="line">    <span class="keyword">reg</span> [WIDTH-<span class="number">1</span>:<span class="number">0</span>] num_r;      <span class="comment">//store for switch</span></span><br><span class="line">    <span class="keyword">reg</span> [WIDTH-<span class="number">1</span>:<span class="number">0</span>] num;</span><br><span class="line">    <span class="keyword">reg</span> pos_clk;</span><br><span class="line">    <span class="keyword">reg</span> neg_clk;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//load in </span></span><br><span class="line">    <span class="keyword">always</span>@(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">posedge</span> rst)</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span>(rst)<span class="keyword">begin</span></span><br><span class="line">            num_r &lt;= <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (valid==<span class="number">1&#x27;b1</span>) <span class="keyword">begin</span></span><br><span class="line">            num_r &lt;= num_i;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//switch clock and number</span></span><br><span class="line">    <span class="keyword">always</span>@(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">posedge</span> rst)</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span>(rst)<span class="keyword">begin</span></span><br><span class="line">            valid_flag &lt;= <span class="number">0</span>;</span><br><span class="line">            num &lt;= <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">if</span>(valid==<span class="number">1&#x27;b1</span>)<span class="keyword">begin</span></span><br><span class="line">                valid_flag &lt;= <span class="number">1&#x27;b1</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(cnt==num-<span class="number">1</span>)<span class="keyword">begin</span></span><br><span class="line">                valid_flag &lt;= <span class="number">1&#x27;b0</span>;</span><br><span class="line">                num &lt;= num_r;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">                valid_flag &lt;= valid_flag;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//cnt for clk</span></span><br><span class="line">    <span class="keyword">always</span>@(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">posedge</span> rst)</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span>(rst)<span class="keyword">begin</span></span><br><span class="line">            cnt &lt;= <span class="number">0</span>; </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">if</span>(cnt==num-<span class="number">1</span>)<span class="keyword">begin</span></span><br><span class="line">                cnt &lt;= <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">                cnt &lt;= cnt + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">always</span>@(<span class="keyword">posedge</span> clk <span class="keyword">or</span> <span class="keyword">posedge</span> rst)</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span>(rst)<span class="keyword">begin</span></span><br><span class="line">            pos_clk &lt;= <span class="number">1&#x27;b0</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            <span class="keyword">if</span>(cnt&lt;(num&gt;&gt;<span class="number">1</span>))<span class="keyword">begin</span></span><br><span class="line">                pos_clk &lt;= <span class="number">1&#x27;b1</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">                pos_clk &lt;= <span class="number">1&#x27;b0</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">always</span>@(<span class="keyword">negedge</span> clk <span class="keyword">or</span> <span class="keyword">posedge</span> rst)</span><br><span class="line">    <span class="keyword">begin</span></span><br><span class="line">        <span class="keyword">if</span>(rst)<span class="keyword">begin</span></span><br><span class="line">            neg_clk &lt;= <span class="number">1&#x27;b0</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">begin</span></span><br><span class="line">            neg_clk &lt;= pos_clk;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//output</span></span><br><span class="line">    <span class="keyword">assign</span> div_clk  = (num==<span class="number">1</span>) ? clk : ((num[<span class="number">0</span>]==<span class="number">1&#x27;b1</span>) ? (pos_clk | neg_clk) : (pos_clk)); </span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure><p>仿真：</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/clock-divider/wave_int_div.png" alt="wave_int_div" /></p><h3 id="font-color-b5d5ff-stylefont-weightbold级联分频font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold级联分频font"></a> <font color= #b5d5ff style='font-weight:bold'>级联分频</font></h3><blockquote><p>结构级描述应该侧重于考虑级联生成时钟</p></blockquote><p>如果偶数分频系数是2的幂，就可以用2分频器级联得到；例如4分频就是两个2分频级联，用两个2分频器级联得到4分频器，以此类推。同理可得，数分频系数是3的幂，就可以用3分频器级联得到，以此类推。级联可以减少计数器的使用，从而减少电路设计中的组合逻辑大小。</p><h2 id="font-color-b5d5ff-stylefont-weightbold小数font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold小数font"></a> <font color= #b5d5ff style='font-weight:bold'>小数</font></h2><h3 id="通用法"><a class="markdownIt-Anchor" href="#通用法"></a> 通用法</h3><p>小数分频的具体的电路实现方法可参考<a href="https://zhuanlan.zhihu.com/p/93666260">时钟分频系列——分数分频电路的Verilog实现 - 知乎</a>。由于参考文章的作者讲的不够清晰易懂，这里重新叙述一遍其原理，但不再进行电路实现。</p><p>举例子最容易理解。例如需要实现一个<code>1.3</code>分频时钟，那么等效于在原时钟进行<code>13</code>个时钟周期，输出的时钟正好完成<code>10</code>个时钟周期。可能的一种时序图如下：</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/clock-divider/image-20210517224641282.png" alt="clk-div-m" /></p><p>这里先输出<code>7</code>个<code>1</code>分频的时钟，再输出<code>3</code>个<code>2</code>分频的时钟，得到<code>10</code>个时钟正好是原时钟<code>13</code>个时钟的完成时间。</p><blockquote><p>总结上述过程，小数分频满足的条件是：</p><p><code>1 × 7 + 2 × 3=13</code></p><p><code>7 + 3 = 10</code></p><p>即</p><p><code>div1 × A + div2 × B = N × 10<sup>n</sup>+m</code></p><p><code>A + B = 10<sup>n</sup></code></p><p>以上二元一次方程组的整数解即是用<b><font color= red>两个分频时钟</font></b>凑小数分频的解法。</p><p>其中，</p><ul><li><code>div1和div2分别代表分频系数</code></li><li><code>A和B分别代表两个分频时钟的个数</code></li><li><code>10<sup>n</sup></code>代表其为<code>10</code>的幂次，<code>N</code>代表其个数</li><li><code>m</code>为实际的小数部分（<code>3</code>），<code>0&lt;m&lt;10<sup>n</sup></code></li></ul></blockquote><p>再以<a href="https://zhuanlan.zhihu.com/p/93666260">时钟分频系列——分数分频电路的Verilog实现 - 知乎</a>举例，假设分频系数<code>6.432</code>，则可以取<code>10<sup>n</sup>=1000</code>，<code>N=6</code>，<code>m=432</code>。</p><p>下面介绍通用解法：</p><p>将<code>A  = 10<sup>n</sup>- B</code>代入得：</p><p><code>div1 × （10<sup>n</sup> - B） + div2 × B = N × 10<sup>n</sup>+m</code></p><p>整理得：</p><p><code>div1 × 10<sup>n</sup>  + (div2-div1) × B = N × 10<sup>n</sup>+m</code></p><p>根据等式两边的形式，可以看出此等式一定存在一种解，就是<code>div1 = N</code>,<code>(div2-div1)×B = m</code>；更特殊的话，解可以是<code>div1 = N，div2 = N + 1，B = m</code>。</p><p>在<code>1.3</code>分频的例子中，即是<code>div1 = 1, div2 = 2, B = 3</code>;</p><p>在<code>6.432</code>分频的例子中，即是<code>div1 = 6, div2 = 7, B = 432</code>。</p><blockquote><p>因此，这里存在一种<b><font color= red>通用解法</font></b>，取<code>div1 = N , div2 = N + 1, B = m, A = 10<sup>n</sup>-m </code>即可。</p></blockquote><p>构造的两个分频时钟为：<code>10-m</code>个分频系数为<code>N</code>的时钟 + <code>m</code>个分频系数为<code>N+1</code>的时钟。</p><p>在<code>1.3</code>分频的例子中，即是构造<code>7</code>个分频系数为<code>1</code>的时钟 + <code>3</code>个分频系数为<code>2</code>的时钟。</p><p>在<code>6.432</code>分频的例子中，即是构造<code>568</code>个分频系数为<code>6</code>的时钟 + <code>432</code>个分频系数为<code>7</code>的时钟。</p><h3 id="衍生"><a class="markdownIt-Anchor" href="#衍生"></a> 衍生</h3><h4 id="构造方法"><a class="markdownIt-Anchor" href="#构造方法"></a> 构造方法</h4><p>由于此问题的本质是解上述二元一次方程组的整数解，因此除了此通用方法之外，肯定存在其他多种解法，只要满足方程式就可以。</p><ol><li><p>倒退一步</p><p>在<code>6.432</code>分频的例子中，此时若不考虑特殊的通用解，往前倒退一步，由公式知：</p><p><code>div1 = 6</code>,<code>(div2-6)×B = 432</code>。</p><p>由于<code>432 = 2<sup>4</sup> × 3<sup>3</sup> </code>可分解，因此可以不取<code>div2=7，B=432</code>的解，比如：</p><p><code>div2-6 = 2，B = 2<sup>3</sup> × 3<sup>3</sup> </code> ，即<code>div2=8, B=216</code>也是一种解法，此时构造<code>784</code>个分频系数为<code>6</code>的时钟 + <code>216</code>个分频系数为<code>8</code>的时钟。</p><p>由于<code>8</code>分频时钟构造上比<code>7</code>分频简单（级联分频），而计数器的使用位宽应相当，因此此种构造方法<code>可能</code>更省资源。</p></li><li><p>倒退两步</p><p>在<code>6.432</code>分频的例子中，此时若不考虑特殊的通用解，往前倒退两步，由公式知：</p><p><code>div1 × 10<sup>n</sup>  + (div2-div1) × B = N × 10<sup>n</sup>+m</code></p><p>即</p><p><code>div1 × 1000  + (div2-div1) × B = 6000 + 432</code></p><p>那么<code>div1</code>完全可以不取<code>6</code>，由于<code>div1</code>为分频系数，因此取<code>4</code>比较合理，这样化简为：</p><p><code>(div2-4) × B = 2000 + 432</code></p><p>由于<code>2432 = 2<sup>7</sup> × 19</code>可分解，由于<code>div2</code>为分频系数，取<code>div2=8，B=608</code>即是一种解法，此时构造<code>392</code>个分频系数为<code>4</code>的时钟 + <code>608</code>个分频系数为<code>8</code>的时钟。级联分频构造<code>4</code>分频和<code>8</code>分频时钟就更简单了。</p></li><li><p>倒退回开始</p><p>在<code>6.432</code>分频的例子中，此时若不考虑特殊的通用解，往前倒退回最开始的位置，由公式知：</p><p><code>div1 × A + div2 × B = N × 10<sup>n</sup>+m</code></p><p><code>A + B = 10<sup>n</sup></code></p><p>即</p><p><code>div1 × A + div2 × B = 6432</code></p><p><code>A + B = 1000</code></p><p>由于这是通过两个分频时钟凑小数分频的解法，那么其实逻辑上也可以通过更多个分频时钟凑小数分频。</p><p>比如</p><p><code>div1 × A + div2 × B + div3 × C = 6432</code></p><p><code>A + B + C= 1000</code></p><p>更多的分频自然意味着更多的可能性，当然最终的逻辑资源消耗就得根据结果具体分析了。</p></li></ol><h4 id="分频方法"><a class="markdownIt-Anchor" href="#分频方法"></a> 分频方法</h4><p>假设在前一步通过各种构造方法完成了分频时钟的选择，分频的方法也存在<code>多种选择</code>的可能。</p><p>在<code>1.3</code>分频的例子中，假定已经选择构造<code>7</code>个分频系数为<code>1</code>的时钟 + <code>3</code>个分频系数为<code>2</code>的时钟。除了一开始示意的时序图：</p><ol><li><p>先做<code>7</code>次<code>1</code>分频，再做<code>3</code>次<code>2</code>分频</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/clock-divider/image-20210517224641282.png" alt="clk-div-m" /></p><p>还有可能的分频方法是将<code>2</code>分频的时钟放在前面，即如下时序图：</p></li><li><p>先做<code>3</code>次<code>2</code>分频，再做<code>7</code>次<code>1</code>分频</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/clock-divider/image-20210518003037762.png" alt="clk-div-m2" /></p><p>还有可能的分频方法是将<code>2</code>分频的时钟穿插在<code>1</code>分频的时钟的中间（混频），即如下时序图：</p></li><li><p><code>3</code>次<code>2</code>分频穿插在<code>7</code>次<code>1</code>分频中</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/clock-divider/image-20210518003839834.png" alt="clk-div-m3" /></p><p>同样的，可以将<code>1</code>分频的时钟穿插在<code>2</code>分频的时钟的中间（混频），即如下时序图：</p></li><li><p><code>7</code>次<code>1</code>分频穿插在<code>3</code>次<code>2</code>分频中</p><p><img src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/clock-divider/image-20210518004312942.png" alt="clk-div-m4" /></p></li></ol><blockquote><p>根据<a href="https://zhuanlan.zhihu.com/p/93666260">时钟分频系列——分数分频电路的Verilog实现 - 知乎</a>的说法，</p><p>第1、2种情况前后时钟频率不太均匀，因此相位抖动比较大；</p><p>第3、4种情况前后时钟频率均匀性稍好，因此相位抖动会减小。</p></blockquote><h2 id="font-color-b5d5ff-stylefont-weightbold占空比font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold占空比font"></a> <font color= #b5d5ff style='font-weight:bold'>占空比</font></h2><p>挖坑占座。主要参考 <a href="https://zhuanlan.zhihu.com/p/339853430">2020年大疆芯片开发工程师笔试真题解析-单选部分 - 知乎</a></p><h1 id="font-color-b5d5ff-stylefont-weightbold参考资料font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold参考资料font"></a> <font color= #b5d5ff style='font-weight:bold'>参考资料</font></h1><p>[1] <a href="https://zhuanlan.zhihu.com/p/93664819">时钟分频系列——偶数分频/奇数分频/分数分频 - 知乎</a></p><p>[2] <a href="https://zhuanlan.zhihu.com/p/93666260">时钟分频系列——分数分频电路的Verilog实现 - 知乎</a></p><p>[3] <a href="https://blog.csdn.net/Reborn_Lee/article/details/97553078">IC/FPGA校招笔试题分析（二）任意切换的时钟分频电路_Reborn Lee-CSDN博客</a></p><p>[4] <a href="https://www.cnblogs.com/zhangxianhe/p/11083208.html">Verilog设计分频器（面试必看） - Zhangxianhe - 博客园 (cnblogs.com)</a></p><p>[5] <a href="https://mp.weixin.qq.com/s?__biz=MzA3NzUzNTk5Ng==&amp;mid=2247485198&amp;idx=2&amp;sn=e2ce7b53a0a0cd43ab4b7569ad0b6b04&amp;chksm=9f51c89da826418bafaeab3a36dc656257d71c44791016b34519a1d471fa0d58a2c05b6a14fe&amp;scene=21#wechat_redirect">备战秋招-手撕代码篇-奇数分频</a></p><p>[6] <a href="https://zhuanlan.zhihu.com/p/339853430">2020年大疆芯片开发工程师笔试真题解析-单选部分 - 知乎</a></p><p>[7] <a href="https://zhuanlan.zhihu.com/p/295000552">常用电路设计——“分频电路” - 知乎 (zhihu.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> ic </category>
          
          <category> design </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ic </tag>
            
            <tag> interview </tag>
            
            <tag> clock divider </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo&amp;butterfly</title>
      <link href="/posts/Hexo-And-Butterfly/"/>
      <url>/posts/Hexo-And-Butterfly/</url>
      
        <content type="html"><![CDATA[<h1 id="hexo使用"><a class="markdownIt-Anchor" href="#hexo使用"></a> hexo使用</h1><h2 id="流程"><a class="markdownIt-Anchor" href="#流程"></a> 流程</h2><p>在git bash中跳转到hexo的博客文件夹，输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="built_in">test</span></span><br><span class="line">INFO  Created: ~\desktop\hexo\blog\<span class="built_in">source</span>\_posts\test.md</span><br></pre></td></tr></table></figure><p>找到该文章，打开，使用<a href="https://www.jianshu.com/p/191d1e21f7ed/">Markdown语法</a></p><p>注意每次generate之前最好清除掉之前的缓存。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean</span><br></pre></td></tr></table></figure><p>编辑完成后，执行以下命令（简写hexo g / hexo s）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure><p>打开<a href="http://localhost:4000">http://localhost:4000/</a>，文章已经成功发布。</p><p>然后发布到github上，执行以下命令（简写hexo d）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><h2 id="草稿"><a class="markdownIt-Anchor" href="#草稿"></a> 草稿</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new (post)</span><br></pre></td></tr></table></figure><p>其实是省略了post的写法，会新生成一个post页面。</p><p>如果暂时不想发布，只想作为草稿编辑的话，应使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new draft XXX</span><br></pre></td></tr></table></figure><p>通过以下命令查看带草稿页面的hexo预览。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server --draft</span><br></pre></td></tr></table></figure><p>通过以下命令将草稿页面publish到正式的post文件中，并自动添加发布时间。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo pubulish XXX newXXX </span><br></pre></td></tr></table></figure><h1 id="butterfly使用"><a class="markdownIt-Anchor" href="#butterfly使用"></a> butterfly使用</h1><p><s>butterfly v3.0.0 地址迁移至<a href="https://demo.jerryc.me/">Butterfly - A Simple and Card UI Design theme for Hexo</a></s></p><p>butterfly地址迁移至<a href="https://butterfly.js.org/">Butterfly - A Simple and Card UI Design theme for Hexo</a>。</p><p>以下内容均转自<a href="https://demo.jerryc.me/">Butterfly - A Simple and Card UI Design theme for Hexo</a>，<a href="https://lovelijunyi.gitee.io/posts/c898.html">小弋の生活馆全样式预览 | 小弋の生活馆</a>以及 <a href="https://www.antmoe.com/posts/a811d614/index.html">Hexo博客之butterfly主题优雅魔改系列（持续更新） | 小康博客</a>，相关内容可自行去各位大佬博客查询。</p><h2 id="渐变色"><a class="markdownIt-Anchor" href="#渐变色"></a> 渐变色</h2><blockquote><p>直接生成即可。<a href="https://www.sioe.cn/yingyong/caisejianbianzi-html/">彩色渐变字HTML代码生成器</a></p></blockquote><p><font color="#FFA000">渐</font><font color="#E06D33">变</font><font color="#E03A66">色</font><font color="#E00799">文</font><font color="#E000CC">字</font></p><h2 id="标签外挂note"><a class="markdownIt-Anchor" href="#标签外挂note"></a> 标签外挂(note)</h2><h3 id="主题自带note"><a class="markdownIt-Anchor" href="#主题自带note"></a> 主题自带note</h3><blockquote><p>主题自带的标签。</p></blockquote><div class="note default flat"><p>default 提示塊標籤</p></div><div class="note primary no-icon flat"><p>primary 提示塊標籤</p></div><div class="note success flat"><p>success 提示塊標籤</p></div><div class="note info flat"><p>info 提示塊標籤</p></div><div class="note warning flat"><p>warning 提示塊標籤</p></div><div class="note danger flat"><p>danger 提示塊標籤</p></div><h3 id="另一种note"><a class="markdownIt-Anchor" href="#另一种note"></a> 另一种note</h3><blockquote><p>实现起来也很简单，只是对简单的 p 标签进行修改，为了方便添加颜色，这里提供了以上五种配色的样式。</p></blockquote><p>使用起来也会简单，为了兼容各种平台，不推荐 tag 标签的写法。因此只又 html 标签的写法。这样做的好处是即便复制到各大平台也不会出现奇奇怪怪的标签符号或者报错。</p><p>note 效果展示：</p><p class='div-border green'>绿色</p><p class='div-border red'>红色</p><p class='div-border yellow'>黄色</p><p class='div-border grey'>灰色</p><p class='div-border blue'>蓝色</p><p>小 tag 标签效果展示：</p><p><span class="inline-tag red">红色小标签</span><br /><span class="inline-tag green">绿色小标签</span><br /><span class="inline-tag blue">蓝色小标签</span><br /><span class="inline-tag yellow">黄色小标签</span><br /><span class="inline-tag grey">灰色小标签</span></p><h3 id="渐变note上标式外挂标签"><a class="markdownIt-Anchor" href="#渐变note上标式外挂标签"></a> 渐变note（上标式外挂标签）</h3><blockquote><p>因为标签外挂的语法会导致复制到其他平台不便利，因此建议使用 HTML 写法。</p></blockquote><div class='tip' ><p>默认情况<p></div><div class='tip success'><p>success<p></div><div class='tip error'><p>error<p></div><div class='tip warning'><p>warning<p></div><div class="tip wtgo"><p>为简单的一句话提供的简便写法。</p><p></p></div><div class="tip ban"><p>为简单的一句话提供的简便写法。</p><p></p></div><div class="tip home"><p>为简单的一句话提供的简便写法。</p><p></p></div><div class="tip important"><p>为简单的一句话提供的简便写法。</p><p></p></div><div class="tip ref"><p>为简单的一句话提供的简便写法。</p><p></p></div><div class="tip ffa"><p>为简单的一句话提供的简便写法。</p><p></p></div><div class="tip key"><p>为简单的一句话提供的简便写法。</p><p></p></div><div class="tip socd"><p>为简单的一句话提供的简便写法。</p><p></p></div><h3 id="动画标签"><a class="markdownIt-Anchor" href="#动画标签"></a> 动画标签</h3><p>各种标签也可以用<code>html</code>的方式配合上动画，变成<strong>动画标签</strong>，效果还是比较夸张的！！！</p><div class="tip faa-horizontal animated"><p>默认情况</p><p></p></div><div class="tip success faa-flash animated"><p>success</p><p></p></div><div class="tip error faa-spin animated"><p>error</p><p></p></div><div class="tip warning faa-shake animated"><p>warning</p><p></p></div><h3 id="volantis-主题的-note"><a class="markdownIt-Anchor" href="#volantis-主题的-note"></a> volantis 主题的 note</h3><blockquote><p>因为标签外挂的语法会导致复制到其他平台不便利，因此只提供 HTML 写法。</p></blockquote><div class="snote red"><p>默认 red</p></div><div class="snote info"><p>info</p></div><div class="snote done"><p>done</p></div><div class="snote success"><p>success</p></div><div class="snote danger"><p>danger</p></div><div class="snote error"><p>error</p></div><div class="snote radiation"><p>radiation</p></div><div class="snote bug"><p>bug</p></div><div class="snote idea yellow"><p>idea-yellow</p></div><div class="snote link blue"><p>link- blue</p></div><div class="snote paperclip"><p>paperclip</p></div><div class="snote todo"><p>todo</p></div><div class="snote msg cyan"><p>msg cyan</p></div><div class="snote guide"><p>guide</p></div><div class="snote download"><p>download</p></div><div class="snote up"><p>up</p></div><div class="snote undo"><p>undo</p></div><div class="snote quote"><p class="p subtitle">小标题</p><p>Windows 10不是为所有人设计,而是为每个人设计</p><p class="p subtitle">嵌套测试</p>    <div class="snote done"><p>请坐和放宽，我正在帮你搞定一切…</p> </div> </div><h2 id="隐藏按钮tag-hide"><a class="markdownIt-Anchor" href="#隐藏按钮tag-hide"></a> 隐藏按钮(tag-hide )</h2><blockquote><p>主题自带的隐藏按钮。</p></blockquote><h3 id="inline"><a class="markdownIt-Anchor" href="#inline"></a> inline</h3><p>哪個英文字母最酷？ <span class="hide-inline"><button type="button" class="hide-button button--animated" style="background-color: #FF7242;color: #fff">查看答案  </button><span class="hide-content">因為西裝褲(C裝酷)</span></span></p><p>門裏站着一個人? <span class="hide-inline"><button type="button" class="hide-button button--animated" style="">Click  </button><span class="hide-content">閃</span></span></p><h3 id="block"><a class="markdownIt-Anchor" href="#block"></a> block</h3><div class="hide-block"><button type="button" class="hide-button button--animated" style="">查看答案    </button><div class="hide-content"><p>傻子，怎麼可能有答案</p></div></div><h3 id="toggle"><a class="markdownIt-Anchor" href="#toggle"></a> toggle</h3><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>Butterfly安裝方法</span></div>    <div class="hide-content"><p>在你的博客根目錄裏</p><p>git clone -b master <a href="https://github.com/jerryc127/hexo-theme-butterfly.git">https://github.com/jerryc127/hexo-theme-butterfly.git</a> themes/Butterfly</p><p>如果想要安裝比較新的dev分支，可以</p><p>git clone -b dev <a href="https://github.com/jerryc127/hexo-theme-butterfly.git">https://github.com/jerryc127/hexo-theme-butterfly.git</a> themes/Butterfly</p></div></div><h2 id="标签"><a class="markdownIt-Anchor" href="#标签"></a> 标签</h2><p>简单的：</p><div class="tabs" id="test1-3"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-3-1">test1 3 1</button></li><li class="tab"><button type="button" data-href="#test1-3-2">test1 3 2</button></li><li class="tab"><button type="button" data-href="#test1-3-3">test1 3 3</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-3-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><p>带图标的：</p><div class="tabs" id="test4"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test4-1">第一個Tab</button></li><li class="tab"><button type="button" data-href="#test4-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button></li><li class="tab"><button type="button" data-href="#test4-3"><i class="fas fa-bomb"></i>炸彈</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p><strong>tab名字為第一個Tab</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-2"><p><strong>只有圖標 沒有Tab名字</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test4-3"><p><strong>名字+icon</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="复选框"><a class="markdownIt-Anchor" href="#复选框"></a> 复选框</h2><div class='checkbox'><input type="checkbox" />            <p>纯文本测试</p>            </div><div class='checkbox checked'><input type="checkbox" checked="checked"/>            <p>支持简单的 markdown 语法</p>            </div><div class='checkbox red'><input type="checkbox" />            <p>支持自定义颜色</p>            </div><div class='checkbox green checked'><input type="checkbox" checked="checked"/>            <p>绿色 + 默认选中</p>            </div><div class='checkbox yellow checked'><input type="checkbox" checked="checked"/>            <p>黄色 + 默认选中</p>            </div><div class='checkbox cyan checked'><input type="checkbox" checked="checked"/>            <p>青色 + 默认选中</p>            </div><div class='checkbox blue checked'><input type="checkbox" checked="checked"/>            <p>蓝色 + 默认选中</p>            </div><div class='checkbox plus green checked'><input type="checkbox" checked="checked"/>            <p>增加</p>            </div><div class='checkbox minus yellow checked'><input type="checkbox" checked="checked"/>            <p>减少</p>            </div><div class='checkbox times red checked'><input type="checkbox" checked="checked"/>            <p>叉</p>            </div><div class='checkbox'><input type="radio" />            <p>纯文本测试</p>            </div><div class='checkbox checked'><input type="radio" checked="checked"/>            <p>支持简单的 markdown 语法</p>            </div><div class='checkbox red'><input type="radio" />            <p>支持自定义颜色</p>            </div><div class='checkbox green'><input type="radio" />            <p>绿色</p>            </div><div class='checkbox yellow'><input type="radio" />            <p>黄色</p>            </div><div class='checkbox cyan'><input type="radio" />            <p>青色</p>            </div><div class='checkbox blue'><input type="radio" />            <p>蓝色</p>            </div><h2 id="按钮"><a class="markdownIt-Anchor" href="#按钮"></a> 按钮</h2><h3 id="文内按钮"><a class="markdownIt-Anchor" href="#文内按钮"></a> 文内按钮</h3><p>This is my website, click the button <a class="btn-beautify button--animated " href="http://www.jerryc.me"   title="JerryC"><span>JerryC</span></a><br />This is my website, click the button <a class="btn-beautify button--animated " href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><br />This is my website, click the button <a class="btn-beautify button--animated outline" href="http://www.jerryc.me"   title="JerryC"><span>JerryC</span></a><br />This is my website, click the button <a class="btn-beautify button--animated outline" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><br />This is my website, click the button <a class="btn-beautify button--animated larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a></p><h3 id="独占一行的按钮"><a class="markdownIt-Anchor" href="#独占一行的按钮"></a> 独占一行的按钮</h3><a class="btn-beautify button--animated block" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify button--animated block center larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify button--animated block right outline larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><h3 id="一行多个实心按钮"><a class="markdownIt-Anchor" href="#一行多个实心按钮"></a> 一行多个实心按钮</h3><a class="btn-beautify button--animated larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify button--animated blue larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify button--animated pink larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify button--animated red larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify button--animated purple larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify button--animated orange larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify button--animated green larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><h3 id="一行多个空心按钮"><a class="markdownIt-Anchor" href="#一行多个空心按钮"></a> 一行多个空心按钮</h3><div class="btn-center"><a class="btn-beautify button--animated outline larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify button--animated outline blue larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify button--animated outline pink larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify button--animated outline red larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify button--animated outline purple larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify button--animated outline orange larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a><a class="btn-beautify button--animated outline green larger" href="http://www.jerryc.me"   title="JerryC"><i class="far fa-hand-point-right"></i><span>JerryC</span></a></div><h2 id="inlineimg"><a class="markdownIt-Anchor" href="#inlineimg"></a> inlineImg</h2><p>你看我長得漂亮不</p><p><img src="https://i.loli.net/2021/03/19/2P6ivUGsdaEXSFI.png" alt="" /></p><p>我覺得很漂亮 <img class="inline-img" src="https://i.loli.net/2021/03/19/5M4jUB3ynq7ePgw.png" style="height:150px"/></p><h2 id="label"><a class="markdownIt-Anchor" href="#label"></a> label</h2><p>臣亮言：<mark class="hl-label default">先帝</mark> 創業未半，而<mark class="hl-label blue">中道崩殂</mark> 。今天下三分，<mark class="hl-label pink">益州疲敝</mark> ，此誠<mark class="hl-label red">危急存亡之秋</mark> 也！然侍衞之臣，不懈於內；<mark class="hl-label purple">忠志之士</mark> ，忘身於外者，蓋追先帝之殊遇，欲報之於陛下也。誠宜開張聖聽，以光先帝遺德，恢弘志士之氣；不宜妄自菲薄，引喻失義，以塞忠諫之路也。<br />宮中、府中，俱為一體；陟罰臧否，不宜異同。若有<mark class="hl-label orange">作奸</mark> 、<mark class="hl-label green">犯科</mark> ，及為忠善者，宜付有司，論其刑賞，以昭陛下平明之治；不宜偏私，使內外異法也。</p><h2 id="动画图标"><a class="markdownIt-Anchor" href="#动画图标"></a> 动画图标</h2><p>起源于看到<strong>Sakura</strong>主题的<a href="https://github.com/l-lin/font-awesome-animation" target="_blank" rel="noopener" one-link-mark="yes">Font Awesome</a>动态图标很好看，例如<i class="fa-fw fa fa-home faa-bounce animated"></i>主页图标，研究了一下，原来是一个<a href="https://github.com/l-lin/font-awesome-animation" target="_blank" rel="noopener" one-link-mark="yes">开源的css代码</a>，只要引入即可！</p><p><i class="fas fa-wrench faa-wrench animated"></i>自动动画</p><p><i class="fas fa-wrench faa-wrench animated-hover"></i>hover动画</p><h1 id="mermaid"><a class="markdownIt-Anchor" href="#mermaid"></a> Mermaid</h1><p>画流程图、甘特图、饼状图等，代码绘图。 <a class="btn-beautify button--animated red larger" href="https://mermaid-js.github.io/mermaid/#/"   title="Mermaid"><i class="far fa-hand-point-right"></i><span>Mermaid</span></a></p><p>Markdownish syntax for generating flowcharts, sequence diagrams, class diagrams, gantt charts and git graphs.</p><h2 id="流程图"><a class="markdownIt-Anchor" href="#流程图"></a> 流程图</h2><h3 id="各类形状框"><a class="markdownIt-Anchor" href="#各类形状框"></a> 各类形状框</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line"> A(A)</span><br><span class="line"> B[B]</span><br><span class="line"> C&#123;C&#125;</span><br><span class="line"> D((D))</span><br><span class="line"> E&gt;E]</span><br><span class="line"> F&#123;&#123;F&#125;&#125;</span><br><span class="line"> G[/G/]</span><br><span class="line"> H[\H\] </span><br><span class="line"> I[/I\]</span><br><span class="line"> J[\J/]</span><br></pre></td></tr></table></figure><div class="mermaid">graph TB A(A) B[B] C{C} D((D)) E&gt;E] F G[&#x2F;G&#x2F;] H[\H\]  I[&#x2F;I\] J[\J&#x2F;]</div><h3 id="流程图-2"><a class="markdownIt-Anchor" href="#流程图-2"></a> 流程图</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line"> A[把大象放进去] --&gt; B&#123;&quot;冰箱大小？&quot;&#125;</span><br><span class="line"> B -- 大 --&gt; C[关冰箱门]</span><br><span class="line"> B --&gt;|小| D[换大冰箱]</span><br><span class="line"> E -. 虚线 .-  F</span><br><span class="line"> G -. 虚线箭头 .-&gt; H</span><br><span class="line"> style E fill:#f9f,stroke:#333,stroke-width:4px</span><br><span class="line"> style G fill:#bbf,stroke:#f66,stroke-width:2px,color:#fff,stroke-dasharray: 5 5</span><br></pre></td></tr></table></figure><div class="mermaid">graph TB A[把大象放进去] --&gt; B{&quot;冰箱大小？&quot;} B -- 大 --&gt; C[关冰箱门] B --&gt;|小| D[换大冰箱] E -. 虚线 .-  F G -. 虚线箭头 .-&gt; H style E fill:#f9f,stroke:#333,stroke-width:4px style G fill:#bbf,stroke:#f66,stroke-width:2px,color:#fff,stroke-dasharray: 5 5</div><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line"> A[Hard edge] --&gt;|Link text| B(Round edge)</span><br><span class="line"> B --&gt; C&#123;Decision&#125;</span><br><span class="line"> C --&gt;|One| D[Result one]</span><br><span class="line"> C --&gt;|Two| E[Result two]</span><br></pre></td></tr></table></figure><div class="mermaid">graph LR  A[Hard edge] --&gt;|Link text| B(Round edge) B --&gt; C{Decision} C --&gt;|One| D[Result one]  C --&gt;|Two| E[Result two]</div><h2 id="饼图"><a class="markdownIt-Anchor" href="#饼图"></a> 饼图</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pie</span><br><span class="line"><span class="code">    title Key elements in Product X</span></span><br><span class="line"><span class="code">    &quot;Calcium&quot; : 42.96</span></span><br><span class="line"><span class="code">    &quot;Potassium&quot; : 50.05</span></span><br><span class="line"><span class="code">    &quot;Magnesium&quot; : 10.01</span></span><br><span class="line"><span class="code">    &quot;Iron&quot; :  5</span></span><br></pre></td></tr></table></figure><div class="mermaid">pie    title Key elements in Product X    &quot;Calcium&quot; : 42.96    &quot;Potassium&quot; : 50.05    &quot;Magnesium&quot; : 10.01    &quot;Iron&quot; :  5</div>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo博客相关配置</title>
      <link href="/posts/Hexo-Blog-Config/"/>
      <url>/posts/Hexo-Blog-Config/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="215073fa2dcfdcb4e6362f5e5b10ace334557921c049a158a5cd638cb0c7be8d">a380b38e448643b3f3b8775066a6e2b1e4a039ec73fa168783bdf4aa246cc29099979e24b12a0ee38aac8ca5331644b0aa253868e503305fb5f68e3380b7657d3ccad49df82404d341634477cb88454dcb789c7b3f2873504f03dd435da835e737d9e5785fdaa0b2b1af4cbe19b30cfdf293a941f9435994b74ba1d8a2c0c436f4369e13594ed57a0301ea011b1824f8ef31826cb2f26c597a991aebbd685971204579bb757f6219b91005ab03078cb22767c8a2ec3759772776155f68ad81bd9a9bf539cd9b100a26edf4c19b861f69685cfe063fc2765a1d117428732eb760a81e3739cac02d4ca1c67d8527ea485f4fc761b45fb3281f8015ddb2f14270f336cd83156213e3c237d85b0f6151799e834bae27dd6e323c5755d3242f70506fda464d8b7d1b38455c7b099e1f19afb764b274d5845e1d33c8753c119193bb6037d30d6e23be68678fb37f00e7a6a22ff808578e98c631489351fd188f44abab4751ccf4fca835e339ce7da872a9b7b9285cd47ae86cf8e50758bab750a9ced229d7e8b61005cf202a45dcf8d6ff07e6682ade45aad32885004e31697722f5d384b761ceb389f6c2b36bf56b562d2cc4c8c246841053477877a3d1a0450a7534347acbc065ee272f5be728e2ca3478a71fbade731fc1f7b21da93836e56aba9c23f09c1c23db13ec5ca64bd5e6e13c2fa8fc7595f2010cb220ea2e5bc515af78c18c47405293ad3a56383262a790a23bbf99ce6ca962c34a7468e15a7ebc4d3eefca82b3012f7022e196ca0fecc2f3b666d2f770252d459e190863b12e71cca77fede637a77d0a325ef0bb7b5b1fda7420b89deebac3fec66f90b21b18dbbda16b2754476aef51354d1b814eff2370f7f4bb086df87a5891e1fa2ca1aca98c97fd6911b90c033d78b430bea243b4049d46083cb1fdad58026240f0aa4961084b7ef35982496b07e8187c6565eb37f5bc97675460c660c7c7228ff0197e7d7b12b710c46545fd4d4629690c339135bf1cdd5ececf04516cda3c727ac9e8dd7b1014910b82a40853109f03188bfb5fd57c12c5a01ffe1bbf171381fe75d6897a02e45333cc9ed6b0a7757d0adf58ad9cb6adbd378c797ee710b558af8e39955191b7b90f60d3e5b1a5e0a6d31a0683ea53e42336d6126abf7e7b11af39a2812f0443fe030eb2b436340b0089dccb6b1dfe2bcd364f59bdab49147fd3fea0aadc0aa3b1296454e3a049e302fbabdb80a3a808d9ed571215150c53d554056430a2c69c47d31f4ef4e5e25ecfbc9fd07ebb1123f9f7d12cd1be760f318d91e17a77cd6e1fbad64fbfb4e240dbd362cc36f58246ff9f2d45abe99a1750de6152a004d7d9bb6db185566e01dd037c5408ef207b046474a20105b15eb9f9a4c23ec83e6c3155d2e68d2637bc6366d537f428bac9c850ea570a1d4e98b0a961c61463dbe199fdf646c84e6a6d493647a750837abc983f50d9b1fdbfa3d8861e05ffda6e9e3ee08cf12bd536a143c6bdc25f9fa1ffe4ae458819ca73047b707d136b3d6c057b1af766cc02e0dd9f21c7018365aa143fe4330353f311a12ec47d4337172d17dcf7ade801bbb12ce9c70c0f85f62c76dd4aa4e5fc213eb061d39f3b70daaa067b43cb120bd5d06bc353040bdec3b1560ec20bfc33cfd2fc774d916cecfc05ab5a91feb6765fa088f7bfe9fa3ba0f4c28a9c3a44aaae6d3047d0aee840bfdda0d9dd0a521fce28361253ce81689c41124d19256bda291394e1d2b34ef97ee6692daf5202dec14145ae77851a23a42de364ba55dcce78b5f806d764fe76e140299ac8ab3029f186355f977ddd54054d087c7d47ebd48272ee7298a3c4f18b2b17b013a8d200ca4694e573342f8591a8bb17ef60686431bdee53c16a7087262a60b3cf00ee8d89800012a8eee13f99c929727517e131bfe7dcf94e92602c4ff94d1babb84edc6819df8338fd15aa7f1de52415e9907cbc29a50a59d4a9709ab94ee9f9d3f95b894af07062e430ef35222f45547526d899844fc0931b096263479dfbdce3c4be42b7d659d4f24ba1d3b982460cf9f3ec005a758f5bbab47ae3a3e1c84019041dfdd34c9245c9fd6b4fae6daf3cef227df4be793f45b841153e90e1d90b7d02533bb513168d588b2f5f0462f7200456bd0b4704c1532257d1e624e98a0d3b866e78d38378c901ebaa7454274db2b29ff0bfaf038fa4ebf1e8c933578a0ce92435195b3f4ce6186bbee92c0b9c0da6a0c745cdd42b235675e2ca91eeaa4d1dce0495997730ec7cc39bc6b8a235984809b2c1e2e6928f83f1a989746d2775e0fa3ad5396a018d6cb16aad19fd68a8a9b50edc40864513d30680970ce02263b49cc7b62f1707afbdccd20006f04418bfbfc938770736f245c4bcfbcede95056ded7ebd245495429228ecd95076303a67e637b7a5f540139432c04c2f1983efebc23c39619544dbbe4a3a9e1caa41f92754d11b5aef9e8983bacca17a3a42ff60002a2c5cf87065027ce2e02d5f7b2382f0ab6812e676ff5561cceb25fbeb157f00921934c75b387573c3b1a219fb80c56d3a266aaca941a05bc0a31bd02ae47e0d9b649898e87a5da0db288296a1da9ef0654bea6dd63a4447a101c0e631fafd8f765d09b4b401a7f53bee0663a38bd297f7376550272f0cd65f9eeb7918dc14f0c9a411a13aef8b2fc20121b73890f58b385d5670bf68e97eeaadd5c56b92ec3514b155fd7b15f7fe6285c697ec271896894fb09ccac3ce8e053f47a0dfc5079f355ec7245a046e3bcd1c3c686cee4ec959f47d6fb8eaed8cabd214aadc7373c7db3d00c0fb2ea4ffee15170a709e4db16d85da7ba63058af6d1b84399fa9a8c707a71e7103fb0fcdef7620a11a1cf7131c64c825ff921029083b90ddd28b71e30e48238114313792daca4b5813781862629281c12db813586d1e8a4f012ff45d7f9e89be492e35a8295a43fb259de9b99d2969804e3abc7e295b246630eb7ce05ff7658b2a4c813ae37448cc240c91385e1bd1366b77ce9cf8eda2f43501505757e821dbebee5e1d121e438fc9c59d026fd5b39b4af40d75b127167fef1e7ce68cbc232faab92513d375f514501e8ccd201f96f349fc6e184e3bda0f44a65c2c93a2f56c0a33033eb71514f597e11b06c342012309fd88d752fc76e4ef8d30a4e977f1ce9d1c9676a868ec2bcb22c226eca827ac1e9b5c208b32e5dfea518d28fdde33386a09619a0374500ed7e54300140749a1edf3a009511ee5c13136002da7ffdecd3e2766d9d2e7b48c362c04c3ac9933a19bcda1b539415ae667a2f70f8490cba17d0b35fabc14a985fc7d46b2e9a3c3779327fbe2ca0543aa6644bb5446cbfd9a351d573f2aea2c9023ff027fac6559adcae574b213497a1bfdd6a525842066cb059ae2af288909902e38bc065bae208024d6dca35a3a86a482b9fcb9a49ddcbad91b5acee86078dc812723bb5b7d821c0916b207b381e0f54cb4fb0ac136e3a36dff29fbdddffef345171dc34aef0c5b6cd5f3c073eeaff6e99b5d30661a33dcf93f76e1eebcd1c9d5e31052d08dab20d5f9ac1ea987465a6ec79971e3a25eab71682328ddaa8afa68be88b1b787f0c4a8cf4f84ed374938320dd8e0b303135cd3a45c6047ade14f9f97baa3f958e94d5eca0cd0a20613f9b4cfea5e7960691605f821ef229063d43a7f6125d208f6c2f959fe5488421a37e59b35778c1f6d49c3423fa0f6a4cdd544ce8c6ad560bbaa9275bc30cefd7d0ee330166fece1cd82f6ee4494474a6616d5c79f8419c3ec38c449f55e9e5c1560a4cb2307a9c31090d4315318804aa0b2dff2bad09e1d3e90bd0bab4ba9741ddbb1bbe71514684f05d6a3cb6d5de75ac7f0a8a7a6fe6e02a00a42986a63abb628ac93da03e3f83944baac60b88c1e4fdbc9314ca1c819b899b966cc04f2fab4a03d23c3d0e17cffb86b375798b95f050e583139a81cc05373973988247eb743ef6784640a8c3ad2752c172911e64f9cf752c01e98f62119f429f4287776ecbf5d5f4025e42da8bc30fcb91cdcb6cac9b60c16caf26750120c9cb1f2a412c80ad38e932ccf26df9d524d0ad6d683cf52eed43a68c4132d90cc17ad18703f5802348b99bbe199c9f0b6a90e81dab9eb29f295cf1499cf9b82a66bf91a59f45c9f283bd2b9706002a54eebb2e52f855bd6ccee649dc33537d50e12f5a1cb0ae7a4b48e00ae5a21bb0a432efc35cf27ca79c34680155e0f97b0e079cc193c09a5e21d0b35177133d018d3c0c7093b0e9d437a844c0f710cff9485e82ec05f8874719015c72cbde64546a94a574b70b6e73342d72d88081244fb2b92813070551d5afb403130b91e57fa277e43a45ca364b99241bfb75c928605866584d75b0676a987bb00a28189a72c1ce6414fbf64f9a51a4626b5c73983d63746fdd873bc59ca5894cf66842e4bdf5fd0d903a47004b87a3b8a4b08dd784d9271af667192661e0d9fe426af911148d09300d3fa18c030c97d7af88a5e8e4b4c6874374a38c20eba86ae3736e3ce3e9421494c496bf15e543f5c913dfc37faf74839492734eb693d9be6889854cd8c6b92900a5207833e25f39f1a4ad77e5b6b94dddb270a9feb874d2a4a79153dd8e7c10bbd8f50471e2f7f1cd623a3af2e1c95964c884802af485bf645767d928ab76fdd6b96658de3ee84e7d8d345cc152fab5f15fa9b492163d8049f58bdbef31491cb106dc38ba524209042b5b46a2c11dbefc0f0b9bdad0e6de553f78eb7c7bf5c4b9cfd2ad628c0d4c73cd79e4b80c02b68d381ae924f29c95de42b1b2d551524cc30ae344f65242686a88d2d7c7dda26a00ab1f98fd618d9f1b22934c2be46a589a97ba74181605359f7bf7c9f9e749dc90fb551bfdddc0fc9fcc089a55f612673f51ef9e58beba557b02e9c8f12f4f822e483da8bc43fed2568130287fc1db96f632517d28130eb338e26473464319b3a06c090b85e7190aba1d2cc2872c25cec21625b4e446034de04ba3bc17b4147af8342804baef532e9aae682020b4fff68364a3872ff14871b855876184550f4a6cec31a4e591079d3ace5c7c6b66ec8de7be5d26c95dea8bdd286359085ada210f1adda5db4604ff67d8796c4148e3f85025e64323e6e8a6b66c5a9b87563ed817b7527ad24d34d42069105a3f0d2fa68887be6fba5f496a880bb0a497410ff88940b88170cb9ee796fd7ef9bf497e8c52ed65020cc02456b3fe8f4133cd784b4331839420dd1649641cfdd2397fc8667e749e3198eccdb2aace16205cbedf8b54215af3d29ab43a9460a8fa51ae4ba5f15b5311e56c87dbc6224b1229424608a428c4bef3be27fb16376235a43b69095cdeffc1ef97aae49f7f7ef027961656ee6cf767fea6aa88dad5317d43727a80dcff97174824c64ad9c3da74e1983e0db05a19a9597272ea72fe978a3431066c9e8e823525ce17409a9922dc21f8af2d3a430dc2b336e3402c97c9d10f66340f0c1e25351192af28367819d3e017fc367544db347b3a002763715beecb17a68b90a0a04a75b7e024d813b99497ef25dd7ff6d1e66091231707093c030f48bf4d2bad31424bb710e9ee1762bf93b2a77de2cebb33cdd8c8eddb6974a346340e29cc66dd91467ee9192c796376f566204792d35335c18bc2121075dcf0298e5bdca56f988826a60cf3f852a3115d97a4955f08b7c85de9493edb1c72bf0a74de4c2b5cf4f3dad4e64c00015936b95e22a2fbb4e5c68c02e73e2598b0301c733393542cb41a5c884b8ab388f2d33cc888ae35b48278c9356a2ddbe7d479bb99f15add71e84ef3d2f238634a3eeb642d57031042874072f0c26c9730f87865eb94d51bf6dd1e3b800b3360d4fa415f62e3c1cce6ff5ce80c924108d3f6164508e5b12321f18ae8879512c025e037fc6be8a7eb2e4a4cc744bbe1f0111ecd52bec1d5fdf044483593430095314ed81f0ebe8f0f14bdb9499013012b07b997251dfd1b7363e325d24b2aa7f4ece19c144140881228622fb13b3f1656a080079d7fa2362f2a4fd7cf77123717d4fa614e306442aa221d3db7847b82ad89a1f8786174e753f600e6e98ced1ef2d63bd053b8821d9ae438b209580ed40c92b91219d0939ada10c3ac28e5cf021b2f8b31abcad2ef2061f33444b91a0c49103a2a73d487b08711f375fa4b52e6f47fd13e240b1751de39ddf8a183ddf1319099c22de893d8d9a35828089dab8486f46a3b0db006ab5047c6b3a6ac219395b745d67a4b1b965ed6a4b30c7c16b8e26bd29f0ade39c999b6ce6371864628ae2b3620baf1e841df215a1d82a726a19887d3ed2086fb2da654c6365666d3ed1c5df18a874fbbf9c0fabca186175c469b97d5316a7d4089d08581ed8017c7637f4e203b1514dcb1b75cbbf6cea975ea1b1b447f60cb5efa91ea37eef5dda0173929697a7e04c9b196c5f4d6218f38e37cc512e94a3818d7adf65299726342ed17f2e3e31a8b241fd898a954eba7fcd2a2b01210ac61c0f08618ed2c948a4b90a38013866001fd792fce9519f9cdb2f4496ff13d9c6df97dd30e95cf0c7ef5d8d485449831873fd66b4bbc6b149321c25634ff4051b40437af586b406ef5186ffd3d7bf09afed58da5d8663d6ec5b8347df908e5aac5051f44e584f2eb8ee6311f71221ce73ddff6bea25239655633b864a0c5bb764829d5ca984f08232c8ac42179e63fd50a1185f0effece27b450d98267db75fa9925f873c30f8c3daa22cf981155e12674a6411c9cf189b125c19d902b29b41f81470a651d625c12aa1016f33671e9cde552fd27c9d1ff1b2326eda320c2caddd7a404beff4d70e1920496792161ac90204564f98d5512449d687426422948495b5132153b8c990d577df19538c74e16f1f4e5ecc20b4e32fa21340a030547d386f71c925191f2b612e2f948813a2193c70c5364778763f0f1b56ffb80c10184977f6553b5ee5cae3e71213062174fecac3c4563264057ea8fbbeb15507987045fedcd5b6d352e10f2baff3767ecf340b18ff7d0af6f259b055517d7b548db43808b29963d187e2ce8377d81889d821e06670681e038d1872fb22a2262bb0b58eda1ff8c1cd0df08d1d978cfda47948fe819ea4d13767c0fe1c3c3b0c78332b12e7ff208dcad5c09ba04be16fe22d2efb3b685b491424002c3fd626d705300a9843d6876c05f3834104e62c8a78ce1ed2f11e74098bee369325dce4f4e5b49eebe87fe71c06ae9769e9818edb7663b9c6994dbb494d7928121ad123a19c8ba9a6d3514e1bf7ceaa95a782bfeef27a00cecc4621d36b531a6225a368746b56c8c48f3582d0aedb671c3f2045b8a0229239ac0c9a7123d0db8326a37d626abb974e0b7d4acd9b8c3f3e69efa2bae5a5c75261204c6e68625c5df6e57bf18afd6f901f6c14636d0ca59c27cb3e6ff21f2868add05531d542fe53f69a94228ad5b69df3295405aaba52777050cfa8525cfa41def9d5e4c6e97f7ee49b22ead7a5ce20b42c8bab6322304d4406edab68847281fec1f1a3da525fefbdc2d05b787f99298cf22c5f310e1fefd1ce5ec65912cbb7bd7156136827679acf86e0a2fca27efea872de22cea9ab18db08f1f254a80db1bc36d8116ebc1cf7d298688ca0e1c6631b12a17f2a3a06baadcea17e4f68a0fcbc1f152acb232ef40d352affe10e827189cae953441ad87ed42ecaee88db94135cc0c6d441f46657bb23a0c554c96c7327ef9a9144f5d3bb036d0def8531aa8399a956b31c5d6dfe94a33234179d65c86c8ca6403c7caed657fdd1b23a24dbe54dcb1a916f0109b035dbf563559048ca6ebe8c9238358df26c54a448a6df67a9686763bceff98d009b4dc50e6039519723d43f97255b5188b954de734b77cf6927d8a83078932f64cf6e84c390f23ffc785530944eb4d6d231b9b711dc09426fa036919f44198010dc3a4f9014b1e215162b8ec4d8e2b7a0b37d686d8c88edfef1bb9f4cc8728438cf01c67de74bea0c8aa6889c9c8391886badf7131b7a5d2011c74f390e19caa4e9322c5349f3eb1d8ff95db6184ce09c67f0250a813a49eb4c57f80f49aae73f6ba27c4f52549c5cd0704152e7ef3358d390e698e0d691ee4268339b3ea6a91b62fd648a62b9fcc146a13ffa7b9755c16891979643e8ac6f72c29eb1baec87ae3ad8d0a7c485436663d0348ddff5897529e50a32709347f55a9cc1302dc7a4728337b05060d9df5eb50bcc7b79d1e50a92ff65e3e8b82f60b179496bcf65badb9039b63bf35151e466352a15427b5feb9665f1698cfb345d32d158a446d67ba8f9b10e5293190741fab9b8d979d027af688a3a3dfc6e2cc6c898c2ae37f11607a45f178de26dcb331cebc635719f79046420dcc7a44a0cfbc8a3060187ba2d036e8e86f69640cd9967a53b4578ba915b37a9cc4de60e4750800198638fd514fbf16bb75bea506e7e14c5b5e80c0dea2cb3436fd08fb31f76b9e9f72d4be67c3ce09fe33fb909a0243f11003aea482b7baf1a9baf836041cbc152f0e468738599f01f46c0a983ebbceb24e1345fef7452dfcc9bc6848afbd213317fff5780da6aa784776d2f71091fcd5e71a18ca1795fc42829034dcb64b20c97e9ed12e76df3f312b06620281254f6c912c7e86a9e9409980cfc49b9f7d28157709142df645e80216893e3c769dfd14b76da1a92e2813a6ee63bea3da85fd70c71f8483a7c7250eef674d6f08c0bab6739505f4c74b5c6ff9d4d50e310541c6107231a700ff8035fd30a0971fb3d37301959136dc0e2d646a49011eab332a84f01914043f19d5f34a78d517b154662fb2e43f5354d0c30667cbe44b80b23ad50d0a629de62eb2f7956904036d7933a52bfc0e52600054e3b47041ca75bb198240983871637f6ce6696432ec915644ac2d9539b7532ce406df227dbb3daa5dccc4dc067e5ab1d9c2fe16a97340f74a0d2bd878416da66af8eed9f88d38f1b024159ac8abc0ddce3b85a233096cc1e6c0516377a791db59ca5ed3637f62b16ac0450a14af7f3d030aa3844a48ca27445c613e196aafdd88a8b4cc16214e8e70d8595dc10678d6e789dccb0be264e13d1c855a617c12135d0899cdb86596d59ef3f79f039b965855d7f88c11272bde7471138e680a0a8674cd74fb8e117e567ff6af31eac63bba39807417dc6c32d205aec6cf304c562226503df450ec470994a250f3c69286c3d61366051c55664986ad4607fa49683273772aa0784c5d72ddf9819e336023f5e15427cb54f116ee94fca4997d10d797fb836324cc5336c9b18419720603fc198c0d05c807979675cbfea255c70c09f7553494672b953c09d0114cd043e4496731115b9ed3d86350e49d2c32fe2de0824a3de45845d149e85dfb28fadb18cecf8193f2e3208c4139ae2d9c95d6add982b3731b6d544a4d11fe81e15c0338dffb0251d2040bde1690c9dc99d2baf23b6ad00ac957b57cf9f1f62baf1bc77eff15b713788750575169fb7c52b0867d6f31f927ff38d4c333ab4c09f00e2694ca3fd6f1c43bcb097231ea278e7d42661cea0e3db109463b2ff6f5893685c1ee5e16f189728507c823ba037acf08ccd554e2ad4cc94de2fae9ee68a88341f33ab2de772827a797f07eb7759b2a776a754ff8d2b4e011440d26b307343fea753f88633c5e8595b52e29542348cfb2af84630595cbb04f94b1481c93a8a8b0900f18cd50ca0d4a0e522074f612f022243feeaedda629c88a5fe36f39328d4827d2ae3d5f412f504662bbfccb84dc30950c3c66534c631fa99ca61d16d3e73a3286296d534565c97bafe5032cc6e80c3b3a7eefd55d93e662c865bc9604c52be5cccbd31e59e52aa0ddcdd78773647398b74e9d37600232068de22945e4c85f0c412c2e1a280cdea1280f14b0364f9b41105bddaf996d96a92c7227a579a0e91f01f6ffacc25feecebc30290324e9cf1f083cee19e48dca7922762c9fa93c4493b01e618b436301aa8d6ab69524df916d7d088266a0713ed793c54f1463cc8c79228d5fd83ef4f560deee3e1abf85551fcb794332af8b6b5819ae39f7c6df7e096f3a1b69962f12ae738a160006ce81c9d8709e716b05bf730f4b86db0a76743efa6fb18673c4ae3b4f7a076b713571c699735bfdd2d4e74b0d13f0d901374cc01b5f14473e35bc3bf6aa5581e68ff9039e1a52246e10c20151597a2e871bc95e84f372ae45e607ce467bace17cae705024b69c83184d56333c99e4c00a1190f528ba0d1028b9cfeaec1275b7c17dea892d710ba3391f614685e9a62a4b49dadd7684f6d50481033f44d3ef9f8afa263e94d06836f7c7392e6c992400fd65b22cdb2854e3c4736009971e391ac825fa2b83a5b5e6caf3354beb387eebdec832d0c47a29ed53444537af836d270f50483528f69942d68507c315c7dac8015a1d21dc34ea48539bc1413c81c66a969c02f1cc7ece31762b6fb4e1474691c54141282a03059652d3e15e9dc6f1e5f8b2b2fb8853c371801b00353eb6b946860ded35758ee72c93a9c8168b14399d9ce6a26690261577a76d02e64fa0de07dcdb88c25edbaf141f7063ba37ced0b3fd11a757147131caf64f3601d9d5f84ac3a21c183d1579cd7df4c7784a8a6f85c7e4700baa52a216f8a9bde7518389b5bad5a7b22aeb315390b98f7774361f104784ecbb11676567e0b7fc1a1c64ae2e404a52a0bd00a199c4314fba18693258f64f4e4002637355762a016b60a0a533412e29a8b253b6941a43fe6aed519e5c7020981562e50057a187c0138147f9f4c5b9fb30e2733273d9a7ba1631eaa3688b05debf51c25091c62cc782d590eabee438a1b684dba56af4ba369f5c0202d402317dfc3e7fb4e5b1e308f74da7444c2e460d58746c0122389d8fe8fe32aef3aba8232ff4b56a9aa7ffda972d2c2021cf05d36a9727293dc8b7328507b2fe36b4c31b9cdbdb54ec512ceb0ebb444e0a7dc01dc884a1a5a033f1bee874e1058ae185bfc2fe3e400f15ad1208f4885e4ddbefe6e86bd03871b1f5cff8709694147c74ba31030b7a33576885492db2ba8bf0d49619466f9534c54f31171ee58d1d271f27174e80e0dc8adc29caa29a21df45c38cdb3deac2b59063a5a86e2fb2654fcbf635196875c6694909c25d65fbe2dab67d0db76fd279aac1400414cd68f6c17171f978e7dc9f9c9fdf0bef3e9906d7193a2944cccc44c3540b6b67e75ac96567d2300e6b9d07042c1bc65bb69da278c2f5dfa9875349a55ca424adfdc07cce2ad91744ef44cb6e5234c5a2f32001f5d8abc05608763d9dda2faaa646e0e583bec3d27c92f0df6ed955e6d2f6c2e23fd63321d55815bfcdfbf0f57dc6b24a42bfe8bfae0a52b98c43342273856c91232c6d4a1e1d0c3a7b2633a11b6822cd7461d9a5c9987b36e6c01769d1d671d9afec36a6b9de4cb19d7ab97874dfab27e45b8461fe78efca6b86dedf8c4445713181f84d89351b43b64d8f790381dd55a45fae079b5d69fc69dae693d6a267203ab4d8507f3b03c554124d4c3d621a80b086d9227471242d90b06ab55351ed9b9a6706ea90e246c7b7b0cc0e58a2bf66af1dbd8830af6afba775436b96f134ddf833b121bf8b00e67b98d19fe7e0bac62d66392d6eed0be70bac4a491e022786adf1386ddd4b9062c364b23daeab9ea20fe7f6077089db96913aef0b4e134c75881c15fe78d9c1d52d3daf7c3ea6d7f130c751c8deccf99e5f5b4224e384adad6ca0c1ae0ed69ca81c437f21202da41e9cd1f9555f8e5fb828c7278d2595fd15f2203044e480499fe178012890f57153bd35dfbd7d1cbd90b58ff7e841c184ba00da538376e62d9fb15ff47ef75ca703dff8cecfd6765023388de0848a7e8ac1111c29af26e9d08491f24e858f9901a74958217f66cfb903fdceb11c795d001dc4323532e9dc7bbb6d97878f6b7546612597fb25d9a9fc134a5c3a4bfadba87b72317f10abed067ad9bedae1e5813e71d899d01cfe8bde771c7919a569e74cf923751282f62d89539e763c34b5b14903e72efca23316e3e3b0735dce6ff7f6de880ee7d7b51c81fd79f205d506973a97d60b736c6519b84ed92975fa55da599ffe02c3d263b69b3589f142cc57b1d7f0d6f67ef03e4c8add943d3864c383d5be7cdedf25960321f15cf076a5ef5a90455d6d025d18fa100d11966e1bdec6207fbc5cae835f33b6d0b58d07b1165b4f6e5af8b18ad58fa11ffae8f799e007d7b294e6d467a01c427f6dd4ef1361e5580d24d13eb760b20cfc4cc802b73fa7542a491868cf72a0f006a9cc84430ca5b378448b15f94e60096d308dd8a2e99eff1e90820953dc50ae5641386d6fb77357cf288512e76249e2f762014c39ab99050892ce42befbd412ed69b762316e2165104674c00e1cc05b13a0c5bbb78cf3fc2480ec5158a34b2b52164f468c667c270cda86964008896cd8bdaa579e90eb00ebd376bae7390aeb7b05571ce865fc32de438200d1ce40b3f1c09ead8d001e5b55724cd266c7e0ff1b8de293499348fd8b5bdf7a971cb3e35dd6ba63464c7a291b2af0ae51081c342a23c54a76da5293143f5b315ddb5a91150cec17a3103a1ff515f6a4ed36b009a7ac8f00ea63466f26f3b14a425029e9d1373c44f278aca6966b18542f40bc0cb417f9d76c80c99031f3e4777d0743b7acaae89c3993be3a91bba854a9562caff847db22a10b7239038fa932d714ac02be120fad1dfadd0f03e1c0b83aeb6fbf6020487c18e4fa9089c2b85d9e905e688570cdd1ebd20e4213a0dc78f1ae945ff86fe0029c9cb83e5cd682947ab58b4ff3a25a7a4e255e13723d7f94faa91effd50d0abd3409f0b1d1a39ea8e575aef7bc4c9b30359e6a6273eb8dc25952b55092caa6ba974cd9ef35ae30e3343aa30ba9da2be9d9bbf3ec43cd07f7f7b9f091defbc4c5a9db7abf164a31621d71a883196cab3f3e009a9fee6bae07b97f8ced7ee834f67ab6d433cf5be519245af06b6bdceff3e1b2da1dd2f9a270ddaaf51b02b417e2706e0cd29eb57d9b3e31523d5e8d8e69f42fb76be0eda93b7b84fc9ca0a5d45ad3e960559bab61d32de3833099910945e951e0533d620691cfe0b7e3b49210f28c4640b5b0d3f8fb807cf8e1ecc6709d95f9efd9c79aec8da94a5c2cd0ea1bff991368a156b9914221a424956451f492bb3c987c7a61ae4f74fec5402be70adb9a429673bc42772e3f499a3d91d54191a9cec413e6e4f2d00d694ca802ccd6f3333d0c7c6aad72d77ad5a27eff273a016fba86a9a66ccdb5e02f5a43f3a759d7365f8350f14fa8348c00249bc3f95512c043a728e59f19c8a2480309eebcee2cded52bdf5c124e37baa528000f32666395c3e85bf67171604d108d51ef16abbab430eb73ae6079d23d99e7f8131dc4ffd4710c8de43df5069fafbc074917ab1eb925f0747c252c49307e5c84e48de489ec7ee16f2adfd346f419ffa315f8ecc10df0567312eeb4cfd77e3a8fc3fb8306f5d416ad07cafca6b87b0e81540faa7c23f1f1ea82985c7dc6068b551498d2a3d26eaad116264c286dac6ae4b68bfb8d1abaf67adb0225781bfe7456324da9211853c5368f7be26f23fbf3f1a4b04d5bc2f03c6e43945c04942c582931af28b5f7762a1147631e1cc0e31c435d73dc6c176bc9a8bf5a551665d5519c9682c75488231ff34175910eb7ed9be9a688a11009fa6e4487f69ed46be5b92977c15af40cfc047e607f64418ef3cad06260b752b8d093e59d965b541a3a6483e3b035479f57d52cbc97aed3c722a6e38968ec4114b0483bbd7dc11c9354c7d9f4e005aa8415d5c03f72e5096e82065d7299df7f65525406c97f307a49b2100b69f78925fcb729fdf9144f95eda4be652dfdfeaa8ec2696ab7c4698d5824d701f015a1ee5e34dc9f2b694b1b86f15f4d9c9ead0ed7225e2041f7237ec45b69a59cf93602a4ed67a075583fa2fed25137b102c8dd4ddb4d439f78356dea0fa1e950915f25357c333366e946cd8cda51ec397825d6cebdb159d2a194a9ee183a2dfcccc561ca55294248a8fe212dd1aaf86ae975d0c5ec7b0f7c3c82c27f6b3c6caa7d0f19d6a42337bc0cf8135a5b5147068d2257512241f6d51a47842a190906279e1d1eaaa52e9b71724353fab8d085a8c439cf9ac80df85babe56f60e610b024a85a730f29e26c1f4235603094f621367cb68eeec4cf208d609adef321964b5b2662f5f6d24987addbe67786e7989a740643ddc55e0347df165204e6af03f12b5532dc8573e3afa64cc5ab35f18489fb3da1d6206662f2cbb8ff0c94459fa4529609107ca35d6a9cbb2f02384fca5262edc3a6dd6195836ee3cddfc4ab4fbe9d2e3cf82d1238c4c73a1c92931be487e4ea1f318b80914520d2ded7f4604d6c808d0036c0fd83938a1a4d99395ced5cb9cff0ea3209489e79a8a5c62776b517a6ebb667b41808b2d097c82490a4ed2a191b7392bf45672a4614e2f8dab2735f3b50a47afeec716eb406e6c01ca593f15493fb5d9a996ad963c024d4300e6b0a6aae0cc46ed57c758ce3f98e297446c8a8fa075d75316e9ba718599b3ed4c8d7dfd548995f4650b5bc50d641b4dfc678520c280863442d6ea75b8ef397e9ff2da0626fd733b506b7f9f31af4ba16f7f3f9f404dd99238c648dc344d2b0cc462af81a7c255b7c3183f55f94715cc0f13da6fad515b0afa0fb92a816bc0256722f2ae1aa573da4e252cec3dd2016e9e4bd16200acc8a99198a95bff7866687c264f5d61757457456cd3c0162d6b9a6e72f1054bd9b99fd1960f663d07be6142e98e9a7bbdd000df6f741782444b42b1bd47fd6f5fd73f9ed10245163dd916fd5a50c236c50fba6ef0ec68d6c5ea2d164af117aebeef37c6c78102e9afaa041bcc50046a10981d550fb12df168ec35c5e5b577228f8a549cbff19af681b58a1241516cec30a89dbcb9d81e2abc04a3e8cd88614c4429be5b04cc40332a24807e3965ce19746f868dc3af45267ba1dda24b5a6b7da5a100f5adf32e7f1a2543646c4ac9db0ddc23694a0837538115cce934e576907a40744c618d48369429b8b87df78f564425af1c756b6a3f35aa4119bf06a6447755270a8ebf7cb83da4ef94c4249c35d989f120682b2b15004be62eb34dfcb9d041d32cf37cd9254bcf23aef7fb8d55925250ca325e20b27f799c323886c09d408295866ec602a42fefd55ee40dbc52f20dfbacb2a88d82d140e14ee72954f376377e64ab0a570c6c51702e7b9d561f51aecf300b4bff99db480ef52da9d359a1467c5a771a5d7e06ed25f7c4ae74bc4401e590c65b7e540defa864192e9481a401566fdd760deedb0a954bab588d4366d4536d89ba21c3a2e50cfae9572606af9a7a1d0db50611e4a4adb4aaa36fc1c0cf06dee9ff38593b820345998abfb61999b30196f3e2e9fc073a30566f4f730d057685b1c70915328c2db2bffa0136d742125743d433d65c13413962b194c526dc3463c81b624195431f2db0533afa57bced2bbd2f3cff72e1ce70699600a4926dc2b4ac4d86942fb4fca83c5cb3b6e576ae140bc127e9c22d4959530296e296460b10f33d6128ba7c5b9e19d3033a47fbef4da9ad2ad02c2d5c302924001651967034e3192f6a569c4d1d69189033cf3b3e025f5b1a79a2755519820e3eddfdc8c72e611b1736388025e8c6ab8f11e9142e076b6c24400ecd3253178ace3440ac7e886f71feefdc96640fb38165eb9c56a79ec07fb16b7c88a2bfa13171faaa74a193f41d04500f58398a80f76fa0bb6708aab43b8c436ea6c95c51c6f254f6b99d8929708cdeeebae684dc9f179e560c0d80d7e5176572cbb7b06938a2f93326cd6ca764f118ffab87ca91b8877c207a87fb402e3c8fc762ba7bd00ff28def9cb1a2b67053172185ac504c2c23275a76720934d3b4728965a4507f754b97e3d5550e5ce09d551d28ac269f1539820f2bf38c0bea32c07c226ab352414d1e38f2d09a575702fe305ab944ea47f2a920fdcd440a02b453688f59b27eb729ccde774a63b9a157d55461de7a8a80d1341ce21571b6b7e6783b4ff411601a70ee826ffb2750e55f147d8d808d653653a4259db28d672d56f70ccc30cf84620a4182832c63fedc69aa300e49cf75a4c059b856295abdfba7e42f58c6039613a70735124b6e04856eae56507f8605eaf12ce74c9ecaf2ff7c4c8d755cbdc787e04d258f800bcac9b7c9b962cf86b28d1a93982dd5779242becdf25edf5207a6b43770d6e5b988cccfdbc2b132271e023749bb0b03a11f1c6b0d50ea629b5fcdec8854fcb0a997f7e1654fb9939255ddcc9bcaea6de10c2a0fbae14d2454c73f17205c11e4e3069a241d0b1ea5c26373af368397099dd578cbd65403daa4b8a1bdffd63e8a45584ea924b25730ebc42ba407a4ecef592e0d1ea962c9e5e71412fb97d928eee1c8541d550145664698d31914d4740ff82c43b048a46d2792ef40459599a850bf9b88241b6f1da03fc8be8945a4fad842d0d55ab925b42b88f6e8ec326d50de6e7f34357629ea3dff6811f147206e7e8af018f19f1429cfb82695f7d29a8b99c63a4d513672039fa14d9314526b5be9fdf6c8a7ecc0c289433d75152de1cf1ca696116470b3f7bfda269953194d0e931ab4f978fdac96cb9049332c768750ceb6a479d24687c3733c2163c0c034e67ded14c06b33fd4621dd55c9b6c149498200dc90cc3a235192cef5f6aaada9480a60a6c82c25a7cd5ea71cc4fdd8ae700e6a0505324231689e393779a4e214965d157121f6e18a2436add9df75e5e27896a52288d0795a55b672a8bc3c5ca133b68da1a3bb7df045a5dbc69092cc640e6670ecfd3c831d7a19dec3785e57f6c32d6f0c58cfa9be6f9a650b3c0a6fffd948cd474d4899ed354373064faf7a04ce178e36d6063e07784a8d92599dcd13bd649be5e55ac5d83fed4e2727fba3373a98525c1f4af408427559ce7c774093c444d9cb19cfe803811edc4eeffc2c417582e8d8e244ed3b967725ad46d7e7165d631f21380e3b8e22b2a80babeed86763571541f949bea0c9da465ca7cea049acbc4f6e72ad9cf43bb8a45d0fc2ecbb0feef826dc09c4293a9d6b2fd124df9d90627c458aa8c512d8490d29b9a845ab3ec427f32bf28a99fefc4efa4982a505f4918d523b4a97c9f7777d522227e4626eff5117dc3b71842bb6c417d329b3463b987d46b71f2ee96dc5b8e891d2aca23ba7598ff48297c497ba47b024a99feb881d21f5bab9083c1d0edc711d38cb2b8bbd10dd584a0b88a1370cfde97fb362d369ef2cdbbd6f95ceec593afafe2b1e5f99f1dea40a411db8f56b3be1c58da551b9a10c68087b0da8c28174860490a408fcaf749f571419d6893cee67c0a4fb7fa3364717e02f10c7ae7c8369ddbf38cbb2422dc0f888159fcb7c644b1d253cd555d7fef4c4e843a0699943aa623312d1820eb70f06cacbf1d55f3e47fe87265fcfe05b199c4b05dacfa59fb0bea48545fecc037cba384e6462d1584d2ad402f2a50ed78219cf5acf28d1118c475a724e58eaaa3b4cb28358876c3ce081342d0f9d8ae252a5543dc3f45de2049ec4970f8657d8d7cf0b0400b75742a9b20205f684d92990098d2fe8365d4934fb4f3cd11c9e9adb807a22a6d375e0d3dd420349e0a3ba4b00839952f7d2dd1d70ddae77f2409ffd02109148676ac0f2ad6a6903e7a8ded278f4fe555708f9e78aca3b855a41fddd793499c930c808992f512f4262ca03c6576754eb6b3fdad44a41399021e5b529c26cdeb8040cb26d13969b3414237d37479c2f03c26cc09bf15220652da8c1f7ed90f16d7de9ebeafdec6d0fffe390505315a5ad1c7b48b80c27b55cf96863a2943130cbb6c2ef43c53fa0d00c57c3fe2d46a788e5efd86ee6b2691fb19484e5cb97901fffe9696f461b578d1aa792b63e0d989efa8173985fff34b3d6e5dd2626acfdd73435c371c9a7a65c76af9c1f3ab5fb3e7680d3d57745b58c6b0acd2c25f16e094150450158f8b15fc167e7199c4e1069385a0c3c8880e4a43daca143a0b10cfc822970b95980e58fd8081059b0f8b803f519da1459eb755169355d71c219e4501e5b8dc1e1933205367ffb89e0f28132550f045b6569a5eadb4fec08311557e14620116924b752a799dcbdac4fd1765d317649d722e520a9068d798d04fdc22cd83a7c23d3eaf40d80eb4822fff409e532729b56cc62bdb26a5c56c91971d24f504b8cea72c34847748b8e3e80ea70aa663516f4acdd893c97259dae2fd6b6982632d51f32ea5d2983e25f0fc2f390168aef3344f0a8b15484dd4f5486b43333d5f891e4ca3004a8beb7600ce9855666e9da2b5a246641d13e20c479fa5d9b1017f38d22883609e00d6a7e095302ef1397d021538ce49dbfc80db2794dd065d41e87031069c19d074ce158070eb52f3e3d6942a578bcc4629306685519e51af14fb4b04eae2d4476b81154063211a2a3ccb77b13c01e90cb16e480a8db2ba982e0a8cec70ea0f738d9ebe9596ad69537572ff3e93ba2f3cf2a6d37088a30168c0023d2cb376e2ca5dde7fcbfefc4848d5eaa83aa75c24342374d4032b4ec7b72dfcb7ee8bfa8f04c693e55ee0ce0ec10e50a4335996c39d7d5354423bbe7a011557df4eefea5fc600ff432c522653a8e3d44324bdb83a0ab9d4c6c408f6607baa6a26b6a134eeb6c80ce011593e2e3a6d968eae95e170a179895e9adc1519b89eb0f3e2d12f22fba376bea0a2e3a930dc8c0db7877eec1828b0641b90293d81d016ebc749b11299883086316688e4cb9b62053f142df8fa82aabd5b6a2ac5dc12cda6f6af25a9638d747c59d6540539d28141c106674ee525cdc6ab2761bb734a7143a2e604007a80358c67a99f9d0c90fbe16d2ef69683e1cf1d37293f59325d9886e01cc617b2021aa5d301c68413e7fe94d7407e487efa5d284af9a341292911fe4fc20c6d0d83148be2457a7114696674359ae119771faf95512b2465388c626d073126cea100d2660b6ba178e095f787a48c1af7805b93b7cb7b6fdfe6210a52ca0ef7953e9621678d491f352b39276266f4a949f09260fecae3073dd7ebb31f05b25ac99c125f2807d50d1db4afd0558745ab7a16d7e31ad455645234889ccbc21d0800488bfc0fbb5299dc1a654686e558929b4a122ebe39bef4b4f6f1f3c1efba80c652fa0f8ab194d4a4b5cf7cd18df657c79b10f50c5fb7bc7d05a93ef594f97ed1735cfa2c04b1c785f5718e0694648151f01c531750cf22deee438d607d4087c16cf453210e161970c7b98d3480d05c2544b47a5e289b383aaa9555f3b650d0b0a61fb2c7601fb2dedad703be0c4484b1ef6d31cf5ec853e2d9a540e58f0666a2708267ba36a9c34af0c6511e8c10507550de9afff0bb9884ca0ab13e164c2929bbb46a9ffa783500f4c90eca66d58c695c1fc9a49364b3ca78928338cd6f11efec81161e63766b3e1dd1bab3848dc06371eba252f8782b6df2635e993cd2fa53e989b6e5f5881a484380abfa127e2afe08c3d37e745a6a4274238025c663d8bc66bd019ab27e5683995e0bc42ac3cce154c304507f424c76b492c0d38971507a9025429c14d1dd7eb5fe6916df7effeb4e365a7127fc8ad5d128cfbb2c050dde06c23ae198786f1d9f525a8f619682eec6c53448b75cff08e89af25efd9f3063f57680a41924e69d0305fb1ce4fa066073e1cb374f275c7843a1a162bed7379af7b26e5f9f048764868378d1702d3f2c83547ce5517b99cd3f439059b4d34c37e2c5a447e484d4859961c2b8c60160bbf4cd64130c78084537ca7664bf8bc86ee8c0cace499058d88a4a9f3dc14d3a7429edab57ec3ab1b9bbdfd058b499a0332bcde9afeacc134610822472bc67cb6c16d1c594f1aeffd21a88b575e584eeb089b159ab17c3d16f567d5123124e175c3091793c28dc9731bcb358655d03401e21d9bfab2c8128aa72895bd2c4298c7727b38d1361adc462f95c46dc8455c58dafc19ed941f04670266b805d4a2657e3d9592ff9dfbdd85876280168bc117781206b7e1af346f41810b10afca6a7c325a995c75e8da5805b7c5332dc3d6f72ee0d92f4548f0d98256550a3712811763da1ed7bf54d05c32b4ef7bc2cd02e6bba42999a437c462d0d9f1c7f822d3dddae40c6d6e813aac399a249eb5d0cc9037260a7747a9f827d4ba4c2fd697d9f4a40dd585e22542e328dbd69b24a113fddf70f45275e174539e9bb25d5ae521ce82455841425fa5383a162be00b35e050dec35a23d771de969e9d268135cd7da509f7e5c6a22bdec89cd7ee84de1cae2ed2c1276882c66c8dcf373be42e245fd2d10c64d8e1537b3733d2f6d23de5b7b4d245e64f48f19561ed1115bf2fd06d7bb497f2819796da8f5ec1b694868b408d50dd865b9f323d19efd65d16da836411074d89c507c065bc47b5e17d53677436980fffdfc7fa28ef1704a6f85a568dbaebfff3a83d2ebfbc0c427ad35c8d71c67e9ac8894bbeb38eadecc44906f919ba4c014f7fde1293bd688d803be015c7f23877dcca0fa9ed40024c6c012526575e713ca5a0c476338d0482bdbcbfea0d70a78d8c57c00847b9d2e6707684a908f3d5df9907b4f6cb7e1900e35d5f35b8e2795304930f8405cbe51bd991970a6a686094d8469810d37b7ccef2a08e56a2835ada08c18e6be3cd0426b58d823928c8581267e68e5c23e38966f8cb223c4908fc03d7e6263d6ce580581fddf307e66be240a7a6b2fafe3ebb27af6c3c8421274938714edae14fec3f118a8cfe266a48aa3098f311287841401d5abacb23a7b41303fd325e226d0b7d07bd5c803c052b39b5f5b38988b7886e6c39996942a0c2ef61505464e26ce8976fb0ae08046afae13007a02fc31d95d6c75b6f04d7826f076d9574e7ef3094057b0ef7ebc9935ae93d7f8eeb71ab74611feb9925a6f078720d2d6cb6b9636747d5b8908c7d4d06361f8cce9dafdda10965f1f9ced4535713091a332d110643634cf8205df9cf21227dea35bc8dc934e43bac373c25a1087c4c82a0abba1eb5be36e324be49f3f6f6929568f05284786d1c6582ec0f98b1262074a06aaab7dda37e302ade247838149e805d63dcdbc367c1f4090ead3840f974b8021666ac068e41a05cac7977377af1c7cd1f9ddca4152deb999474e02c0a3694f1b1d8c6a2bb244c48de230236878a1a63f64947b0d21f1eac6be7964d52f75b912f537a8eae784d83d3fad6418a641f39fa7ff6e3bb2320115c570d44e71aec557d10b09fed3a4401eb1d9709a2150dbbe8948d041422cee28a4bb0efc613ab18c63749b95422c1f6a6b1bb551f59b487e308c95b5bccdac65fddd7f0a530cd47a0fa53178391b19d5bb1184a70f5c42918f96f8647f6e2d91af43403a46fa1e6681ecc09af60648fa48190a245d6f4bfb7c80fc2f475a9d081a2833b6a558af59d2409150d2eee1980256984602037e7c187c00b0332d8be111d690bf8350808b1585c2000896a58bc173a05c61578ac4afe04a00e1456a0b5d0b4fc336035955f8f5431a27c9db589b281e286d4403184f983b3adea6d042cfba24c623e19d0693abe28735274547b79ca56c0c275cd50d3777309f874e800f9a8a8bc0dddd806bda1a54420eab14001891a86b029fcf68ca3851efa039855237b5664115dd8bb9f37bc9f114ffb1cb5785b80eb5648131e7029d888b5a331cb15d56dea67c141055b382c4b5ac48ad1007c7930489a15f72d5ee49e40e5238e739748ee7c054e6a7c557bed5eac49f0c9a3b74e7e8f3a7f717db372fdfcf3c97e90c51474d64bff7fa2cfc4be7deb49f23436098d89e20b359a4c2b55a4dff992f2805c9f8c9d506de60865f6d981070eb4b9d806822f16a7066004ad740cac1afc4aefc7e1e65eb528c6d020a32150f1642721de414a8f7e15466f67a9b9972a07b27d6a1db7e3a0b2caaf7f6d0978ae2c3b43b702b9a33913e908d6ff5f950975a06e4ca8b0175ae7574ea1ef7760d7f3717c2c08b60a77d79b70ec24eeff174bd1bd0cef4764d684e52fa01d72f09257e763b281580320ac45003b0dafb37270642a058efe18c012fc52a3783da7e9ed536cdb118836c5f2a78a6a726cd85620ebdd124e8aecc9763e72fb175f3ad5b8c10f112b75095bd4c7fa9046852cc321da8d0001440dcae526ec96ba8d4ae5b15f2460a42a70fa6ab0b3da27e7f8f41ecb68cf635d2861317a9fd52d93c977ed28087ccf4ebdb1f762df09c1f51518998615d9b7bf60a4790a28673df6927a6a86ece784a2e4565c4c1d73407ae8612f13d6e31ccaae40ce42d755137f47ed5f9209f08cadf964f2cac5bbed98ce160dc375d61d6006d4f3bdf0cbab6815ddc8fe02492ff66ccef08e2f2abb29b3f548be96bd05d48d4495a54fbd76a32ad746eb079e512bd03cc81ce89a0a795f44bed5fc8ecb15155e60564fcd3bdf7fc8da86ac74e519906dd746dfd7806fb486970e68c8343f9846f325f2304a2d03614bdd6dd2db3c964f74081568b86895d670b363e702e61795c103984c54cd74d62889b3c1e0b6d2aae59ac647f1e5bb8a625d64bd282c384f0ae620841fab902753c638d3530cfcf98ce5a5150e9513bc833c71dc8d8d1373980a05d3cac2027b600ceedbe6b0bd56f94a548108870066f4bc0bfcdc369b3006787b39c5654287da2933a574f60d8baa836800920ee798b07128b10383ad555b6f72b345a2ae175b49fdcc1b026049100b4426d304c1b66efa01e1072dbc72d387c2f93232421cea57dfa627e98587dae0d7f0de9cdfd7d1389aa504ec92c7a76d37f63d466f6513d2990d9cc3e275afd26c100eb609dcf9e78af09f43d7a05a195e2221c3fb327d753ea37ff563ab66c70bd9f404d2a9e006b7c1fa90ccc1a66d4ea9d72e6fc90912037330c7a286670ddd7ec61ccfc05419b89a283c3e958f9b604abd5bb2c9239eb304b3b6c6911259c535c4ba7ddf02916090d85568ee0ca39f0288e58b7fb66996dd0102edc58f917b6012c1657b15eace6f0a222884c735d77654c21795e4310a0e77fee020bb0eab744a5caffdd73eb3c4be735ffc031c97f92d74d865498159c218e44e63dd2533a292b8fdcaa33f2fdeb8fbcc46f25a51df7b2abe39981fd8790d22c0cff2d2da4529b6f8598032cbddd8098bdc71ffc2a407de009853d528fd67819e4c137ce73b0fca489e0d30daf243029af87a7b47f1f8e65cd1a31aec84baf14e71e95580cafd85bbe1da</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
