<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>8b10b | HonkW</title><meta name="keywords" content="dc balance,8b10b,5b6b,3b4b"><meta name="author" content="HonkW"><meta name="copyright" content="HonkW"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="8b10b编解码">
<meta property="og:type" content="article">
<meta property="og:title" content="8b10b">
<meta property="og:url" content="https://blog.honk.wang/posts/8b10b/index.html">
<meta property="og:site_name" content="HonkW">
<meta property="og:description" content="8b10b编解码">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/cover/8b10b_cov.png">
<meta property="article:published_time" content="2024-07-28T11:07:06.000Z">
<meta property="article:modified_time" content="2024-09-19T10:10:18.922Z">
<meta property="article:author" content="HonkW">
<meta property="article:tag" content="dc balance">
<meta property="article:tag" content="8b10b">
<meta property="article:tag" content="5b6b">
<meta property="article:tag" content="3b4b">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/cover/8b10b_cov.png"><link rel="shortcut icon" href="/img/doreamon.ico"><link rel="canonical" href="https://blog.honk.wang/posts/8b10b/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google_site_verification" content="google464c10a523d2ba77.html"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?3068df165b288752e59e1ecc160d66b5";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":100,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '8b10b',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-19 18:10:18'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HonkW93/cdn4blog@master/background/bg/background.css"><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="HonkW" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">14</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home faa-shake animated"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/messages/"><i class="fa-fw far fa-comment-dots faa-shake animated-hover"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-file-alt faa-horizontal animated-hover"></i><span> 文章</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/statistics/"><i class="fa-fw fas fa-chart-line"></i><span> 统计</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-icons faa-flash animated-hover"></i><span> 生活</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/photo/"><i class="fa-fw fas fa-image"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-headphones"></i><span> 音乐</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://diary.honk.wang"><i class="fa-fw fas fa-book faa-shake animated"></i><span> 日记</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-wrench faa-wrench animated-hover"></i><span> 工具</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://honk.wang/"><i class="fa-fw fas fa-globe"></i><span> 主页</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://pan.honk.wang/"><i class="fa-fw fas fa-cloud-upload-alt"></i><span> 网盘</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw far fa-user-circle faa-spin animated-hover"></i><span> 关于</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw far fa-address-book"></i><span> 自己</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://resume.honk.wang/"><i class="fa-fw far fa-id-card"></i><span> CV</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://timeline.honk.wang"><i class="fa-fw fas fa-history faa-spin animated"></i><span> 历史</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/cover/8b10b_cov.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">HonkW</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home faa-shake animated"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/messages/"><i class="fa-fw far fa-comment-dots faa-shake animated-hover"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-file-alt faa-horizontal animated-hover"></i><span> 文章</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/statistics/"><i class="fa-fw fas fa-chart-line"></i><span> 统计</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-icons faa-flash animated-hover"></i><span> 生活</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/photo/"><i class="fa-fw fas fa-image"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-headphones"></i><span> 音乐</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://diary.honk.wang"><i class="fa-fw fas fa-book faa-shake animated"></i><span> 日记</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-wrench faa-wrench animated-hover"></i><span> 工具</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://honk.wang/"><i class="fa-fw fas fa-globe"></i><span> 主页</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://pan.honk.wang/"><i class="fa-fw fas fa-cloud-upload-alt"></i><span> 网盘</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw far fa-user-circle faa-spin animated-hover"></i><span> 关于</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw far fa-address-book"></i><span> 自己</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://resume.honk.wang/"><i class="fa-fw far fa-id-card"></i><span> CV</span></a></li><li><a class="site-page child" target="_blank" rel="noopener external nofollow noreferrer" href="https://timeline.honk.wang"><i class="fa-fw fas fa-history faa-spin animated"></i><span> 历史</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">8b10b</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-07-28T11:07:06.000Z" title="发表于 2024-07-28 19:07:06">2024-07-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-09-19T10:10:18.922Z" title="更新于 2024-09-19 18:10:18">2024-09-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/ic/">ic</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/ic/design/">design</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/ic/design/serdes/">serdes</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>26分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="8b10b"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/8b10b/#post-comment"><span id="twikoo-count"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="font-color-b5d5ff-stylefont-weightbold背景font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold背景font"></a> <font color= #b5d5ff style='font-weight:bold'>背景</font></h1>
<ul>
<li>
<p>关于为什么要进行<code>8b10b</code>编码，主要是为了直流平衡（<code>dc balance</code>），由于交流耦合会导致信号抖动、<code>ISI</code>等问题。可以参考<a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.csdn.net/qq_37654178/article/details/112391245">8B/10B编码基本原理</a>。</p>
</li>
<li>
<p>本文基于<code>1983</code>年<code>IBM</code>的<code>8b10b</code>编解码的原文章<a target="_blank" rel="noopener external nofollow noreferrer" href="https://ieeexplore.ieee.org/document/5390392">A DC-Balanced, Partitioned-Block, 8B/10B Transmission Code | IBM Journals &amp; Magazine | IEEE Xplore</a>。</p>
</li>
<li>
<p><code>8b10b</code>编码分为<code>5b6b</code>和<code>3b4b</code>两个部分，其编码逻辑如下图所示：</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/8b10b_enc.png" alt="8b10b_enc" /></p>
<ul>
<li>一般材料会采用<code>5b6b</code>和<code>3b4b</code>如下的两个编码表，但却没有说明<code>EDCBA</code>到<code>abcdei</code>的命名方式，以及原本编码的具体逻辑。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/5b6b_enc.png" alt="5b6b_enc" /></p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/3b4b_enc.png" alt="3b4b_enc" /></p>
<h1 id="font-color-b5d5ff-stylefont-weightbold原理分析font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold原理分析font"></a> <font color= #b5d5ff style='font-weight:bold'>原理分析</font></h1>
<h2 id="font-color-b5d5ff-stylefont-weightbold数据码font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold数据码font"></a> <font color= #b5d5ff style='font-weight:bold'>数据码</font></h2>
<h3 id="font-color-b5d5ff-stylefont-weightbold5b6bfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold5b6bfont"></a> <font color= #b5d5ff style='font-weight:bold'>5b6b</font></h3>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/5b6b_d.png" alt="5b6b_d" /></p>
<p><code>D.x.y</code>中的<code>.x</code>代表<code>8b</code>数据中<code>5b</code>的部分，比如<code>D.13.y</code>就是<code>5'b01101</code>。</p>
<p><code>5b6b</code>的编码逻辑：</p>
<ol>
<li>将<code>5b</code>数据<code>EDCBA</code><font color= red style='font-weight:bold'>倒</font>为<code>ABCDE</code>，最后一位<code>I</code>统一补<code>0</code>，形成<code>ABCDEI</code></li>
<li>观察<code>ABCDEI</code>的<code>0</code>，<code>1</code>数量是否平衡，
<ul>
<li><code>0</code>，<code>1</code>平衡（各<code>3</code>个），直接输出<code>abcdei=ABCDEI</code></li>
<li><code>0</code>，<code>1</code>不平衡，根据码表进行比特位翻转
<ul>
<li>码表无标<font color= red style='font-weight:bold'>红</font>比特位，直接输出<code>abcdei=ABCDEI</code></li>
<li>码表有标<font color= red style='font-weight:bold'>红</font>比特位，翻转对应比特位</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>举例：</p>
<ul>
<li>
<p><code>D.11.y</code>：<code>EDCBA=01011</code>，倒转补<code>0</code>后<code>ABCDEI=110100</code>，<code>0</code>，<code>1</code>平衡，不需要翻转码字，<code>abcdei=ABCDEI=110100</code></p>
</li>
<li>
<p><code>D.18.y</code>：<code>EDCBA=10010</code>，倒转补<code>0</code>后<code>ABCDEI=010010</code>，<code>0</code>，<code>1</code>不平衡，根据码表翻转码字<code>I</code>，<code>abcdei=ABCDEI'=010011</code></p>
</li>
<li>
<p><code>D.24.y</code>：<code>EDCBA=11000</code>，倒转补<code>0</code>后<code>ABCDEI=000110</code>，<code>0</code>，<code>1</code>不平衡，根据码表翻转码字<code>C</code>和<code>E</code>，<code>abcdei=ABC'DE'I=001100</code></p>
</li>
<li>
<p><code>D.30.y</code>：<code>EDCBA=11110</code>，倒转补<code>0</code>后<code>ABCDEI=011110</code>，<code>0</code>，<code>1</code>不平衡，根据码表，不需要翻转码字，<code>abcdei=ABCDEI=011110</code></p>
</li>
<li>
<p><code>D.31.y</code>：<code>EDCBA=11111</code>，倒转补<code>0</code>后<code>ABCDEI=111110</code>，<code>0</code>，<code>1</code>不平衡，根据码表翻转码字<code>B</code>、<code>D</code>和<code>I</code>，<code>abcdei=AB'CD'EI'=101011</code></p>
</li>
</ul>
<h3 id="font-color-b5d5ff-stylefont-weightbold3b4bfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold3b4bfont"></a> <font color= #b5d5ff style='font-weight:bold'>3b4b</font></h3>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/3b4b_d.png" alt="3b4b_d" /></p>
<p><code>D.x.y</code>代表中的<code>.y</code>代表<code>8b</code>数据中<code>3b</code>的部分，比如<code>D.x.4</code>就是<code>3'b100</code>。</p>
<p><code>3b4b</code>的编码逻辑：</p>
<ol>
<li>将<code>3b</code>数据<code>HGF</code>倒为<code>FGH</code>，最后一位<code>J</code>统一补<code>0</code>，形成<code>FGHJ</code></li>
<li>观察<code>FGHJ</code>的<code>0</code>，<code>1</code>数量是否平衡，
<ul>
<li><code>0</code>，<code>1</code>平衡（各<code>2</code>个），直接输出<code>fghj=FGHJ</code></li>
<li><code>0</code>，<code>1</code>不平衡，根据码表进行比特位翻转
<ul>
<li>码表无标<font color= red style='font-weight:bold'>红</font>比特位，直接输出<code>fghj=FGHJ</code></li>
<li>码表有标<font color= red style='font-weight:bold'>红</font>比特位，翻转对应比特位</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>举例：</p>
<ul>
<li>
<p><code>D.x.3</code>：<code>HGF=011</code>，翻转补<code>0</code>后<code>FGHJ=1100</code>，<code>0</code>，<code>1</code>平衡，不需要翻转码字，<code>fghj=FGHJ=1100</code></p>
</li>
<li>
<p><code>D.x.1</code>：<code>HGF=001</code>，翻转补<code>0</code>后<code>FGHJ=1000</code>，<code>0</code>，<code>1</code>不平衡，根据码表翻转码字<code>J</code>，<code>fghj=FGHJ'=1001</code></p>
</li>
<li>
<p><code>D.x.4</code>：<code>HGF=100</code>，翻转补<code>0</code>后<code>FGHJ=0010</code>，<code>0</code>，<code>1</code>不平衡，根据码表，不需要翻转码字，<code>fghj=FGHJ=0010</code></p>
</li>
<li>
<p><code>D.x.7</code>：</p>
<ul>
<li>
<p><code>D.x.P07</code>：<code>HGF=111</code>，翻转补<code>0</code>后<code>FGHJ=1110</code>，<code>0</code>，<code>1</code>不平衡，根据码表，不需要翻转码字，<code>fghj=FGHJ=1110</code></p>
</li>
<li>
<p>若<code>D.x.P07</code>有码流不平衡风险，则使用<code>D.x.A07</code>（<code>Alternative</code>，备用码）根据码表翻转码字<code>F</code>和<code>J</code>，<code>fghj=F'GHJ'=0111</code></p>
</li>
<li>
<p>关于<code>D.x.P07</code>和<code>D.x.A07</code>，后续章节会详细讲解。</p>
</li>
</ul>
</li>
</ul>
<h3 id="font-color-b5d5ff-stylefont-weightbold数据极性font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold数据极性font"></a> <font color= #b5d5ff style='font-weight:bold'>数据极性</font></h3>
<p>不论是<code>5b6b</code>编码，还是<code>3b4b</code>编码，其编码均有属性叫做极性（<code>disparity</code>），极性代表这个码字<code>0</code>和<code>1</code>的数量多少。</p>
<p><code>5b6b</code>举例：</p>
<ul>
<li><code>D.24.y</code>，其<code>6b</code>编码为<code>001100</code>，<code>0</code>比<code>1</code>的数量多<code>2</code>，其极性为<code>-</code>，实际为<code>-2</code></li>
<li><code>D.30.y</code>：其<code>6b</code>编码为<code>011110</code>，<code>1</code>比<code>0</code>的数量多<code>2</code>，其极性为<code>+</code>，实际为<code>+2</code></li>
<li><code>D.11.y</code>：其<code>6b</code>编码为<code>110100</code>，<code>1</code>和<code>0</code>的数量一样，其极性为空，实际为<code>0</code></li>
</ul>
<p><code>3b4b</code>举例：</p>
<ul>
<li><code>D.x.0</code>：其<code>4b</code>编码为<code>0100</code>，<code>0</code>比<code>1</code>的数量多<code>2</code>，其极性为<code>-</code>，实际为<code>-2</code></li>
<li><code>D.x.7</code>：其<code>4b</code>编码为<code>1110</code>或<code>0111</code>，<code>1</code>比<code>0</code>的数量多<code>2</code>，其极性为<code>+</code>，实际为<code>+2</code></li>
<li><code>D.x.6</code>：其<code>4b</code>编码为<code>0110</code>，<code>1</code>和<code>0</code>的数量一样，其极性为空，实际为<code>0</code></li>
</ul>
<p>观察<code>5b6b</code>和<code>3b4b</code>的编码表可以发现，输出的<code>6b</code>编码和<code>4b</code>编码只存在两种形式：</p>
<ul>
<li>
<p>极性码</p>
<ul>
<li><code>0</code>和<code>1</code>的数量不平衡的码字，编码表中不平衡数量仅为<code>2</code>，因此极性码的极性为<code>±2</code></li>
<li><code>001100</code>(<code>+2</code>)，<code>011110</code>(<code>-2</code>)等是<code>6b</code>极性码</li>
<li><code>0100</code>(<code>+2</code>)，<code>1110</code>(<code>-2</code>)等是<code>4b</code>极性码</li>
</ul>
</li>
<li>
<p>平衡码</p>
<ul>
<li>
<p><code>0</code>和<code>1</code>的数量平衡的码字，平衡码的极性为<code>0</code></p>
</li>
<li>
<p><code>110100</code>，<code>101001</code>等是<code>6b</code>平衡码</p>
</li>
<li>
<p><code>0110</code>，<code>0101</code>等是<code>4b</code>平衡码</p>
</li>
</ul>
</li>
</ul>
<h4 id="font-color-b5d5ff-stylefont-weightbold极性码font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold极性码font"></a> <font color= #b5d5ff style='font-weight:bold'>极性码</font></h4>
<p>极性码按照码表编码，但最终输出的码字有两种。</p>
<ul>
<li>直接编码出来<font color= red style='font-weight:bold'>原始</font>的码字</li>
<li>直接编码后<font color= red style='font-weight:bold'>按位取反</font>的码字</li>
</ul>
<p>举例：</p>
<ul>
<li><code>D.24.y</code>，原始<code>6b</code>编码为<code>001100</code>，其极性为<code>-</code>，另一种码字为<code>110011</code>，其极性为<code>+</code></li>
<li><code>D.30.y</code>：原始<code>6b</code>编码为<code>011110</code>，其极性为<code>+</code>，另一种码字为<code>100001</code>，其极性为<code>-</code></li>
<li><code>D.x.0</code>：原始<code>4b</code>编码为<code>0100</code>，其极性为<code>-</code>，另一种码字为<code>1011</code>，其极性为<code>+</code></li>
<li><code>D.x.7</code>：原始<code>4b</code>编码为<code>1110</code>，其极性为<code>+</code>，另一种码字为<code>0001</code>，其极性为<code>-</code></li>
</ul>
<p>极性码是<code>±</code>极性（<code>positive</code>/<code>negative</code> <code>disparity</code>）的。</p>
<h4 id="font-color-b5d5ff-stylefont-weightbold平衡码font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold平衡码font"></a> <font color= #b5d5ff style='font-weight:bold'>平衡码</font></h4>
<p>虽然平衡码都是<code>0</code>和<code>1</code>的数量平衡的码，但他们码字中<code>0</code>和<code>1</code>的间隔不一定一致，可简单分为两种。</p>
<ul>
<li>
<p>完美平衡码（<code>Perfect Balance Code</code>）</p>
<ul>
<li><code>6b</code>编码：<code>010101</code>，<code>010101</code>，<code>101100</code>等</li>
<li><code>4b</code>编码：<code>0101</code>，<code>1001</code>等</li>
</ul>
</li>
<li>
<p>不完美平衡码（<code>Imperfect Balance Code</code>）</p>
<ul>
<li><code>6b</code>编码：<code>111000</code></li>
<li><code>4b</code>编码：<code>1100</code></li>
</ul>
</li>
</ul>
<p>平衡码是<code>0</code>极性/空极性（<code>zero/null disparity</code>）的。</p>
<h4 id="font-color-b5d5ff-stylefont-weightbold特殊极性码font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold特殊极性码font"></a> <font color= #b5d5ff style='font-weight:bold'>特殊极性码</font></h4>
<p>前面讨论过，<code>D.x.7</code>是一种特殊的极性码，他有两种原始码字。</p>
<ul>
<li><code>D.x.P07</code>：原始<code>4b</code>编码为<code>1110</code>，其极性为<code>+</code>，另一种码字为<code>0001</code>，其极性为<code>-</code></li>
<li><code>D.x.A07</code>：原始<code>4b</code>编码为<code>0111</code>，其极性为<code>+</code>，另一种码字为<code>1000</code>，其极性为<code>-</code></li>
</ul>
<p>这种特殊的极性码是为了码间的直流平衡设计的，关于<code>D.x.P07</code>和<code>D.x.A07</code>，可以参考<a href="#%E7%A4%BA%E4%BE%8B2">示例2</a>中的实际使用。</p>
<h2 id="font-color-b5d5ff-stylefont-weightbold极性控制font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold极性控制font"></a> <font color= #b5d5ff style='font-weight:bold'>极性控制</font></h2>
<h3 id="font-color-b5d5ff-stylefont-weightbold运行极性font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold运行极性font"></a> <font color= #b5d5ff style='font-weight:bold'>运行极性</font></h3>
<p>运行极性/运行不一致性（<code>Running Disparity</code>，<code>RD</code>），指的是在编码产生码流的过程中，实时的码流极性。</p>
<p>比如编码<code>D.30.6</code>+<code>D.11.4</code>的码流，运行极性（<code>RD</code>）分析如下：</p>
<ul>
<li>编码过程：<code>011110</code>+<code>0110</code>+<code>110100</code>+<code>0010</code></li>
<li>假设初始极性为<code>-1</code>，则运行极性（<code>RD</code>）：<code>RD = -1 + 2 + 0 + 0 - 2 = -1</code></li>
</ul>
<h3 id="font-color-b5d5ff-stylefont-weightbold运行长度font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold运行长度font"></a> <font color= #b5d5ff style='font-weight:bold'>运行长度</font></h3>
<p>运行长度（<code>Running Length</code>，<code>RL</code>），指的是连续<code>0</code>或者<code>1</code>的数量，注意运行长度不止代表码字内的连续<code>0</code>,<code>1</code>数量，也代表码字间的连续<code>0</code>,<code>1</code>数量，是衡量整个数据流是否直流平衡的一种方式。</p>
<p>比如编码<code>D.30.6</code>+<code>D.11.4</code>的码流，运行长度（<code>RL</code>）分析如下：</p>
<ul>
<li>编码过程：<code>011110</code>+<code>0110</code>+<code>110100</code>+<code>0010</code></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/rl.png" alt="rl" /></p>
<h3 id="font-color-b5d5ff-stylefont-weightbold控制原则1font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold控制原则1font"></a> <font color= #b5d5ff style='font-weight:bold'>控制原则1</font></h3>
<p>控制直流平衡，有两个方面的考虑：</p>
<ul>
<li><code>-2&lt;RD&lt;2</code>，运行极性不超过<code>±2</code>，即总体码流的<code>0</code>,<code>1</code>数量相同</li>
<li><code>RL&lt;5</code>，运行长度不超过<code>5</code>，即总体码流连续<code>0</code>,<code>1</code>数量不超过<code>5</code></li>
</ul>
<p>这里首先考虑<code>RD</code>的控制总体原则：</p>
<ul>
<li>当前编码极性为空（<code>0</code>），则<font color= red style='font-weight:bold'>继承</font>码流极性，当前编码不变</li>
<li>当前编码极性非空（<code>±2</code>），则保持码流极性平衡
<ul>
<li>若当前编码与码流极性相同，则按位取反，<font color= red style='font-weight:bold'>翻转</font>极性</li>
<li>若当前编码与码流极性相反，则保持编码，<font color= red style='font-weight:bold'>保持</font>极性</li>
</ul>
</li>
</ul>
<p>简单来说，就是<code>0</code>多了补<code>1</code>，<code>1</code>多了补<code>0</code>，<code>0</code>、<code>1</code>一样多则不变的意思。</p>
<h3 id="font-color-b5d5ff-stylefont-weightbold示例1font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold示例1font"></a> <font color= #b5d5ff style='font-weight:bold'>示例1</font></h3>
<p>假设发送码流<code>8'h55,8'hC0,8'hF2,8'hF4</code>，初始极性为<code>RD=-1</code>，编码极性简写为<code>disp</code>（<code>disparity</code>）</p>
<ol>
<li><code>8'h55=8'b01010101</code>
<ul>
<li><code>5B=5'b01010=5'd10</code>，<code>3B=3'b101=3'd5</code>，<code>D.10.5</code></li>
<li><code>5B</code>编码：<code>6B=6'b010101</code>，<code>disp=0</code>，继承码流极性，<code>RD=-1+0=-1</code></li>
<li><code>3B</code>编码：<code>4B=4'b1010</code>，<code>disp=0</code>，继承码流极性，<code>RD=-1+0=-1</code></li>
</ul>
</li>
<li><code>8'hC0=8'b11000000</code>
<ul>
<li><code>5B=5'b11000=5'd24</code>，<code>3B=3'b000=3'd0</code>，<code>D.24.0</code></li>
<li><code>5B</code>编码：<code>6B=6'b110011</code>，<code>disp=+2</code>，保持极性（当前码流<code>RD=-1</code>），<code>RD=-1+2=+1</code></li>
<li><code>3B</code>编码：<code>4B=4'b0100</code>，<code>disp=-2</code>，保持极性（当前码流<code>RD=+1</code>），<code>RD=+1-2=-1</code></li>
</ul>
</li>
<li><code>8'hF2=8'b11110010</code>
<ul>
<li><code>5B=5'b11110=5'd30</code>，<code>3B=3'b010=3'd2</code>，<code>D.30.2</code></li>
<li><code>5B</code>编码：<code>6B=6'b011110</code>，<code>disp=+2</code>，保持极性（当前码流<code>RD=-1</code>），<code>RD=-1+2=+1</code></li>
<li><code>3B</code>编码：<code>4B=4'b0101</code>，<code>disp=0</code>，继承码流极性，<code>RD=+1+0=+1</code></li>
</ul>
</li>
<li><code>8'hF4=8'b11110100</code>
<ul>
<li><code>5B=5'b11110=5'd30</code>，<code>3B=3'b100=3'd4</code>，<code>D.30.4</code></li>
<li><code>5B</code>编码：<code>6B=6'b011110</code>，<code>disp=+2</code>，翻转极性（当前码流<code>RD=+1</code>），<code>6B=6'b100001</code>，<code>disp=-2</code>，<code>RD=+1-2=-1</code></li>
<li><code>3B</code>编码：<code>4B=4'b0010</code>，<code>disp=-2</code>，翻转极性（当前码流<code>RD=-1</code>），<code>4B=4'b1101</code>，<code>disp=+2</code>，<code>RD=-1+2=+1</code></li>
</ul>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/eg1.png" alt="eg1" /></p>
<h3 id="font-color-b5d5ff-stylefont-weightbold控制原则2font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold控制原则2font"></a> <font color= #b5d5ff style='font-weight:bold'>控制原则2</font></h3>
<p>在<a href="#%E6%8E%A7%E5%88%B6%E5%8E%9F%E5%88%991">控制原则1</a>中，只讨论了<code>RD</code>控制，虽然正常的<code>RD</code>控制可保证<code>RL&lt;5</code>，但一些特殊情况需要进行特殊控制。</p>
<h4 id="font-color-b5d5ff-stylefont-weightbold不完美平衡码font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold不完美平衡码font"></a> <font color= #b5d5ff style='font-weight:bold'>不完美平衡码</font></h4>
<p>不完美平衡码的定义参考<a href="#%E5%B9%B3%E8%A1%A1%E7%A0%81">平衡码</a>。不完美平衡码也必须按极性码的做法保持码流极性平衡，保持或翻转编码。</p>
<p><code>6b</code>不完美平衡码举例：</p>
<p>假设发送码流<code>8'A8,8'h38</code>，初始极性为<code>RD=-1</code>，编码极性简写为<code>disp</code>（<code>disparity</code>）</p>
<ol>
<li><code>8'hA8=8'b10101000</code>
<ul>
<li><code>5B=5'b10101=5'd21</code>，<code>3B=3'b000=3'd0</code>，<code>D.21.0</code></li>
<li><code>5B</code>编码：<code>6B=6'b101010</code>，<code>disp=0</code>，继承码流极性，<code>RD=-1+0=-1</code></li>
<li><code>3B</code>编码：<code>4B=4'b1011</code>，<code>disp=+2</code>，保持极性（当前码流<code>RD=-1</code>），<code>RD=-1+2=+1</code></li>
</ul>
</li>
<li><code>8'h38=8'b00111000</code>
<ul>
<li><code>5B=5'b00111=5'd7</code>，<code>3B=3'b000=3'd0</code>，<code>D.7.0</code></li>
<li><code>5B</code>编码：<code>6B=6'b111000</code>，<code>disp=0</code>
<ul>
<li>此时，如果按照<code>disp=0</code>，继承码流极性，当前编码不变的话，则前面<code>4B</code>的<code>1011</code>和<code>6B</code>的<code>111000</code>会形成<code>1011_111000</code>，构成<code>RL=5</code>，即连续<code>5</code>个<code>1</code></li>
<li>因此，按极性码的做法保持码流极性平衡，此时应翻转编码，<code>6B=6'b000111</code>，<code>disp=0</code>，这样<code>1011_000111</code>，就不会有<code>RL=5</code>出现了</li>
<li><code>RD=+1+0=+1</code></li>
</ul>
</li>
<li><code>3B</code>编码：<code>4B=4'b0100</code>，<code>disp=-2</code>，保持极性（当前码流<code>RD=+1</code>），<code>RD=+1-2=-1</code></li>
</ul>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/eg_bal_code.png" alt="eg_bal_code.png" /></p>
<p><code>4b</code>不完美平衡码举例：</p>
<p>假设发送码流<code>8'7B</code>，初始极性为<code>RD=-1</code>，编码极性简写为<code>disp</code>（<code>disparity</code>）</p>
<ol>
<li>
<p><code>8'h7B=8'b01111011</code></p>
<ul>
<li>
<p><code>5B=5'b01111=5'd15</code>，<code>3B=3'b011=3'd3</code>，<code>D.15.3</code></p>
</li>
<li>
<p><code>5B</code>编码：<code>6B=6'b010111</code>，<code>disp=+2</code>，保持极性（当前码流<code>RD=-1</code>），<code>RD=-1+2=+1</code></p>
</li>
<li>
<p><code>3B</code>编码：<code>4B=4'b1100</code>，<code>disp=0</code></p>
<ul>
<li>
<p>此时，如果按照<code>disp=0</code>，继承码流极性，当前编码不变的话，则前面<code>6B</code>的<code>010111</code>和<code>4B</code>的<code>1100</code>会形成<code>010111_1100</code>，构成<code>RL=5</code>，即连续<code>5</code>个<code>1</code></p>
</li>
<li>
<p>因此，按极性码的做法保持码流极性平衡，此时应翻转编码，<code>4B=4'b0011</code>，<code>disp=0</code>，这样<code>010111_0011</code>，就不会有<code>RL=5</code>出现了</p>
</li>
<li>
<p><code>RD=+1+0=+1</code></p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/eg2_bal_code.png" alt="eg2_bal_code.png" /></p>
<h4 id="font-color-b5d5ff-stylefont-weightbolddx7font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbolddx7font"></a> <font color= #b5d5ff style='font-weight:bold'>D.x.7</font></h4>
<p>由于<code>D.x.7</code>原始<code>4b</code>编码为<code>1110</code>，其极性为<code>+</code>，另一种码字为<code>0001</code>，其极性为<code>-</code>。</p>
<p>这种码字存在连续的<code>111</code>或者<code>000</code>，可能会与前一个<code>6B</code>的完美平衡码末尾的<code>11</code>或<code>00</code>构成<code>RL=5</code>，因此需要使用备用编码。</p>
<ul>
<li><code>D.x.P07</code>：原始<code>4b</code>编码为<code>1110</code>，其极性为<code>+</code>，另一种码字为<code>0001</code>，其极性为<code>-</code>（主要编码）</li>
<li><code>D.x.A07</code>：原始<code>4b</code>编码为<code>0111</code>，其极性为<code>+</code>，另一种码字为<code>1000</code>，其极性为<code>-</code>（备用编码）</li>
</ul>
<p>举例：</p>
<p>假设发送码流<code>8'h8F</code>，初始极性为<code>RD=-1</code>，编码极性简写为<code>disp</code>（<code>disparity</code>）</p>
<ol>
<li><code>8'h8F=8'b10001111</code>
<ul>
<li>
<p><code>5B=5'b10001=5'd17</code>，<code>3B=3'b111=3'd7</code>，<code>D.17.7</code></p>
</li>
<li>
<p><code>5B</code>编码：<code>6B=6'b100011</code>，<code>disp=0</code>，继承码流极性，<code>RD=-1+0=-1</code></p>
</li>
<li>
<p><code>3B</code>编码：<code>4B=4'b1110</code>，<code>disp=+2</code></p>
<ul>
<li>
<p>此时，如果按照<code>disp=+2</code>，保持极性（当前码流<code>RD=-1</code>）的话，则前面<code>6B</code>的<code>100011</code>和<code>4B</code>的<code>1110</code>会形成<code>100011_1110</code>，构成<code>RL=5</code>，即连续<code>5</code>个<code>1</code></p>
</li>
<li>
<p>但此时不能翻转编码，因为需要保持<code>RD</code>平衡</p>
</li>
<li>
<p>因此需要<code>disp=+2</code>但没有连续<code>111</code>的码字，即<code>4B=4'b0111</code>，这样<code>100011_0111</code>，就不会有<code>RL=5</code>出现了</p>
</li>
<li>
<p><code>RD=-1+2=+1</code></p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/eg_d.x.7.png" alt="eg_d.x.7.png" /></p>
<p>举例：</p>
<p>假设发送码流<code>8'A8,8'5F</code>，初始极性为<code>RD=-1</code>，编码极性简写为<code>disp</code>（<code>disparity</code>）</p>
<ol>
<li>
<p><code>8'hA8=8'b10101000</code></p>
<ul>
<li><code>5B=5'b10101=5'd21</code>，<code>3B=3'b000=3'd0</code>，<code>D.21.0</code></li>
<li><code>5B</code>编码：<code>6B=6'b101010</code>，<code>disp=0</code>，继承码流极性，<code>RD=-1+0=-1</code></li>
<li><code>3B</code>编码：<code>4B=4'b1011</code>，<code>disp=+2</code>，保持极性（当前码流<code>RD=-1</code>），<code>RD=-1+2=+1</code></li>
</ul>
</li>
<li>
<p><code>8'h5F=8'b01011111</code></p>
<ul>
<li>
<p><code>5B=5'b01011=5'd11</code>，<code>3B=3'b111=3'd7</code>，<code>D.11.7</code></p>
</li>
<li>
<p><code>5B</code>编码：<code>6B=6'b110100</code>，<code>disp=0</code>，继承码流极性，<code>RD=+1+0=+1</code></p>
</li>
<li>
<p><code>3B</code>编码：<code>4B=4'b1110</code>，<code>disp=+2</code></p>
<ul>
<li>
<p>此时，如果按照<code>disp=+2</code>，翻转极性（当前码流<code>RD=+1</code>）的话，则前面<code>6B</code>的<code>110100</code>和<code>4B</code>的<code>0001</code>会形成<code>110100_0001</code>，构成<code>RL=5</code>，即连续<code>5</code>个<code>0</code></p>
</li>
<li>
<p>但此时不能翻转编码，因为需要保持<code>RD</code>平衡</p>
</li>
<li>
<p>因此需要<code>disp=-2</code>但没有连续<code>000</code>的码字，即<code>4B=4'b1000</code>，这样<code>100011_1000</code>，就不会有<code>RL=5</code>出现了</p>
</li>
<li>
<p><code>RD=+1-2=-1</code></p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/eg2_d.x.7.png" alt="eg2_d.x.7.png" /></p>
<p>以上所有的控制原则可以保证<code>RL&lt;5</code>，完整的证明<code>8b10b</code>编码<code>RL&lt;5</code>可以参考<a href="#%E7%9B%B4%E6%B5%81%E5%B9%B3%E8%A1%A1">直流平衡</a>。</p>
<h3 id="font-color-b5d5ff-stylefont-weightbold示例2font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold示例2font"></a> <font color= #b5d5ff style='font-weight:bold'>示例2</font></h3>
<p>在<a href="#%E7%A4%BA%E4%BE%8B1">示例1</a>的基础上，添加<code>8'h3B,8'6F</code>，即发送码流<code>8'h55,8'hC0,8'hF2,8'hF4,8'h3B,8'h6F</code>。</p>
<ol>
<li><code>8'h3B=8'b00111011</code>
<ul>
<li><code>5B=5'b00111=5'd7</code>，<code>3B=3'b011=3'd3</code>，<code>D.7.3</code></li>
<li><code>5B</code>编码：<code>6B=6'b111000</code>，<code>disp=0</code>，翻转极性（当前码流<code>RD=+1</code>），<code>6B=6'b000111</code>，<code>disp=0</code>，<code>RD=+1+0=+1</code>（不完美平衡码）</li>
<li><code>3B</code>编码：<code>4B=4'b0011</code>，<code>disp=0</code>，继承码流极性，<code>RD=+1+0=+1</code></li>
</ul>
</li>
<li><code>8'h6F=8'b01101111</code>
<ul>
<li><code>5B=5'b01101=5'd13</code>，<code>3B=3'b111=3'd7</code>，<code>D.13.7</code></li>
<li><code>5B</code>编码：<code>6B=6'b101100</code>，<code>disp=0</code>，继承码流极性，<code>RD=+1+0=+1</code></li>
<li><code>3B</code>编码：<code>4B=4'b1110</code>，<code>disp=+2</code>，翻转极性（当前码流<code>RD=+1</code>），即<code>4B=4'b0001</code>，但前一个<code>6B</code>存在连续两个<code>0</code>，因此采用备用编码，<code>4B=4'b1000</code>，<code>disp=-2</code>，<code>RD=+1-2=-1</code></li>
</ul>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/eg2.png" alt="eg2" /></p>
<h2 id="font-color-b5d5ff-stylefont-weightbold控制码font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold控制码font"></a> <font color= #b5d5ff style='font-weight:bold'>控制码</font></h2>
<p>控制码（控制字）是用于码流控制的码字，可以作为起始、结尾、分隔，部分码字还可以用于链路同步。</p>
<p>控制码采用与数据码不同的编码方式实现。</p>
<p><code>5b6b</code>编码表：</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/5b6b_k.png" alt="5b6b_k" /></p>
<p><code>3b4b</code>编码表：</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/3b4b_k.png" alt="3b4b_k" /></p>
<p>控制码主要分为两种，下面分别讨论。</p>
<h3 id="font-color-b5d5ff-stylefont-weightboldk28yfont"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldk28yfont"></a> <font color= #b5d5ff style='font-weight:bold'>K.28.y</font></h3>
<p><code>K.28.y</code>是指输入数据<code>5B</code>部分为<code>5b'11100=5'd28</code>类型的控制码。</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/k.28.y.png" alt="k28" /></p>
<p><code>K.28.y</code>的构造逻辑是<code>5b6b</code>编码表中制造与数据不同的编码方式（数据码中不会出现<code>cdei=1111/0000</code>）。</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/k.28+d.28.png" alt="k.28+d.28" /></p>
<h4 id="font-color-b5d5ff-stylefont-weightbold单一性font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold单一性font"></a> <font color= #b5d5ff style='font-weight:bold'>单一性</font></h4>
<p>注意，与数据不同的编码方式仅代表<code>5b6b</code>数据码中不会出现<code>1111/0000</code>，码间仍然可能组合出<code>1111/0000</code>，因此，这种码字在解码端可能会出现混淆。</p>
<p>举例：</p>
<p>假设发送码流<code>8'h1F,8'h88</code>，初始极性为<code>RD=-1</code></p>
<ul>
<li><code>D.3.7+D.17.0</code></li>
<li><code>6B=6'b110001</code>+<code>4B=4'b1110</code>+<code>6B=6'b100011</code>+<code>4B=4'b0100</code>，码流为<code>...1100011110100010100...</code></li>
<li>可能误识别码流为<code>001111_0100</code>，即<code>K28.0</code></li>
</ul>
<p>编码图：</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/sigularity_enc.png" alt="sigularity_enc" /></p>
<p>码流图：</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/sigularity_flow.png" alt="sigularity_flow" /></p>
<p>可以避免混淆的码字具备<font color= red style='font-weight:bold'>单一性</font>（<code>singularity</code>）。</p>
<ul>
<li>
<p><code>K28.1</code>，<code>K28.5</code>以及<code>K28.7</code>具有特殊的标志位（<code>RL2+RL5</code>，即<code>...0011111...</code>或<code>...1100000...</code>），这在其他码字以及码间都不可能出现</p>
</li>
<li>
<p>因此，<code>K28.1</code>，<code>K28.5</code>以及<code>K28.7</code>具备单一性（<code>singularity</code>）</p>
</li>
<li>
<p><code>K28.1</code>，<code>K28.5</code>以及<code>K28.7</code>也被称为<font color= red style='font-weight:bold'>逗号码</font>（<code>comma</code>），只有逗号码可以用于链路同步，因为其他码不具备单一性（<code>singularity</code>）</p>
</li>
</ul>
<h4 id="font-color-b5d5ff-stylefont-weightboldk28y-极性font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldk28y-极性font"></a> <font color= #b5d5ff style='font-weight:bold'>K.28.y 极性</font></h4>
<p>如果连续发送<code>K.28.y</code>，有两种情况：</p>
<ul>
<li>
<p><code>0</code>极性，单码保持，<code>±</code>码字选择根据上一次<code>rd</code>决定，类似<a href="#%E4%B8%8D%E5%AE%8C%E7%BE%8E%E5%B9%B3%E8%A1%A1%E7%A0%81">不完美平衡码</a></p>
</li>
<li>
<p><code>±</code>极性，双码翻转</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/k.28.y_disp.png" alt="k.28.y_disp" /></p>
<p>同时，<code>K28.7</code>不能连续发送，会造成连续<code>RL5</code>，即<code>...11111000001111100000...</code>，一般实际使用<code>K28.1</code>，<code>K28.5</code>作为逗号码。</p>
<h3 id="font-color-b5d5ff-stylefont-weightboldkx7font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldkx7font"></a> <font color= #b5d5ff style='font-weight:bold'>K.x.7</font></h3>
<p><code>K.x.A07</code>是指输入数据<code>3B</code>部分为<code>3b'111=3'd111</code>类型的控制码。</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/k.x.7.png" alt="k.x.7" /></p>
<p><code>K.x.A07</code>的构造逻辑是<code>3b4b</code>编码表中制造与数据不同的编码方式（数据码中不会出现<code>eifghj=01_0111/10_1000</code>）。</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/k.x.7+d.x.7.png" alt="k.x.7+d.x.7" /></p>
<h4 id="font-color-b5d5ff-stylefont-weightbold单一性font-2"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold单一性font-2"></a> <font color= #b5d5ff style='font-weight:bold'>单一性</font></h4>
<p>同样的，这种码字也不具备单一性（<code>singularity</code>）。这里就不举例了，可以参考<a href="#K.28.y">K.28.y</a>的例子。</p>
<h4 id="font-color-b5d5ff-stylefont-weightboldkx7-极性font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldkx7-极性font"></a> <font color= #b5d5ff style='font-weight:bold'>K.x.7  极性</font></h4>
<p>如果连续发送<code>K.x.7</code>，只有单码保持的平衡情况，<code>±</code>码字选择根据上一次<code>rd</code>决定，类似<a href="#%E4%B8%8D%E5%AE%8C%E7%BE%8E%E5%B9%B3%E8%A1%A1%E7%A0%81">不完美平衡码</a></p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/k.x.7_disp.png" alt="k.x.7_disp.png" /></p>
<h3 id="font-color-b5d5ff-stylefont-weightbold示例3font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold示例3font"></a> <font color= #b5d5ff style='font-weight:bold'>示例3</font></h3>
<p>假设发送码流<code>8'hC0,8'hE5,8'hE5(K),8'hE5(K),8'hBF,8'hBF(K),8'hBF(K)</code>，初始极性为<code>RD=-1</code>，编码极性简写为<code>disp</code>（<code>disparity</code>）</p>
<ol>
<li>
<p><code>8'hC0=8'b11000000</code></p>
<ul>
<li><code>5B=5'b11000=5'd24</code>，<code>3B=3'b000=3'd0</code>，<code>D.24.0</code></li>
<li><code>5B</code>编码：<code>6B=6'b110011</code>，<code>disp=+2</code>，保持极性（当前码流<code>RD=-1</code>），<code>RD=-1+2=+1</code></li>
<li><code>3B</code>编码：<code>4B=4'b0100</code>，<code>disp=-2</code>，保持极性（当前码流<code>RD=+1</code>），<code>RD=+1-2=-1</code></li>
</ul>
</li>
<li>
<p><code>8'hE5=8'b11100101</code></p>
<ul>
<li><code>5B=5'b11100=5'd28</code>，<code>3B=3'b101=3'd5</code>，<code>D.28.5</code></li>
<li><code>5B</code>编码：<code>6B=6'b001110</code>，<code>disp=0</code>，继承码流极性，<code>RD=-1+0=-1</code></li>
<li><code>3B</code>编码：<code>4B=4'b1010</code>，<code>disp=0</code>，继承码流极性，<code>RD=-1+0=-1</code></li>
</ul>
</li>
<li>
<p><code>8'hE5=8'b11100101，K</code></p>
<ul>
<li>
<p><code>5B=5'b11100=5'd28</code>，<code>3B=3'b101=3'd5</code>，<code>K.28.5</code></p>
</li>
<li>
<p><code>5B</code>编码：<code>6B=6'b001111</code>，<code>disp=+2</code>，保持极性（当前码流<code>RD=-1</code>），<code>RD=-1+2=+1</code></p>
</li>
<li>
<p><code>3B</code>编码：<code>4B=4'b1010</code>，<code>disp=0</code>，继承码流极性，<code>RD=+1+0=+1</code></p>
</li>
<li>
<p>这种码字可以叫做<code>K.28.5+</code></p>
</li>
</ul>
</li>
<li>
<p><code>8'hE5=8'b11100101，K</code></p>
<ul>
<li>
<p><code>5B=5'b11100=5'd28</code>，<code>3B=3'b101=3'd5</code>，<code>K.28.5</code></p>
</li>
<li>
<p><code>5B</code>编码：<code>6B=6'b001111</code>，<code>disp=+2</code>，翻转极性（当前码流<code>RD=+1</code>），<code>6B=6'b110000</code>，<code>disp=-2</code>，<code>RD=+1-2=-1</code></p>
</li>
<li>
<p><code>3B</code>编码：<code>4B=4'b1010</code>，<code>disp=0</code>，继承码流极性，<code>RD=-1+0=-1</code></p>
</li>
<li>
<p>这种码字可以叫做<code>K.28.5-</code></p>
</li>
</ul>
</li>
<li>
<p><code>8'hBF=8'b10111111</code></p>
<ul>
<li>
<p><code>5B=5'b10111=5'd23</code>，<code>3B=3'b111=3'd7</code>，<code>D.23.7</code></p>
</li>
<li>
<p><code>5B</code>编码：<code>6B=6'b111010</code>，<code>disp=+2</code>，保持极性（当前码流<code>RD=-1</code>），<code>RD=-1+2=+1</code></p>
</li>
<li>
<p><code>3B</code>编码：<code>4B=4'b1110</code>，<code>disp=+2</code>，翻转极性（当前码流<code>RD=+1</code>），<code>4B=4'b0001</code>，<code>disp=-2</code>，<code>RD=+1-2=-1</code></p>
</li>
</ul>
</li>
<li>
<p><code>8'hBF=8'b10111111，K</code></p>
<ul>
<li>
<p><code>5B=5'b10111=5'd23</code>，<code>3B=3'b111=3'd7</code>，<code>K.23.7</code></p>
</li>
<li>
<p><code>5B</code>编码：<code>6B=6'b111010</code>，<code>disp=+2</code>，保持极性（当前码流<code>RD=-1</code>），<code>RD=-1+2=+1</code></p>
</li>
<li>
<p><code>3B</code>编码：<code>4B=4'b0111</code>，<code>disp=+2</code>，翻转极性（当前码流<code>RD=+1</code>），<code>4B=4'b1000</code>，<code>disp=-2</code>，<code>RD=+1-2=-1</code></p>
</li>
</ul>
</li>
<li>
<p><code>8'hBF=8'b10111111，K</code></p>
<ul>
<li>
<p><code>5B=5'b10111=5'd23</code>，<code>3B=3'b111=3'd7</code>，<code>K.23.7</code></p>
</li>
<li>
<p><code>5B</code>编码：<code>6B=6'b111010</code>，<code>disp=+2</code>，保持极性（当前码流<code>RD=-1</code>），<code>RD=-1+2=+1</code></p>
</li>
<li>
<p><code>3B</code>编码：<code>4B=4'b0111</code>，<code>disp=+2</code>，翻转极性（当前码流<code>RD=+1</code>），<code>4B=4'b1000</code>，<code>disp=-2</code>，<code>RD=+1-2=-1</code></p>
</li>
</ul>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/eg3.png" alt="eg3" /></p>
<h2 id="font-color-b5d5ff-stylefont-weightbold直流平衡font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold直流平衡font"></a> <font color= #b5d5ff style='font-weight:bold'>直流平衡</font></h2>
<p>下面完整讨论<code>8b10b</code>如何实现直流平衡（<code>dc balance</code>）。首先，在<a href="#%E6%8E%A7%E5%88%B6%E5%8E%9F%E5%88%991">控制原则1</a>中，已经提到了两个方面的考虑：</p>
<ul>
<li><code>-2&lt;RD&lt;2</code>，运行极性不超过<code>±2</code>，即总体码流的<code>0</code>,<code>1</code>数量相同</li>
<li><code>RL&lt;5</code>，运行长度不超过<code>5</code>，即总体码流连续<code>0</code>,<code>1</code>数量不超过<code>5</code></li>
</ul>
<p>通过<a href="#%E6%8E%A7%E5%88%B6%E5%8E%9F%E5%88%991">控制原则1</a>已经可以实现<code>-2&lt;RD&lt;2</code>的目标，具体可以参考<a href="#%E7%A4%BA%E4%BE%8B1">示例1</a>，<a href="#%E7%A4%BA%E4%BE%8B2">示例2</a>和<a href="#%E7%A4%BA%E4%BE%8B3">示例3</a>。</p>
<p>因此接下来讨论如何保证<code>RL&lt;5</code>。</p>
<h3 id="font-color-b5d5ff-stylefont-weightboldrl分析font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldrl分析font"></a> <font color= #b5d5ff style='font-weight:bold'>RL分析</font></h3>
<ol>
<li>
<p>码内<code>RL</code></p>
<ul>
<li>观察<code>5b6b</code>编码表，<code>6b</code>编码内部<code>RL&lt;=3</code>;</li>
<li>观察<code>3b4b</code>编码表，<code>4b</code>编码内部<code>RL&lt;=3</code>;</li>
</ul>
<p>因此码内<code>RL&lt;5</code>。</p>
</li>
<li>
<p>码间<code>RL</code></p>
<ul>
<li>
<p><code>6b</code>+<code>4b</code></p>
<ul>
<li>
<p>极性码 + 极性码</p>
<p><code>6b</code>极性码码间<code>RL&lt;=3</code>，根据<a href="#%E6%8E%A7%E5%88%B6%E5%8E%9F%E5%88%991">控制原则1</a>，<code>4b</code>极性码与<code>6b</code>极性必然相反，因此<code>RL&lt;=3</code>。（<code>e.g. 011000_1110</code>）</p>
</li>
<li>
<p>极性码 + 平衡码</p>
<p><code>6b</code>极性码码间<code>RL&lt;=3</code>。</p>
<ul>
<li><code>4b</code>如果是完美平衡码，则码间<code>RL&lt;=1</code>，因此总体<code>RL&lt;=4</code>（<code>e.g. 010111_1001</code>）</li>
<li><code>4b</code>如果是非完美平衡码，根据<a href="#%E6%8E%A7%E5%88%B6%E5%8E%9F%E5%88%992">控制原则2</a>，<code>4b</code>平衡码与<code>6b</code>极性必然相反，因此总体<code>RL&lt;=3</code>（<code>e.g. 010111_0011</code>）</li>
</ul>
</li>
<li>
<p>平衡码 + 平衡码</p>
<p><code>6b</code>平衡码码间<code>RL&lt;=3</code>。</p>
<ul>
<li><code>4b</code>如果是完美平衡码，则码间<code>RL&lt;=1</code>，因此总体<code>RL&lt;=4</code>（<code>e.g. 000111_1001</code>）</li>
<li><code>4b</code>如果是非完美平衡码，根据<a href="#%E6%8E%A7%E5%88%B6%E5%8E%9F%E5%88%992">控制原则2</a>，<code>4b</code>平衡码与<code>6b</code>极性必然相反，因此总体<code>RL&lt;=3</code>（<code>e.g. 111000_1100</code>）</li>
</ul>
</li>
<li>
<p>平衡码 + 极性码</p>
<ul>
<li><code>6b</code>如果是完美平衡码，则码间<code>RL&lt;=2</code>。<code>4b</code>极性码码间<code>RL&lt;=3</code>。
<ul>
<li>根据<a href="#%E6%8E%A7%E5%88%B6%E5%8E%9F%E5%88%992">控制原则2</a>，当<code>4b</code>极性码码间<code>RL=3</code>时，<code>4b</code>极性码采用备用编码，因此<code>RL&lt;=2</code>（<code>e.g. 100011_0111</code>）</li>
<li>当<code>4b</code>极性码码间<code>RL&lt;=2</code>时，总体<code>RL&lt;=4</code>（<code>e.g. 100011_1011</code>）</li>
</ul>
</li>
<li><code>6b</code>如果是非完美平衡码，则码间<code>RL&lt;=3</code>。根据<a href="#%E6%8E%A7%E5%88%B6%E5%8E%9F%E5%88%991">控制原则1</a>，<code>4b</code>极性码与<code>6b</code>极性必然相反，因此<code>RL&lt;=3</code>（<code>e.g. 111000_1110</code>）</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>4b</code>+<code>6b</code></p>
<ul>
<li>
<p>极性码 + 极性码</p>
<p><code>4b</code>极性码码间<code>RL&lt;=3</code>，根据<a href="#%E6%8E%A7%E5%88%B6%E5%8E%9F%E5%88%991">控制原则1</a>，<code>6b</code>极性码与<code>4b</code>极性必然相反，因此<code>RL&lt;=3</code>。（<code>e.g. 0111_011000</code>）</p>
</li>
<li>
<p>极性码 + 平衡码</p>
<p><code>4b</code>极性码码间<code>RL&lt;=3</code>。</p>
<ul>
<li><code>6b</code>如果是完美平衡码，则码间<code>RL&lt;=2</code>，因此总体<font color= red style='font-weight:bold'>可能出现</font><code>RL=5</code>（<code>e.g. 0111_110100</code>）</li>
<li><code>6b</code>如果是非完美平衡码，根据<a href="#%E6%8E%A7%E5%88%B6%E5%8E%9F%E5%88%992">控制原则2</a>，<code>6b</code>平衡码与<code>4b</code>极性必然相反，因此总体<code>RL&lt;=3</code>（<code>e.g. 0111_000111</code>）</li>
</ul>
</li>
<li>
<p>平衡码 + 平衡码</p>
<p><code>4b</code>平衡码码间<code>RL&lt;=2</code>。</p>
<ul>
<li><code>6b</code>如果是完美平衡码，则码间<code>RL&lt;=2</code>，因此总体<code>RL&lt;=4</code>（<code>e.g. 0011_110100</code>）</li>
<li><code>6b</code>如果是非完美平衡码，根据<a href="#%E6%8E%A7%E5%88%B6%E5%8E%9F%E5%88%992">控制原则2</a>，<code>6b</code>平衡码与<code>4b</code>极性必然相反，因此总体<code>RL&lt;=2</code>（<code>e.g. 1100_111000</code>）</li>
</ul>
</li>
<li>
<p>平衡码 + 极性码</p>
<p><code>4b</code>平衡码码间<code>RL&lt;=2</code>。</p>
<ul>
<li><code>4b</code>如果是完美平衡码，则码间<code>RL&lt;=1</code>。<code>6b</code>极性码码间<code>RL&lt;=3</code>。因此<code>RL&lt;=4</code>（<code>e.g. 1010_000110</code>）</li>
<li><code>4b</code>如果是非完美平衡码，则码间<code>RL&lt;=2</code>。根据<a href="#%E6%8E%A7%E5%88%B6%E5%8E%9F%E5%88%991">控制原则1</a>，<code>6b</code>极性码与<code>4b</code>极性必然相反，因此<code>RL&lt;=2</code>（<code>e.g. 1100_100111</code>）</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="font-color-b5d5ff-stylefont-weightboldrl5font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldrl5font"></a> <font color= #b5d5ff style='font-weight:bold'>RL=5</font></h3>
<p>根据上一章的分析，连续出现以下情况会存在<code>RL=5</code>：</p>
<ol>
<li>
<p>完美平衡码，末尾<code>RL=2</code>（<code>e.g. 100011</code>）</p>
</li>
<li>
<p><code>D.x.A7</code> （<code>e.g. 100011_0111</code>）</p>
</li>
<li>
<p>完美平衡码，首部<code>RL=2</code>。（<code>e.g. 100011_0111_110100</code>）</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/rl=5.png" alt="rl=5" /></p>
<p>此情况为最极端的情况：</p>
<ul>
<li>码流前后必为反极性的码字，码流不会出现异常</li>
<li>不会出现连续两次<code>RL=5</code>的情况</li>
<li>不会出现与<code>K</code>码混淆（<code>K.28.y</code>采用的是<code>RL2+RL5</code>，此情况只会出现<code>RL1+RL5</code>）</li>
</ul>
<p>总体看来，<code>8b10b</code>编码，是直流平衡（<code>dc balance</code>）的，其绝大部分码流<code>RL&lt;=4</code>，最极端情况下<code>RL=5</code>。</p>
<h1 id="font-color-b5d5ff-stylefont-weightbold电路设计font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold电路设计font"></a> <font color= #b5d5ff style='font-weight:bold'>电路设计</font></h1>
<h2 id="font-color-b5d5ff-stylefont-weightbold编码器font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold编码器font"></a> <font color= #b5d5ff style='font-weight:bold'>编码器</font></h2>
<h3 id="font-color-b5d5ff-stylefont-weightbold5b6b编码font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold5b6b编码font"></a> <font color= #b5d5ff style='font-weight:bold'>5b6b编码</font></h3>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/5b6b_d.png" alt="5b6b_d" /></p>
<h4 id="font-color-b5d5ff-stylefont-weightboldl-函数font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldl-函数font"></a> <font color= #b5d5ff style='font-weight:bold'>L 函数</font></h4>
<p><code>L</code>函数（<code>L function</code>），主要用于化简编码逻辑。观察表格中<code>Bit Encoding</code>列，里面就是<code>L</code>函数。其代表<code>ABCD</code>中的<code>0</code>和<code>1</code>的个数。</p>
<p>举例：</p>
<ul>
<li><code>L04</code>：<code>ABCD</code>包含<code>0</code>个<code>1</code>，<code>4</code>个<code>0</code>，即<code>ABCD=0000</code>，因此按布尔逻辑<code>L04=A'B'C'D'</code></li>
<li><code>L13</code>：<code>ABCD</code>包含<code>1</code>个<code>1</code>，<code>3</code>个<code>0</code>，即<code>ABCD=1000/ABCD=0100/ABCD=0010/ABCD=0001</code>，因此按布尔逻辑<code>L13=AB'C'D'+A'BC'D'+A'B'CD'+A'B'C'D = (A^B)C'D'+A'B'(C^D)</code></li>
<li><code>L22</code>：<code>ABCD</code>包含<code>2</code>个<code>1</code>，<code>2</code>个<code>0</code>，即<code>ABCD=1100/ABCD=1010/ABCD=1001/ABCD=0110/ABCD=0101/ABCD=0011</code>，因此按布尔逻辑<code>L22=ABC'D'+AB'CD'+AB'C'D+A'BCD'+A'BC'D+A'B'CD = ABC'D'+A'B'CD+(A^B)(C^D)</code></li>
</ul>
<p>电路图（其中<code>A</code>代表与门，<code>OR</code>代表或门）：</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/l-function.png" alt="l-function" /></p>
<h4 id="font-color-b5d5ff-stylefont-weightbold编码逻辑font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold编码逻辑font"></a> <font color= #b5d5ff style='font-weight:bold'>编码逻辑</font></h4>
<ul>
<li><code>EDCBA</code>倒为<code>ABCDE</code>，不需要编码</li>
<li>最后一位<code>I</code>统一补<code>0</code>，形成<code>ABCDEI</code>，不需要编码</li>
<li>根据码表标<font color= red style='font-weight:bold'>红</font>比特位编码<code>abcdei</code>（按<code>Bit Encoding</code>）
<ul>
<li>如果从<code>0</code>翻<code>1</code>(强制置<code>1</code>)，则取或</li>
<li>如果从<code>1</code>翻<code>0</code>(强制置<code>0</code>)，则取与</li>
</ul>
</li>
</ul>
<p>举例：</p>
<ul>
<li><code>a</code>：观察<code>输出码值</code>列的<code>a</code>，没有标红位置，因此<code>a = A</code></li>
<li><code>b</code>：观察<code>输出码值</code>列的<code>b</code>，<code>D.00(L04)，D.15(L40)，D.16(L04)，D.31(L40)</code>有标红位置，根据<code>Bit Encoding</code>列，<code>b = B'L04+BL40' = L04 + BL40'</code></li>
<li><code>e</code>：观察<code>输出码值</code>列的<code>e</code>，<code>D.01(L13E')，D.02(L13E')，D.04(L13E')，D.08(L13E')，D.08(L13E')，D.24(L13DE)</code>有标红位置，根据<code>Bit Encoding</code>列，<code>e = E'L13+E(L13DE)'</code></li>
<li><code>i</code>：观察<code>输出码值</code>列的<code>i</code>，<code>D.03(L22E')，D.05(L22E')，D.06(L22E')，D.09(L22E')，D.10(L22E')，D.12(L22E')，D.16(L04E)，D.17(L13D'E)，D.18(L22E')，D.20(L22E')，D.31(L40E)</code>有标红位置，根据<code>Bit Encoding</code>列，<code>i = I'(L22E'+L04E+L13D'E+L40E)</code></li>
</ul>
<p>电路图（其中<code>A</code>代表与门，<code>OR</code>代表或门）：</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/abcdei.png" alt="abcdei" /></p>
<h3 id="font-color-b5d5ff-stylefont-weightbold3b4b编码font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold3b4b编码font"></a> <font color= #b5d5ff style='font-weight:bold'>3b4b编码</font></h3>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/3b4b_d.png" alt="3b4b_d" /></p>
<p><code>3b4b</code>编码相对简单，不需要使用<code>L</code>函数（<code>L function</code>）简化逻辑，其编码逻辑与<code>5b6b</code>类似。</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/fgh-function.png" alt="fgh-function" /></p>
<p>另外，由于存在<code>D.x.A07</code>（<code>Alternative</code>，备用码），因此需要编码时加入特殊编码标志（<code>S</code>，<code>Special</code>）。</p>
<p>举例：</p>
<ul>
<li><code>f</code>：观察<code>输出码值</code>列的<code>f</code>，<code>D.x.A07(FGHS)</code>有标红位置，因此<code>f = F(FGHS)'</code></li>
<li><code>g</code>：观察<code>输出码值</code>列的<code>g</code>，<code>D.x.00(F'G'H')</code>有标红位置，根据<code>Bit Encoding</code>列，<code>g = G+G'F'G'H' = G + F'G'H'</code></li>
<li><code>j</code>：观察<code>输出码值</code>列的<code>j</code>，<code>D.x.01((F^G)H')，D.x.02((F^G)H')，D.x.A07(FGHS)</code>有标红位置，根据<code>Bit Encoding</code>列，<code>j = E'(F^G)H'+FGHS)+E = (F^G)H' + FGHS + E</code></li>
</ul>
<p>电路图（其中<code>A</code>代表与门，<code>OR</code>代表或门）：</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/fghj.png" alt="fghj" /></p>
<h3 id="font-color-b5d5ff-stylefont-weightboldk编码font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldk编码font"></a> <font color= #b5d5ff style='font-weight:bold'>K编码</font></h3>
<h4 id="font-color-b5d5ff-stylefont-weightboldk28yfont-2"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldk28yfont-2"></a> <font color= #b5d5ff style='font-weight:bold'>K.28.y</font></h4>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/5b6b_k.png" alt="5b6b_k" /></p>
<p>同理，根据<code>Bit Encoding</code>列，<code>K.28.y</code>中，<code>i = L22K</code>。电路图参考之前的图。</p>
<h4 id="font-color-b5d5ff-stylefont-weightboldkx7font-2"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightboldkx7font-2"></a> <font color= #b5d5ff style='font-weight:bold'>K.x.7</font></h4>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/3b4b_k.png" alt="3b4b_k" /></p>
<p>同理，根据<code>Bit Encoding</code>列，<code>K.x.7</code>中</p>
<ul>
<li><code>f = F(FGHK)'</code></li>
<li><code>j = FGHK</code></li>
</ul>
<p>电路图参考之前的图。</p>
<h3 id="font-color-b5d5ff-stylefont-weightbolds编码font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbolds编码font"></a> <font color= #b5d5ff style='font-weight:bold'>S编码</font></h3>
<p>特殊的<code>D.x.A07</code>需要单独通过电路实现查找。主要是查找末尾带<code>11/00</code>的完美平衡码<code>e.g. 100011</code>。</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/special.png" alt="special" /></p>
<h3 id="font-color-b5d5ff-stylefont-weightbold极性编码font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold极性编码font"></a> <font color= #b5d5ff style='font-weight:bold'>极性编码</font></h3>
<p>注意到极性码以及不完美平衡码是需要翻转极性的，因此需要额外的电路进行实现。</p>
<h4 id="font-color-b5d5ff-stylefont-weightbold极性计算font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold极性计算font"></a> <font color= #b5d5ff style='font-weight:bold'>极性计算</font></h4>
<p>实际根据<code>Disparity（D-1）</code>列以及<code>encoded disparity</code>列进行实现。</p>
<p><code>5b6b</code>极性计算：</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/6bdisp.png" alt="6bdisp" /></p>
<p>根据<code>Disparity</code>列以及<code>encoded disparity</code>列，</p>
<ul>
<li><code>ND-1S6</code>代表下一编码需要<code>-</code>极性(<code>Negative Disparity</code>)</li>
<li><code>PD-1S6</code>代表下一编码需要<code>+</code>极性(<code>Positive Disparity</code>)</li>
<li>以上两种都不是，则下一编码需要<code>0</code>极性</li>
</ul>
<p>另外，</p>
<ul>
<li><code>ND0S6</code>代表当前编码为<code>-</code>极性（与<code>PD-1S6</code>相同）</li>
<li><code>PD0S6</code>代表当前编码为<code>+</code>极性（与<code>ND-1S6</code>不同仅在于不完美平衡码）</li>
<li>以上两种都不是，则当前编码是<code>0</code>极性</li>
</ul>
<p><code>3b4b</code>极性计算：</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/4bdisp.png" alt="4bdisp" /></p>
<p>根据<code>Disparity（D-1）</code>列以及<code>encoded disparity</code>列，</p>
<ul>
<li><code>ND-1S4</code>代表下一编码需要<code>-</code>极性(<code>Negative Disparity</code>)</li>
<li><code>PD-1S4</code>代表下一编码需要<code>+</code>极性(<code>Positive Disparity</code>)</li>
<li>以上两种都不是，则下一编码需要<code>0</code>极性</li>
</ul>
<p>另外，</p>
<ul>
<li><code>ND0S4</code>代表当前编码为<code>-</code>极性（与<code>PD-1S4</code>不同仅在于<code>K</code>码）</li>
<li><code>PD0S4</code>代表当前编码为<code>+</code>极性（与<code>ND-1S4</code>不同仅在于不完美平衡码）</li>
<li>以上两种都不是，则当前编码是<code>0</code>极性</li>
</ul>
<h4 id="font-color-b5d5ff-stylefont-weightbold极性翻转font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold极性翻转font"></a> <font color= #b5d5ff style='font-weight:bold'>极性翻转</font></h4>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/compls.png" alt="compls" /></p>
<p><code>Running Disparity</code>计算（以<code>6b</code>为例，<code>4b</code>同理）：</p>
<ul>
<li>当前极性为正<code>disp = +2</code>(<code>PD0S6</code>)，不翻转极性（<code>COMPLS6'</code>）,则<code>RD = +1</code></li>
<li>当前极性为负<code>disp = -2</code>(<code>ND0S6</code>)，翻转极性（<code>COMPLS6</code>）,则<code>RD = +1</code></li>
<li>当前极性为空<code>disp = 0</code>(<code>PD0S6'ND0S6'</code>)，极性继承，则<code>RD = rd(上个编码)</code></li>
</ul>
<p>极性翻转计算（以<code>4b</code>为例，<code>6b</code>同理）：</p>
<ul>
<li>运行极性为正<code>RD = +1</code>，需要极性为负（<code>ND-1S4</code>）,则翻转极性<code>COMPLS4 = +1</code></li>
<li>运行极性为负<code>RD = -1</code>，需要极性为正（<code>PD-1S4</code>）,则翻转极性<code>COMPLS4 = +1</code></li>
<li>运行极性为空<code>RD = 0</code>，极性继承，则不翻转极性</li>
</ul>
<h3 id="font-color-b5d5ff-stylefont-weightbold电路图font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold电路图font"></a> <font color= #b5d5ff style='font-weight:bold'>电路图</font></h3>
<p>总体电路图架构如下：</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/architecture.png" alt="architecture" /></p>
<p>结合上述所有电路，编码器总体电路图如下：</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/encoder.png" alt="encoder" /></p>
<h2 id="font-color-b5d5ff-stylefont-weightbold解码器font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold解码器font"></a> <font color= #b5d5ff style='font-weight:bold'>解码器</font></h2>
<h3 id="font-color-b5d5ff-stylefont-weightbold解码逻辑font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold解码逻辑font"></a> <font color= #b5d5ff style='font-weight:bold'>解码逻辑</font></h3>
<p>按照编码器的实现逻辑，可以按照解码器的码表进行电路搭建。</p>
<p>注意几点：</p>
<ol>
<li>解码器收到的码字可能有<code>+</code>或<code>-</code>两种</li>
<li>码表之外的码字代表异常</li>
<li>解码的<code>P</code>函数（<code>P function</code>）类似编码的<code>L</code>函数（<code>L function</code>）</li>
</ol>
<p><code>6b5b</code>：</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/5b6b_dec.png" alt="5b6b_dec" /></p>
<p><code>4b3b</code>：</p>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/3b4b_dec.png" alt="3b4b_dec" /></p>
<h3 id="font-color-b5d5ff-stylefont-weightbold故障检测font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold故障检测font"></a> <font color= #b5d5ff style='font-weight:bold'>故障检测</font></h3>
<p>原文给出了故障检测的几种检查方式：</p>
<ol>
<li>所有码字必须保持<code>+2</code>，<code>-2</code>或<code>0</code>极性</li>
<li>极性码必须调整运行极性</li>
<li>不完美平衡码（<code>D.7</code>以及<code>D.x.3</code>）必须调整运行极性</li>
<li>通信结构中收尾必须含有逗号码</li>
<li>编码异常的电路包含如下（作者总结出来的简化结果）：
<ul>
<li><code>a=b=c=d</code></li>
<li><code>P13e'i'</code></li>
<li><code>P31ei</code></li>
<li><code>f=g=h=j</code></li>
<li><code>e=i=f=g=h</code></li>
<li><code>i≠e=g=h=j</code></li>
<li><code>(e=i≠g=h=j)(c=d=e)'</code></li>
<li><code>P31'ei'g'h'j'</code></li>
<li><code>P13'e'ighj</code></li>
</ul>
</li>
</ol>
<h1 id="font-color-b5d5ff-stylefont-weightbold帧结构font"><a class="markdownIt-Anchor" href="#font-color-b5d5ff-stylefont-weightbold帧结构font"></a> <font color= #b5d5ff style='font-weight:bold'>帧结构</font></h1>
<p>原文中推荐的帧结构形式为：</p>
<ul>
<li>平时发空闲码（<code>D.21.5/D.10.2</code>）</li>
<li>起始和结尾发逗号码（<code>K.28.1/K.28.6/K28.7</code>）</li>
<li>帧间隔发其他控制码（<code>K.23.7/K.27.7/K29.7</code>）</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/packet.png" alt="packet" /></p>
<p><font color= greden style='font-weight:bold' font size= 8>完结撒花~2024/9/1</font></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined" rel="external nofollow noreferrer">HonkW</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://blog.honk.wang/posts/8b10b/">https://blog.honk.wang/posts/8b10b/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.honk.wang" target="_blank">HonkW</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/dc-balance/">dc balance</a><a class="post-meta__tags" href="/tags/8b10b/">8b10b</a><a class="post-meta__tags" href="/tags/5b6b/">5b6b</a><a class="post-meta__tags" href="/tags/3b4b/">3b4b</a></div><div class="post_share"><div class="social-share" data-image="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/cover/8b10b_cov.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/wechat.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><div id="wpac-rating"></div><script>wpac_init = window.wpac_init || [];
wpac_init.push({widget: 'Rating', id: 24934});
(function() {
  if ('WIDGETPACK_LOADED' in window) return;
  WIDGETPACK_LOADED = true;
  var mc = document.createElement('script');
  mc.type = 'text/javascript';
  mc.async = true;
  mc.src = '//embed.widgetpack.com/widget.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
})();</script><style>#wpac-rating {
  margin-top: 20px;
  text-align: center;
}</style><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/posts/vimscript-automatic/"><img class="next-cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/vimscript-automatic/cover/vimscript-automatic.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Vimscript-AutoMatic-Verilog</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Twikoo</span><span class="switch-btn"></span><span class="second-comment">Valine</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">HonkW</div><div class="author-info__description">言之命至，人随己愿<br>功不唐捐，自有因果</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">14</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="http://iccircle.com/"><i class="fas fa-microchip"></i><span>IC 技术圈</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/HonkW93" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:contact@honk.wang" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">喜欢可以留个言，不喜欢不可以<img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/background/announc-standbyme.gif"><br><a target="_blank" rel="noopener external nofollow noreferrer" href="/sponsor/">👉请作者喝可乐</a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E8%83%8C%E6%99%AFfont"><span class="toc-number">1.</span> <span class="toc-text"> 背景</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90font"><span class="toc-number">2.</span> <span class="toc-text"> 原理分析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E6%95%B0%E6%8D%AE%E7%A0%81font"><span class="toc-number">2.1.</span> <span class="toc-text"> 数据码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold5b6bfont"><span class="toc-number">2.1.1.</span> <span class="toc-text"> 5b6b</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold3b4bfont"><span class="toc-number">2.1.2.</span> <span class="toc-text"> 3b4b</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E6%95%B0%E6%8D%AE%E6%9E%81%E6%80%A7font"><span class="toc-number">2.1.3.</span> <span class="toc-text"> 数据极性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E6%9E%81%E6%80%A7%E7%A0%81font"><span class="toc-number">2.1.3.1.</span> <span class="toc-text"> 极性码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E5%B9%B3%E8%A1%A1%E7%A0%81font"><span class="toc-number">2.1.3.2.</span> <span class="toc-text"> 平衡码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E7%89%B9%E6%AE%8A%E6%9E%81%E6%80%A7%E7%A0%81font"><span class="toc-number">2.1.3.3.</span> <span class="toc-text"> 特殊极性码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E6%9E%81%E6%80%A7%E6%8E%A7%E5%88%B6font"><span class="toc-number">2.2.</span> <span class="toc-text"> 极性控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E8%BF%90%E8%A1%8C%E6%9E%81%E6%80%A7font"><span class="toc-number">2.2.1.</span> <span class="toc-text"> 运行极性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E8%BF%90%E8%A1%8C%E9%95%BF%E5%BA%A6font"><span class="toc-number">2.2.2.</span> <span class="toc-text"> 运行长度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E6%8E%A7%E5%88%B6%E5%8E%9F%E5%88%991font"><span class="toc-number">2.2.3.</span> <span class="toc-text"> 控制原则1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E7%A4%BA%E4%BE%8B1font"><span class="toc-number">2.2.4.</span> <span class="toc-text"> 示例1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E6%8E%A7%E5%88%B6%E5%8E%9F%E5%88%992font"><span class="toc-number">2.2.5.</span> <span class="toc-text"> 控制原则2</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E4%B8%8D%E5%AE%8C%E7%BE%8E%E5%B9%B3%E8%A1%A1%E7%A0%81font"><span class="toc-number">2.2.5.1.</span> <span class="toc-text"> 不完美平衡码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbolddx7font"><span class="toc-number">2.2.5.2.</span> <span class="toc-text"> D.x.7</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E7%A4%BA%E4%BE%8B2font"><span class="toc-number">2.2.6.</span> <span class="toc-text"> 示例2</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E6%8E%A7%E5%88%B6%E7%A0%81font"><span class="toc-number">2.3.</span> <span class="toc-text"> 控制码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightboldk28yfont"><span class="toc-number">2.3.1.</span> <span class="toc-text"> K.28.y</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E5%8D%95%E4%B8%80%E6%80%A7font"><span class="toc-number">2.3.1.1.</span> <span class="toc-text"> 单一性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightboldk28y-%E6%9E%81%E6%80%A7font"><span class="toc-number">2.3.1.2.</span> <span class="toc-text"> K.28.y 极性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightboldkx7font"><span class="toc-number">2.3.2.</span> <span class="toc-text"> K.x.7</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E5%8D%95%E4%B8%80%E6%80%A7font-2"><span class="toc-number">2.3.2.1.</span> <span class="toc-text"> 单一性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightboldkx7-%E6%9E%81%E6%80%A7font"><span class="toc-number">2.3.2.2.</span> <span class="toc-text"> K.x.7  极性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E7%A4%BA%E4%BE%8B3font"><span class="toc-number">2.3.3.</span> <span class="toc-text"> 示例3</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E7%9B%B4%E6%B5%81%E5%B9%B3%E8%A1%A1font"><span class="toc-number">2.4.</span> <span class="toc-text"> 直流平衡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightboldrl%E5%88%86%E6%9E%90font"><span class="toc-number">2.4.1.</span> <span class="toc-text"> RL分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightboldrl5font"><span class="toc-number">2.4.2.</span> <span class="toc-text"> RL&#x3D;5</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E7%94%B5%E8%B7%AF%E8%AE%BE%E8%AE%A1font"><span class="toc-number">3.</span> <span class="toc-text"> 电路设计</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E7%BC%96%E7%A0%81%E5%99%A8font"><span class="toc-number">3.1.</span> <span class="toc-text"> 编码器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold5b6b%E7%BC%96%E7%A0%81font"><span class="toc-number">3.1.1.</span> <span class="toc-text"> 5b6b编码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightboldl-%E5%87%BD%E6%95%B0font"><span class="toc-number">3.1.1.1.</span> <span class="toc-text"> L 函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E7%BC%96%E7%A0%81%E9%80%BB%E8%BE%91font"><span class="toc-number">3.1.1.2.</span> <span class="toc-text"> 编码逻辑</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold3b4b%E7%BC%96%E7%A0%81font"><span class="toc-number">3.1.2.</span> <span class="toc-text"> 3b4b编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightboldk%E7%BC%96%E7%A0%81font"><span class="toc-number">3.1.3.</span> <span class="toc-text"> K编码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightboldk28yfont-2"><span class="toc-number">3.1.3.1.</span> <span class="toc-text"> K.28.y</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightboldkx7font-2"><span class="toc-number">3.1.3.2.</span> <span class="toc-text"> K.x.7</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbolds%E7%BC%96%E7%A0%81font"><span class="toc-number">3.1.4.</span> <span class="toc-text"> S编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E6%9E%81%E6%80%A7%E7%BC%96%E7%A0%81font"><span class="toc-number">3.1.5.</span> <span class="toc-text"> 极性编码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E6%9E%81%E6%80%A7%E8%AE%A1%E7%AE%97font"><span class="toc-number">3.1.5.1.</span> <span class="toc-text"> 极性计算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E6%9E%81%E6%80%A7%E7%BF%BB%E8%BD%ACfont"><span class="toc-number">3.1.5.2.</span> <span class="toc-text"> 极性翻转</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E7%94%B5%E8%B7%AF%E5%9B%BEfont"><span class="toc-number">3.1.6.</span> <span class="toc-text"> 电路图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E8%A7%A3%E7%A0%81%E5%99%A8font"><span class="toc-number">3.2.</span> <span class="toc-text"> 解码器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E8%A7%A3%E7%A0%81%E9%80%BB%E8%BE%91font"><span class="toc-number">3.2.1.</span> <span class="toc-text"> 解码逻辑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E6%95%85%E9%9A%9C%E6%A3%80%E6%B5%8Bfont"><span class="toc-number">3.2.2.</span> <span class="toc-text"> 故障检测</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#font-color-b5d5ff-stylefont-weightbold%E5%B8%A7%E7%BB%93%E6%9E%84font"><span class="toc-number">4.</span> <span class="toc-text"> 帧结构</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history card-history-animation"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/8b10b/" title="8b10b"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/8b10b/cover/8b10b_cov.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="8b10b"/></a><div class="content"><a class="title" href="/posts/8b10b/" title="8b10b">8b10b</a><time datetime="2024-09-19T10:10:18.922Z" title="更新于 2024-09-19 18:10:18">2024-09-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/hexo-blog-construction/" title="hexo博客搭建"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/hexo-blog-construction/cover/hexo_blog.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="hexo博客搭建"/></a><div class="content"><a class="title" href="/posts/hexo-blog-construction/" title="hexo博客搭建">hexo博客搭建</a><time datetime="2024-08-08T03:13:23.923Z" title="更新于 2024-08-08 11:13:23">2024-08-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/vim-adventure/" title="Vim-Adventure"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/vim-adventure/cover/vim-adventure.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vim-Adventure"/></a><div class="content"><a class="title" href="/posts/vim-adventure/" title="Vim-Adventure">Vim-Adventure</a><time datetime="2024-07-16T14:58:59.323Z" title="更新于 2024-07-16 22:58:59">2024-07-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/hexo-and-butterfly/" title="hexo&amp;butterfly"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/hexo-and-butterfly/cover/hexo-butterfly.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="hexo&amp;butterfly"/></a><div class="content"><a class="title" href="/posts/hexo-and-butterfly/" title="hexo&amp;butterfly">hexo&amp;butterfly</a><time datetime="2024-07-14T03:45:19.846Z" title="更新于 2024-07-14 11:45:19">2024-07-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/hexo-blog-config/" title="hexo博客相关配置"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://cdn-1301954091.cos.ap-chengdu.myqcloud.com/blog/posts/hexo-blog-config/cover/hexo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="hexo博客相关配置"/></a><div class="content"><a class="title" href="/posts/hexo-blog-config/" title="hexo博客相关配置">hexo博客相关配置</a><time datetime="2024-07-14T03:43:14.791Z" title="更新于 2024-07-14 11:43:14">2024-07-14</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 HonkW <a href="/love/"><i id="heartbeat" class="fa fas fa-heartbeat"></i></a> JaneR</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><div id="running-time"></div><script>setInterval(()=>{let create_time=Math.round(new Date(Date.UTC(2019,10,10,14,20,45)).getTime()/1000);let timestamp=Math.round((new Date().getTime()+8*60*60*1000)/1000);let second=timestamp-create_time;let time=new Array(0,0,0,0,0);if(second>=365*24*3600){time[0]=parseInt(second/(365*24*3600));second%=365*24*3600;}if(second>=24*3600){time[1]=parseInt(second/(24*3600));second%=24*3600;}if(second>=3600){time[2]=parseInt(second/3600);second%=3600;}if(second>=60){time[3]=parseInt(second/60);second%=60;}if(second>0){time[4]=second;}currentTimeHtml='运行 '+time[0]+' 年 '+time[1]+' 天 '+time[2]+' 时 '+time[3]+' 分 '+time[4]+' 秒';document.getElementById("running-time").innerHTML=currentTimeHtml;},1000);</script></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      false && mermaid.init()
    })
  }
}</script><script>(()=>{
  const $countDom = document.getElementById('twikoo-count')
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'twikoo-4gewvco2261e595d',
      region: ''
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'twikoo-4gewvco2261e595d',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      $countDom.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const loadTwikoo = (bool = false) => {
    if (typeof twikoo === 'object') {
      init()
      bool && $countDom && setTimeout(getCount,0)
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(()=> {
        init()
        bool && $countDom && setTimeout(getCount,0)
      })
    }
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo(true)
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script><script>function loadValine () {
  function initValine () {
    let friends = 'f8c7afb61aea2c203160e90cd3b3a26a,6400426d4d741194a27f6eb6d03f259e,8479ce3f532d8dedd851dc2259fbb3a8,4cfdb76a1d0abb73512452a43ad7fe92,43f423034161c1234e49b8b8a075d8e0,5ee7178858803788421f49802e1c9c73,0007991f99268c04f1aa4cdd9bea93b4,85529577bc393156eb897a74f8bd5182,92dceb625af1ad4d34394a7857ed7702,abd7f9d004eef4ee9b85c26bef4a5a94,00b6017552f79cce0e8d634fdfb77d05'.split(',')
    let lover = 'c4421111c4dfc66aec9bc6b06ce41157'.split(',')
    let master = 'b5b1f0b663989b1f75b9a167f8d1450a,aadb40af2f150de622965ab74453633c,67a49eec8205661132d5ac387a00ec96'.split(',')
    let tagMeta = '博主,Lover,伙伴,访客'.split(',')
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'SPdUp8MmHsbDQ8DcOcbRc63T-MdYXbMMI',
      appKey: 'hUNSky7JaHy5zb0Jab7i8qsj',
      placeholder: '留下邮箱即可回复，作者回复后能收到邮件。点赞评论一下吧!',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: true,
      master: master,
      lover: lover,
      friends: friends,
      tagMeta: tagMeta,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/gh/HonkW93/cdn4blog/backgound/etc/valine.min.js').then(initValine)
}

if ('Twikoo' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script src="/styles/fish-func.js"></script><script src="https://cdn.jsdelivr.net/gh/HonkW93/cdn4blog@master/background/bg/background.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://blog.honk.wang/categories/hexo/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🖊️ hexo (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://blog.honk.wang/categories/ic/editor/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">📝 gvim (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://blog.honk.wang/categories/ic/design/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">🌈 design (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item" style="visibility: hidden"></div><a class="magnet_link_more"  href="https://blog.honk.wang/categories" style="flex:1;text-align: center;margin-bottom: 10px;">查看更多...</a></div></div>';
    console.log('已挂载magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(50% - 5px);background: #f2f2f2;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: #b30070}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>